window.__require=function e(a,t,o){function r(s,c){if(!t[s]){if(!a[s]){var i=s.split("/");if(i=i[i.length-1],!a[i]){var l="function"==typeof __require&&__require;if(!c&&l)return l(i,!0);if(n)return n(i,!0);throw new Error("Cannot find module '"+s+"'")}s=i}var g=t[s]={exports:{}};a[s][0].call(g.exports,function(e){return r(a[s][1][e]||e)},g,g.exports,e,a,t,o)}return t[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<o.length;s++)r(o[s]);return r}({ChangeTweet:[function(e,a,t){"use strict";cc._RF.push(a,"13336WWeLpLWpKn6MnNRBYz","ChangeTweet");var o=this&&this.__extends||function(){var e=function(a,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)a.hasOwnProperty(t)&&(e[t]=a[t])})(a,t)};return function(a,t){function o(){this.constructor=a}e(a,t),a.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,a,t,o){var r,n=arguments.length,s=n<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,a,t,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(n<3?r(s):n>3?r(a,t,s):r(a,t))||s);return n>3&&s&&Object.defineProperty(a,t,s),s};Object.defineProperty(t,"__esModule",{value:!0});var n=cc._decorator,s=n.ccclass,c=n.property,i=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.label=null,a.text="hello",a}return o(a,e),a.prototype.start=function(){},a.prototype.tweetRendered=function(){var e=cc.director.getScene().getChildByName("layout").getComponent("LoadMap"),a=e.node.getChildByName("topBar").getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet"),t=e.gameParams,o=t.scenarioName,r=-1;if(null!=t.messageOverride)o=t.messageOverride,a.color=COLOR_DESTRUCTION_POINTS,t.messageOverride=null;else if(t.totalLoss>0||t.populationPreparedPercent>0){var n=t.totalLoss/(t.totalLoss+t.populationPreparedPercent);Math.random()<n?(r=Math.floor(Math.random()*t.messagesNegative.length),o=t.messagesNegative[r]):(r=Math.floor(Math.random()*t.messagesPositive.length),o=t.messagesPositive[r]),a.color=COLOR_ICE}a.getComponent(cc.Label).string=o},r([c(cc.Label)],a.prototype,"label",void 0),r([c],a.prototype,"text",void 0),a=r([s],a)}(cc.Component);t.default=i,cc._RF.pop()},{}],LoadMap:[function(e,a,t){"use strict";function o(e){return c(e)||s(e)||n(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,a){if(e){if("string"==typeof e)return i(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,a):void 0}}function s(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function c(e){if(Array.isArray(e))return i(e)}function i(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,o=new Array(a);t<a;t++)o[t]=e[t];return o}cc._RF.push(a,"8590dH918pKU7D5d6Z+YZQi","LoadMap"),cc.Class({extends:cc.Component,properties:{defaultMaterial:{default:null,type:cc.Material,serializable:!0},messageBox:{default:null,type:cc.Node,serializable:!0},topBar:{default:null,type:cc.Node,serializable:!0},singleColor:{default:null,type:cc.SpriteFrame,serializable:!0},buttonWhite:{default:null,type:cc.SpriteFrame,serializable:!0},buttonGrey:{default:null,type:cc.SpriteFrame,serializable:!0},titleFont:{default:null,type:cc.Font,serializable:!0},bodyFont:{default:null,type:cc.Font,serializable:!0},map:{default:null,type:cc.TiledMap,serializable:!0},backgroundGreyscale:{default:null,type:cc.Node,serializable:!0},backgroundColour:{default:null,type:cc.Node,serializable:!0},material:{default:null,type:cc.Material,serializable:!0},sortedObjs:{default:[],serializable:!0},gameParams:{default:{},serializable:!0},world:{default:{},serializable:!0}},_time:0,collisionDetection:function(e,a){for(var t=!1,r=Math.max.apply(Math,o(e.map(function(e){return e.x}))),n=0;n<e.length;n++){var s=e[n],c=n==e.length-1?e[0]:e[n+1],i=parseFloat(s.x)+.001,l=parseFloat(s.y)-.001,g=parseFloat(c.x)+.001,m=parseFloat(c.y)-.001;(l<a.y&&m>=a.y||l>a.y&&m<=a.y)&&(i+g)/2<a.x&&a.x<r&&(0,t=!t)}return t},pointArray:function(e,a){return e.countriesJson[a].points},extremes:function(e,a){for(var t=this.pointArray(e,a),o=[],r=0;r<t.length;r++){for(var n=t[r],s=0,c=0,i=0,l=0,g=0;g<n.length;g++){var m=n[g];(0==s||s>parseInt(m.x))&&(s=parseInt(m.x)),(0==c||c>parseInt(m.y))&&(c=parseInt(m.y)),i<parseInt(m.x)&&(i=parseInt(m.x)),l<parseInt(m.y)&&(l=parseInt(m.y))}o.push({minx:s,miny:c,maxx:i,maxy:l})}return o},regionalArea:function(e,a){for(var t=0,o=0;o<a.length-1;o++){var r=a[o],n=a[o+1],s=r.x*n.y,c=r.y*n.x;t+=Math.abs(s-c)}return t/2},areas:function(e,a){for(var t=this.pointArray(e,a),o=0,r=0;r<t.length;r++){var n=t[r];o+=this.regionalArea(e,n)}return o},centroids:function(e,a){for(var t=this.pointArray(e,a),o=0,r=0,n=-1,s=0;s<t.length;s++){var c=t[s];(r=this.regionalArea(e,c))>o&&(n=s,o=r)}if(-1!=n){var i=t[n],l=0,g=0;return i.forEach(function(e){l+=parseFloat(e.x),g+=parseFloat(e.y)}),{x:l/i.length,y:g/i.length}}},initCountries:function(){var e=this,a=this.world;a.countries=Object.values(a.countriesJson).reduce(function(t,o){return t[o.iso_a3]||(t[o.iso_a3]={name:o.name,points:e.pointArray(a,o.iso_a3),extremes:e.extremes(a,o.iso_a3),centroid:e.centroids(a,o.iso_a3),area:e.areas(a,o.iso_a3),affected_chance:1,pop_est:parseInt(o.pop_est),pop_aware:0,pop_aware_percent:0,pop_prepared:0,pop_prepared_percent:0,gdp_est:parseInt(o.gdp_md_est),gid:1,iso_a2:o.iso_a2,iso_a3:o.iso_a3,subregion:o.subregion,economy:o.economy,income_grp:o.income_grp,income_grp_num:parseInt(o.income_grp.charAt(0)),equator_dist:o.equatorDist,offsetX:o.offsetX,offsetY:o.offsetY,policy:0,previousLoss:a.gameParams.previousLoss,loss:a.gameParams.previousLoss,neighbours:[],points_shared:0,points_total:0,shared_border_percentage:0,policyPoints:[],policyDots:[],destructionPoints:[],destructionDots:[],selected:!1}),t},{}),a.sortedObjs=Object.values(a.countries).sort(function(e,a){return e.points[0].y*cc.winSize.height+e.points[0].x>a.points[0].y*cc.winSize.height+a.points[0].x});var t={};Object.keys(a.countries).forEach(function(e){var o=a.countries[e];o.points.forEach(function(e){var a=e.x+"-"+e.y;t[a]?t[a].push(o.iso_a3):t[a]=[o.iso_a3]})}),Object.keys(t).forEach(function(e){var o=t[e];o.forEach(function(e){var t=a.countries[e];o.forEach(function(a){e!=a&&(-1==t.neighbours.indexOf(a)&&t.neighbours.push(a),t.points_shared+=1)}),t.points_total+=1})}),Object.keys(a.countries).forEach(function(e){var t=a.countries[e];t.shared_border_percentage=t.points_shared/t.points_total,t.shared_border_percentage>1&&(t.shared_border_percentage=1)}),Object.keys(a.countries).forEach(function(e){var t=a.countries[e];t.density=t.pop_est/t.area}),a.areaMin=0,a.areaMax=0,a.areaMean=0,a.areaMinCountry="",a.areaMaxCountry="",Object.keys(a.countries).forEach(function(e){var t=a.countries[e];(0==a.areaMin||a.areaMin>t.area)&&(a.areaMin=t.area,a.areaMinCountry=e),a.areaMax<t.area&&(a.areaMax=t.area,a.areaMaxCountry=e),a.areaMean+=t.area}),a.areaMean/=Object.keys(a.countries).length,a.areaRatio=Math.floor(Math.log2(a.areaMax/a.areaMin)),Object.keys(a.countries).forEach(function(e){var t=a.countries[e];t.numPoints=Math.ceil(Math.pow(t.area/a.areaMean,2))}),a.gameParams.populationWorld=Object.keys(a.countries).map(function(e){return a.countries[e].pop_est}).reduce(function(e,a){return e+parseInt(a)},0)},initGameParams:function(e){var a=this.world;void 0===cc.sys.localStorage.language&&(cc.sys.localStorage.language="eng"),void 0===cc.sys.localStorage.level&&(cc.sys.localStorage.level="Easy"),a.gameParams={},a.gameParams.level=cc.sys.localStorage.level,a.gameParams.language=cc.sys.localStorage.language,a.gameParams.greyscale=cc.sys.localStorage.greyscale,a.gameParams.difficultyMultiplier=1,"Medium"===a.gameParams.level?a.gameParams.difficultyMultiplier=2:"Hard"===a.gameParams.level&&(a.gameParams.difficultyMultiplier=3),a.gameParams.state=GAME_STATES.INITIALISED,a.gameParams.modal=!1,a.gameParams.startDate=new Date(Date.now()),a.gameParams.startDate.setDate(1),a.gameParams.startDate.setMonth(e.start_month),a.gameParams.startDate.setYear(e.start_year),a.gameParams.targetDate=new Date(Date.now()),a.gameParams.targetDate.setDate(1),a.gameParams.targetDate.setMonth(e.target_month),a.gameParams.targetDate.setYear(e.target_year),a.gameParams.previousDate=a.gameParams.startDate,a.gameParams.currentDate=a.gameParams.startDate,a.gameParams.counter=0,a.gameParams.lastResource=0,a.gameParams.lastCrisis=CRISIS_INTERVAL_MULTIPLIER,a.gameParams.crises=[],a.gameParams.crisisCountry=null,a.gameParams.crisisCount=0,a.gameParams.policies={},a.gameParams.policy=0,a.gameParams.countriedAffected=0,a.gameParams.populationAware=0,a.gameParams.populationPrepared=0,a.gameParams.populationAwarePercent=0,a.gameParams.populationPreparedPercent=0,a.gameParams.resources=e.starting_resources,a.gameParams.alertResources=!1,a.gameParams.alertCrisis=!1,a.gameParams.resourcesAdded=!1,a.gameParams.previousLoss=e.threat_details.starting_conditions.starting_loss,a.gameParams.rateOfLoss=e.threat_details.advanced_stats.loss_increase_speed,a.gameParams.minimumLoss=e.threat_details.advanced_stats.minimum_loss_increase,a.gameParams.totalLoss=0,a.gameParams.scenarioName=e[cc.sys.localStorage.language].name,a.gameParams.messagesNegative=e[cc.sys.localStorage.language].messages.negative,a.gameParams.messagesPositive=e[cc.sys.localStorage.language].messages.positive,a.gameParams.messageOverride=null,a.gameParams.tutorialMode=!1,a.gameParams.tutorialHints=[],a.gameParams.stats={},a.gameParams.quizzes=[],a.gameParams.shader={},cc.sys.isMobile?(a.gameParams.shader.u_cellSize=1,a.gameParams.shader.u_randFactor=.5,a.gameParams.shader.u_randAlpha=.3,a.gameParams.shader.u_sizePower=4,a.gameParams.shader.u_sizeMultiplier=1,a.gameParams.shader.u_stepMin=.9,a.gameParams.shader.u_stepMax=1,a.gameParams.shader.u_borderRadius=10):(a.gameParams.shader.u_cellSize=10,a.gameParams.shader.u_randFactor=.5,a.gameParams.shader.u_randAlpha=.3,a.gameParams.shader.u_sizePower=4,a.gameParams.shader.u_sizeMultiplier=1,a.gameParams.shader.u_stepMin=.9,a.gameParams.shader.u_stepMax=1,a.gameParams.shader.u_borderRadius=10),a.automateID>-1&&(a.gameParams.automateMode=!0,a.gameParams.automateScript=automateScripts[a.automateID-1],console.log("Running "+a.gameParams.automateScript.name)),this.updateTimeVars(MONTH_INTERVAL),this.calculatePolicyConnections()},updateTimeVars:function(e){var a=this.world;a.gameParams.timeInterval=e,a.gameParams.tutorialInterval=a.gameParams.timeInterval*TUTORIAL_INTERVAL_MULTIPLIER,a.gameParams.resourceInterval=a.gameParams.timeInterval*RESOURCE_INTERVAL_MULTIPLIER,a.gameParams.crisisInterval=a.gameParams.timeInterval*CRISIS_INTERVAL_MULTIPLIER},calculatePolicyConnections:function(){var e=this.world;e.gameParams.policyOptions={};var a=0;Object.keys(RESOURCES).forEach(function(t){RESOURCES[t].policyOptions.forEach(function(t){e.gameParams.policyOptions[t.id]=t,a<t.id&&(a=t.id)})}),e.gameParams.policyRelations={};for(var t=0;t<a;t++){var o=e.gameParams.policyOptions[t+1];e.gameParams.policyRelations[o.id]={};for(var r=t+1;r<a;r++){var n=e.gameParams.policyOptions[r+1];void 0===e.gameParams.policyRelations[n.id]&&(e.gameParams.policyRelations[n.id]={});var s=RESOURCE_MATRIX[r][t],c=RESOURCE_RELATIONS[r][t];e.gameParams.policyRelations[o.id][n.id]=s,1==c&&(e.gameParams.policyRelations[n.id][o.id]=s)}}},startGameParams:function(e){e.gameParams.state=GAME_STATES.STARTED},showMessageBox:function(e,a,t,o,r,n,s){var c=this.world;c.gameParams.modal=!0,c.gameParams.state=GAME_STATES.PAUSED,c.messageBox.zIndex=104,c.messageBox.opacity=255;var i=c.messageBox.getChildByName("messageBoxTitle").getComponent(cc.Label),l=c.messageBox.getChildByName("messageBoxContents").getComponent(cc.Label),g=c.messageBox.getChildByName("btn1").getComponent(cc.Button),m=c.messageBox.getChildByName("btn2").getComponent(cc.Button);l=c.messageBox.getChildByName("messageBoxContents").getComponent(cc.Label),i.string=a,l.string=t,g.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=o,m.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=n;var u=[];u.push(g),null===t||void 0===t||""===t?void 0!==n?(g.node.x=-.25*c.messageBox.width,m.node.x=.25*c.messageBox.width,m.node.opacity=255,m.interactable=!0,m.enabled=!0,u.push(m)):(g.x=0*c.messageBox.width,m.node.opacity=0,m.interactable=!1,m.enabled=!1):void 0!==n?(g.node.x=-.25*c.messageBox.width,m.node.x=.25*c.messageBox.width,m.node.opacity=255,m.interactable=!0,m.enabled=!0,u.push(m)):(g.node.x=0*c.messageBox.width,m.node.opacity=0,m.interactable=!1,m.enabled=!1);var p=function e(a){c.messageBox.opacity=0,g.node.off(cc.Node.EventType.TOUCH_END,e,g),m.node.off(cc.Node.EventType.TOUCH_END,d,m),c.gameParams.modal=!1,r(),a.stopPropagation()};g.node.on(cc.Node.EventType.TOUCH_END,p,g);var d=function e(a){c.messageBox.opacity=0,g.node.off(cc.Node.EventType.TOUCH_END,p,g),m.node.off(cc.Node.EventType.TOUCH_END,e,m),c.gameParams.modal=!1,s(),a.stopPropagation()};return m.interactable?m.node.on(cc.Node.EventType.TOUCH_END,d,m):m.node.off(cc.Node.EventType.TOUCH_END,d,m),u.push(g),void 0!==m&&u.push(m),u},showQuizBox:function(e,a,t,o,r){var n=this.world;n.gameParams.modal=!0,n.gameParams.state=GAME_STATES.PAUSED,n.quizBox.opacity=255,n.quizBox.zIndex=103,n.quizBox.getChildByName("quizTitle").getComponent(cc.Label).string=a,n.quizBox.getChildByName("quizContents").getComponent(cc.Label).string=t;var s=n.quizBox.getChildByName("btn1"),c=n.quizBox.getChildByName("btn2"),i=[];if(Math.random()>.5){var l=c;c=s,s=l}s.getChildByName("Background").getChildByName("optContents").getComponent(cc.Label).string=r,c.getChildByName("Background").getChildByName("optContents").getComponent(cc.Label).string=o;var g=function a(t){n.quizBox.opacity=0,s.off(cc.Node.EventType.TOUCH_END,a,s),c.off(cc.Node.EventType.TOUCH_END,m,c),n.gameParams.modal=!1,t.stopPropagation(),n.showMessageBox(e,"CRISIS RESPONSE","Great response to this crisis!","OK!",function(){var e=Math.floor(1+3*Math.random());n.gameParams.resources+=e,n.gameParams.state=GAME_STATES.STARTED})};s.on(cc.Node.EventType.TOUCH_END,g,s);var m=function a(t){n.quizBox.opacity=0,s.off(cc.Node.EventType.TOUCH_END,g,s),c.off(cc.Node.EventType.TOUCH_END,a,c),n.gameParams.modal=!1,t.stopPropagation(),n.showMessageBox(e,"CRISIS RESPONSE","Good try, but this won't be enough to preserve the future of Antarctica!","OK!",function(){var e=Math.floor(1+3*Math.random());n.gameParams.resources-e>0?n.gameParams.resources-=e:n.gameParams.resources=0,n.gameParams.state=GAME_STATES.STARTED})};return c.on(cc.Node.EventType.TOUCH_END,m,c),i.push(s),i.push(c),i},showSettingsBox:function(e){var a=this.world;a.gameParams.modal=!0,a.gameParams.state=GAME_STATES.PAUSED,a.settingsBox.opacity=255,a.settingsBox.zIndex=106;var t=a.settingsBox.getChildByName("apply"),o=a.settingsBox.getChildByName("cancel"),r="true"==cc.sys.localStorage.greyscale;a.settingsBox.getChildByName("toggleContainer").getChildByName("toggle1").getComponent(cc.Toggle).isChecked=r,a.settingsBox.getChildByName("toggleContainer").getChildByName("toggle2").getComponent(cc.Toggle).isChecked=!r;var n="eng"==cc.sys.localStorage.language;a.settingsBox.getChildByName("toggleLanguage").getChildByName("toggle1").getComponent(cc.Toggle).isChecked=n,a.settingsBox.getChildByName("toggleLanguage").getChildByName("toggle2").getComponent(cc.Toggle).isChecked=!n;var s=function(e){var t=a.settingsBox.getChildByName("toggleContainer").getChildByName("toggle1").getComponent(cc.Toggle).isChecked;cc.sys.localStorage.greyscale=t,a.gameParams.greyscale=t,t?(a.backgroundGreyscale.opacity=255,a.backgroundColour.opacity=0):(a.backgroundGreyscale.opacity=0,a.backgroundColour.opacity=255);var o=a.settingsBox.getChildByName("toggleContainer").getChildByName("toggle1").getComponent(cc.Toggle).isChecked;cc.sys.localStorage.language=o?"eng":"esp",a.settingsBox.opacity=0,a.settingsBox.zIndex=-1,a.gameParams.state=GAME_STATES.STARTED};t.on(cc.Node.EventType.TOUCH_END,s,t);o.on(cc.Node.EventType.TOUCH_END,function e(r){t.off(cc.Node.EventType.TOUCH_END,s,t),o.off(cc.Node.EventType.TOUCH_END,e,o),a.gameParams.modal=!1,r.stopPropagation(),a.settingsBox.opacity=0,a.settingsBox.zIndex=-1,a.gameParams.state=GAME_STATES.STARTED},o)},postResultsToServer:function(){var e=this.world,a=cc.loader.getXMLHttpRequest();a.open("POST","http://43.240.98.94/game_data"),a.setRequestHeader("Content-Type","application/json;charset=UTF-8");var t=Object.assign({},e.gameParams,{policyOptions:void 0,policyRelations:void 0,messagesNegative:void 0,messagesPositive:void 0,timeoutID:void 0,tutorialHints:void 0,tutorialInterval:void 0}),o={};Object.values(e.countries).forEach(function(e){o[e.iso_a3]=Object.assign({},e,{points:void 0,points_shared:void 0,points_total:void 0,selected:void 0,shared_border_percentage:void 0,subregion:void 0,destructionPoints:void 0,destructionDots:void 0,policyPoints:void 0,policyDots:void 0,offsetX:void 0,offsetY:void 0,neighbours:void 0,income_grp:void 0,income_grp_num:void 0,iso_a2:void 0,gid:void 0,gdp:void 0,extremes:void 0,equator_dist:void 0,centroid:void 0,area:void 0,density:void 0,economy:void 0})}),t.countries=o,cc.log(JSON.stringify(t)),a.send(JSON.stringify(t))},gameOver:function(e,a,t){var o=this.world;o.postResultsToServer(),window.clearTimeout(o.gameParams.timeoutID),o.gameParams.state=GAME_STATES.PAUSED,o.showMessageBox(e,"Game Over",a,t,function(){o.initGameParams(o.scenarioData),o.gameParams.state=GAME_STATES.GAME_OVER,o.gameParams.startCountry=null,o.gameParams.policies={},o.tweetLabel.string=o.gameParams.scenarioName,cc.director.loadScene("SelectOptions")})},handleMouseTouchEvent:function(e,a){cc.sys.isMobile&&e.on(cc.Node.EventType.TOUCH_BEGAN,function(a){e.TOUCHED=!0,a.stopPropagation()}.bind(e)),e.on(cc.Node.EventType.TOUCH_END,function(t){cc.sys.isMobile&&!e.TOUCHED||(a(e),t.stopPropagation(),e.TOUCHED=!1)}.bind(e))},initControls:function(){var e=this.world;e.btnQuit=e.topBar.getChildByName("btnQuit"),e.btnSettings=e.topBar.getChildByName("btnSettings"),e.btnSound=e.topBar.getChildByName("btnSound"),e.btnPause=e.topBar.getChildByName("btnPause"),e.btnPlay=e.topBar.getChildByName("btnPlay"),e.btnFF=e.topBar.getChildByName("btnFF"),e.tweetLabel=e.topBar.getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet"),e.bottomBar=cc.director.getScene().getChildByName("layout").getChildByName("bottomBar"),e.countryLabel=e.bottomBar.getChildByName("lblCountry").getComponent(cc.Label),e.countryLoss=e.bottomBar.getChildByName("lblLossPercent").getComponent(cc.Label),e.countryLossProgress=e.bottomBar.getChildByName("progressBarLoss").getComponent(cc.ProgressBar),e.countryAwarePrepared=e.bottomBar.getChildByName("lblPreparednessPercent").getComponent(cc.Label),e.countryPreparedProgress=e.bottomBar.getChildByName("progressBarPreparedness").getComponent(cc.ProgressBar),e.resourceScoreLabel=cc.director.getScene().getChildByName("resourceScoreBackground").getChildByName("lblResourceScore").getComponent(cc.Label),e.quizBox=cc.director.getScene().getChildByName("layerQuizBox"),e.settingsBox=cc.director.getScene().getChildByName("layerSettings"),e.handleMouseTouchEvent(e.topBar.getChildByName("btnQuit"),function(){e.gameParams.state=GAME_STATES.PAUSED,e.showMessageBox(e.node.parent,"Quit Game","","Quit Game",function(){e.postResultsToServer(),e.gameParams.state=GAME_STATES.GAME_OVER,cc.director.loadScene("SelectOptions")},"Return to Game",function(){e.gameParams.state=GAME_STATES.STARTED})}),e.topBar.getChildByName("btnSettings").on(cc.Node.EventType.TOUCH_END,function(){e.gameParams.state=GAME_STATES.PAUSED,e.showSettingsBox(e.node.parent\u03c0)},this),e.handleMouseTouchEvent(e.topBar.getChildByName("btnSound"),function(){e.gameParams.state=GAME_STATES.PAUSED,e.showMessageBox(e.node.parent,"Sound","Not yet implemented","OK",function(){e.gameParams.state=GAME_STATES.STARTED})}),e.handleMouseTouchEvent(e.topBar.getChildByName("btnPause"),function(){e.gameParams.state=GAME_STATES.PAUSED,e.btnPause.getComponent(cc.Button).interactable=!1,e.btnPlay.getComponent(cc.Button).interactable=!0,e.btnFF.getComponent(cc.Button).interactable=!0,e.topBar.getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet").getComponent(cc.Animation).pause()}),e.handleMouseTouchEvent(e.topBar.getChildByName("btnPlay"),function(){e.updateTimeVars(MONTH_INTERVAL),e.gameParams.state=GAME_STATES.STARTED,e.btnPause.getComponent(cc.Button).interactable=!0,e.btnPlay.getComponent(cc.Button).interactable=!1,e.btnFF.getComponent(cc.Button).interactable=!0,e.topBar.getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet").getComponent(cc.Animation).play()}),e.handleMouseTouchEvent(e.topBar.getChildByName("btnFF"),function(){e.updateTimeVars(MONTH_INTERVAL_FF),e.gameParams.state=GAME_STATES.STARTED,e.btnPause.getComponent(cc.Button).interactable=!0,e.btnPlay.getComponent(cc.Button).interactable=!0,e.btnFF.getComponent(cc.Button).interactable=!1,e.topBar.getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet").getComponent(cc.Animation).play()});var a=e.node.getChildByName("bottomBar").getChildByName("btnDesignPolicy"),t=e.node.getChildByName("bottomBar").getChildByName("btnStats"),o=cc.director.getScene().getChildByName("layerDesignPolicy"),r=cc.director.getScene().getChildByName("resourceScoreBackground"),n=cc.director.getScene().getChildByName("layerStats");cc.director.getScene().getChildByName("layerMessageBox");a.on(cc.Node.EventType.TOUCH_END,function(){e.gameParams.state=GAME_STATES.PAUSED,o.zIndex=105,r.zIndex=106;var a=cc.director.getScene().getChildByName("layerDesignPolicy"),t=a.getChildByName("policyLabel"),n=a.getChildByName("policyDescription"),s=a.getChildByName("policyCostLabel"),c=a.getChildByName("btnPolicyInvest");t.opacity=0,t.getComponent(cc.Label).string="<< Select",n.opacity=255;var i=gd.lang.policy_platform_hint[cc.sys.localStorage.language];n.getComponent(cc.Label).string=i,s.opacity=0,c.getComponent(cc.Button).interactable=!0,c.opacity=0});var s=o.getChildByName("btnDesignPolicyQuit");s.on(cc.Node.EventType.TOUCH_END,function(){e.gameParams.state=GAME_STATES.STARTED,o.zIndex=-1,r.zIndex=101},s),t.on(cc.Node.EventType.TOUCH_END,function(){e.gameParams.state=GAME_STATES.PAUSED,n.zIndex=105;var a=n.getChildByName("pageview").getChildByName("view").getChildByName("content").getChildByName("page_1"),t=n.getChildByName("pageview").getChildByName("view").getChildByName("content").getChildByName("page_2"),o=n.getChildByName("pageview").getChildByName("view").getChildByName("content").getChildByName("page_3"),r=function(e,a,t,o){u.lineWidth=t,u.strokeColor=o,u.fillColor=o,u.moveTo(e.x,e.y),u.lineTo(a.x+1,a.y),u.stroke(),u.fill()},s=function(e){return(Math.round(10*e)/10).toString()+"%"};a.getChildByName("lblYear").getComponent(cc.Label).string=gd.lang.stats_year[cc.sys.localStorage.language]+e.gameParams.currentDate.getFullYear(),a.getChildByName("lblYearMessage").getComponent(cc.Label).string=gd.lang.stats_year_message_a[cc.sys.localStorage.language]+(e.gameParams.targetDate.getFullYear()-e.gameParams.currentDate.getFullYear())+gd.lang.stats_year_message_b[cc.sys.localStorage.language],a.getChildByName("lblLoss").getComponent(cc.Label).string=gd.lang.stats_loss[cc.sys.localStorage.language],a.getChildByName("lblLossMessage").getComponent(cc.Label).string=gd.lang.stats_loss_message_a[cc.sys.localStorage.language]+e.gameParams.startDate.getFullYear()+gd.lang.stats_loss_message_b[cc.sys.localStorage.language]+s(e.gameParams.totalLoss)+".",a.getChildByName("lblPreparedness").getComponent(cc.Label).string=gd.lang.stats_preparedness[cc.sys.localStorage.language]+s(e.gameParams.populationPreparedPercent)+" / "+Math.round(e.gameParams.populationPrepared/1e6)+"M";var c=gd.lang.stats_preparedness_message_a[cc.sys.localStorage.language]+s(e.gameParams.populationPreparedPercent)+gd.lang.stats_preparedness_message_b[cc.sys.localStorage.language];a.getChildByName("lblPreparednessMessage").getComponent(cc.Label).string=c;var i=Object.values(e.countries).sort(function(e,a){return e.name<a.name?-1:e.name>a.name?1:0}),l=t.getChildByName("scrollview").getChildByName("view").getChildByName("content");l.destroyAllChildren();var g=0;i.forEach(function(a){g++;var t=a.loss>20?COLOR_DESTRUCTION_POINTS:a.pop_prepared_percent>20?COLOR_POLICY_POINTS:COLOR_ICE,o=new cc.Node,r=o.addComponent(cc.Label);o.color=t,r.string=a.name,r.fontSize=20,r.font=e.titleFont,r.horizontalAlign=cc.Label.HorizontalAlign.LEFT,o.setAnchorPoint(0,0),o.x=0,o.y=-24*g-40,o.parent=l;var n=new cc.Node,c=n.addComponent(cc.Label);n.color=t,c.string=s(a.loss),c.fontSize=20,c.font=e.titleFont,c.horizontalAlign=cc.Label.HorizontalAlign.RIGHT,n.setAnchorPoint(1,0),n.x=580,n.y=-24*g-40,n.parent=l;var i=new cc.Node,m=i.addComponent(cc.Label);i.color=t,m.string=s(a.pop_prepared_percent),m.fontSize=20,m.font=e.titleFont,m.horizontalAlign=cc.Label.HorizontalAlign.RIGHT,i.setAnchorPoint(1,0),i.x=780,i.y=-24*g-40,i.parent=l});var m=o.getChildByName("graph"),u=m.getComponent(cc.Graphics);u.clear(),m.destroyAllChildren();var p=0,d=0,y=0,h=0,f=0,_=0,P=new cc.Color(COLOR_DESTRUCTION_POINTS.r,COLOR_DESTRUCTION_POINTS.g,COLOR_DESTRUCTION_POINTS.b),C=new cc.Color(COLOR_POLICY_POINTS.r,COLOR_POLICY_POINTS.g,COLOR_POLICY_POINTS.b),S=e.gameParams.targetDate.getFullYear()-e.gameParams.startDate.getFullYear(),v=.9*o.width/S,b=.9*o.height/100;r(new cc.Vec2(4,-10),new cc.Vec2(4+.9*o.width,-10),1,COLOR_ICE),r(new cc.Vec2(4,-10),new cc.Vec2(4,0+.9*o.height),1,COLOR_ICE);for(var E=e.gameParams.startDate.getFullYear();E<e.gameParams.targetDate.getFullYear();E++){var T=E-e.gameParams.startDate.getFullYear(),O=e.gameParams.stats[E];if(void 0!==O){var B=O.loss,N=O.prepared;h=4+T*v,_=0+(100-Math.round(B))*b,f=0+Math.round(N)*b,T>0&&(r(new cc.Vec2(p,y),new cc.Vec2(h-1,y),1,P),r(new cc.Vec2(h,y),new cc.Vec2(h,_),1,P),r(new cc.Vec2(p,d),new cc.Vec2(h-1,d),1,C),r(new cc.Vec2(h,d),new cc.Vec2(h,f),1,C)),p=h,y=_,d=f}}var M=new cc.Node,A=M.addComponent(cc.Label);A.string=s(e.gameParams.totalLoss),A.font=e.titleFont,A.fontSize=28,M.color=P,M.setPosition(8+h,0+_),M.setAnchorPoint(0,.5),M.parent=m,M.zIndex=106;var R=new cc.Node,L=R.addComponent(cc.Label);L.string=s(e.gameParams.populationPreparedPercent),L.font=e.titleFont,L.fontSize=28,R.color=C,R.setPosition(8+h,0+f),R.setAnchorPoint(0,.5),R.parent=m,R.zIndex=106},t);var c=n.getChildByName("btnStatsQuit");c.on(cc.Node.EventType.TOUCH_END,function(){e.gameParams.state=GAME_STATES.STARTED,n.zIndex=-1},c),n.zIndex=-1},initPolicyDesign:function(){var e=this.world,a=cc.director.getScene().getChildByName("layerDesignPolicy"),t=a.getChildByName("pageview").getComponent(cc.PageView),o=cc.director.getScene().getChildByName("resourceScoreBackground").getChildByName("lblResourceScore").getComponent(cc.Label),r=a.getChildByName("btnEconomy"),n=a.getChildByName("btnPolitics"),s=a.getChildByName("btnCulture"),c=a.getChildByName("btnEcology"),i=a.getChildByName("policyLabel"),l=a.getChildByName("policyDescription"),g=a.getChildByName("policyCostLabel"),m=a.getChildByName("btnPolicyInvest");t.setCurrentPageIndex(0),r.getComponent(cc.Button).interactable=!1,r.getChildByName("Label").color=COLOR_UMBER;var u=[r,n,s,c],p=r,d=null,y=function(a){var t=e.gameParams.policies[a.id],o=a.cost_1;if(void 0!==t)switch(t){case 1:o=a.cost_2;break;case 2:o=a.cost_3;break;case 3:o=0}for(var r=e.generateResourceDistribution(),n=Math.floor((a.id-1)/4),s=[],c=0;c<r.length;c++){if(c%4==0)s.push(4*r[c]);else s[Math.floor(c/4)]+=4*r[c]}return s[n]>1&&(o*=s[n]),o=Math.round(o)},h=function(e,a){d=null,t.setCurrentPageIndex(a),e.getComponent(cc.Button).interactable=!1,e.getChildByName("Label").color=COLOR_UMBER,null!=p&&p!=e&&(p.getComponent(cc.Button).interactable=!0,p.getChildByName("Label").color=COLOR_ICE),p=e,i.opacity=0;var o=gd.lang.policy_platform_hint[cc.sys.localStorage.language];l.getComponent(cc.Label).string=o,g.opacity=0,m.opacity=0},f=function(e,t,o){var r=u[o];return r.getChildByName("Label").getComponent(cc.Label).string=e,r.on(cc.Node.EventType.TOUCH_END,function(e){h(r,o)},a),0==o&&(r.getComponent(cc.Button).interactable=!1,r.getChildByName("Label").color=COLOR_UMBER,p=r),r};m.on(cc.Node.EventType.TOUCH_END,function(){var a=y(d);e.gameParams.resources-a>=0&&void 0===e.gameParams.policies[d.id]?(e.gameParams.resources-=a,e.gameParams.policies[d.id]=1,o.string=e.gameParams.resources.toString(),_[100*d.id+1].getComponent(cc.Sprite).spriteFrame=e.dotOff,_[100*d.id+1].color=COLOR_UMBER):e.gameParams.resources-a>=0&&1===e.gameParams.policies[d.id]?(e.gameParams.resources-=a,e.gameParams.policies[d.id]=2,o.string=e.gameParams.resources.toString(),_[100*d.id+2].getComponent(cc.Sprite).spriteFrame=e.dotOff,_[100*d.id+2].color=COLOR_UMBER):e.gameParams.resources-a>=0&&2==e.gameParams.policies[d.id]&&(e.gameParams.resources-=a,e.gameParams.policies[d.id]=3,o.string=e.gameParams.resources.toString(),_[100*d.id+3].getComponent(cc.Sprite).spriteFrame=e.dotOff,_[100*d.id+3].color=COLOR_UMBER);var t=y(d);g.getComponent(cc.Label).string=gd.lang.policy_platform_cost[cc.sys.localStorage.language]+t.toString(),3==e.gameParams.policies[d.id]?(m.getComponent(cc.Button).interactable=!1,m.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=gd.lang.policy_platform_completed[cc.sys.localStorage.language]):t<=e.gameParams.resources?(m.getComponent(cc.Button).interactable=!0,m.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=gd.lang.policy_platform_invest[cc.sys.localStorage.language]):(m.getComponent(cc.Button).interactable=!1,m.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=gd.lang.policy_platform_more_resources[cc.sys.localStorage.language])},this),Object.values(RESOURCES).forEach(function(e,a){f(e[cc.sys.localStorage.language].name,new cc.Vec2(300+200*a,80),a)});for(var _={},P=0;P<4;++P)for(var C=RESOURCES[Object.keys(RESOURCES)[P]],S=0,v=0,b=0,E=t.node.getChildByName("view").getChildByName("content").children[P],T=function(a){var t=C.policyOptions[a];S=b%2*E.width/2,v=(1-Math.floor(b/2))*E.height/2,b++;var o=new cc.Node;o.setAnchorPoint(cc.Vec2(0,0)),o.parent=E,o.setPosition(S,v),o.setContentSize(cc.size(E.width/3,E.height/3));var r=new cc.Node;r.setAnchorPoint(cc.Vec2(0,0)),r.setContentSize(cc.size(104,104)),r.setPosition(50,50),r.parent=o,r.color=COLOR_ICE,cc.loader.loadRes(t.img_normal,cc.SpriteFrame,function(a,t){var o=r.addComponent(cc.Sprite);o.materials=[e.defaultMaterial],o.spriteFrame=t}),o.cost_1=t.cost_1,o.cost_2=t.cost_2,o.cost_3=t.cost_3,o.option=t,o.enabled=!0,void 0!==e.gameParams.policies[t.id]&&(o.enabled=!1);var n=new cc.Node;n.name="Label",n.color=COLOR_ICE;var s=n.addComponent(cc.Label);s.string=t[cc.sys.localStorage.language].text,s.font=e.titleFont,s.fontSize=20,s.verticalAlign=cc.Label.VerticalAlign.BOTTOM,n.setPosition(0,0),n.setAnchorPoint(0,0),n.setContentSize(o.width,.1*o.height),n.parent=o;var c=function(a){d=o.option,i.getComponent(cc.Label).string=d[cc.sys.localStorage.language].text_long,l.getComponent(cc.Label).string=d[cc.sys.localStorage.language].description;var r=y(d);g.getComponent(cc.Label).string=gd.lang.policy_platform_cost[cc.sys.localStorage.language]+r.toString(),3==e.gameParams.policies[t.id]?(m.getComponent(cc.Button).interactable=!1,m.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=gd.lang.policy_platform_completed[cc.sys.localStorage.language]):r<=e.gameParams.resources?(m.getComponent(cc.Button).interactable=!0,m.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=gd.lang.policy_platform_invest[cc.sys.localStorage.language]):(m.getComponent(cc.Button).interactable=!1,m.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=gd.lang.policy_platform_more_resources[cc.sys.localStorage.language]),i.opacity=255,l.opacity=255,g.opacity=255,m.opacity=255},u=function(e){r.color=COLOR_UMBER,n.color=COLOR_UMBER},p=function(e){r.color=COLOR_ICE,n.color=COLOR_ICE};[o,r,n].forEach(function(e){e.on(cc.Node.EventType.TOUCH_END,c,o)}),[o,r,n].forEach(function(e){e.on(cc.Node.EventType.MOUSE_ENTER,u,o)}),[o,r,n].forEach(function(e){e.on(cc.Node.EventType.MOUSE_LEAVE,p,o)});var h=new cc.Node,f=h.addComponent(cc.Sprite);f.spriteFrame=e.dotOff,f.materials=[e.defaultMaterial];var P=new cc.Node,T=P.addComponent(cc.Sprite);T.spriteFrame=e.dotOff,T.materials=[e.defaultMaterial];var O=new cc.Node,B=O.addComponent(cc.Sprite);B.spriteFrame=e.dotOff,B.materials=[e.defaultMaterial],void 0===e.gameParams.policies[t.id]?(f.spriteFrame=e.dotOff,T.spriteFrame=e.dotOff,B.spriteFrame=e.dotOff):1===e.gameParams.policies[t.id]?(f.spriteFrame=e.dotOn,T.spriteFrame=e.dotOff,B.spriteFrame=e.dotOff):2===e.gameParams.policies[t.id]?(f.spriteFrame=e.dotOn,T.spriteFrame=e.dotOn,B.spriteFrame=e.dotOff):3===e.gameParams.policies[t.id]&&(f.spriteFrame=e.dotOn,T.spriteFrame=e.dotOn,B.spriteFrame=e.dotOn),h.setPosition(0,50),h.setContentSize(25,25),h.setAnchorPoint(cc.Vec2(0,0)),P.setPosition(0,h.y+35),P.setContentSize(25,25),P.setAnchorPoint(cc.Vec2(0,0)),O.setPosition(0,P.y+35),O.setAnchorPoint(cc.Vec2(0,0)),O.setContentSize(25,25),h.parent=o,P.parent=o,O.parent=o,_[100*t.id+1]=h,_[100*t.id+2]=P,_[100*t.id+3]=O},O=0;O<C.policyOptions.length;O++)T(O);r.on(cc.Node.EventType.TOUCH_END,function(e){h(r,0)}),n.on(cc.Node.EventType.TOUCH_END,function(e){h(n,1)}),s.on(cc.Node.EventType.TOUCH_END,function(e){h(s,2)}),c.on(cc.Node.EventType.TOUCH_END,function(e){h(c,3)}),t.node.on("page-turning",function(e){var a=e.getCurrentPageIndex();h(u[a],a)},e)},initStats:function(){var e=this.world,a=cc.director.getScene().getChildByName("layerStats"),t=a.getChildByName("pageview").getComponent(cc.PageView),o=a.getChildByName("btnWorld"),r=a.getChildByName("btnCountries"),n=a.getChildByName("btnTrends");t.setCurrentPageIndex(0),o.getComponent(cc.Button).interactable=!1,o.getChildByName("Label").color=COLOR_UMBER;var s=[o,r,n],c=o,i=function(e,a){t.setCurrentPageIndex(a),e.getComponent(cc.Button).interactable=!1,e.getChildByName("Label").color=COLOR_UMBER,null!=c&&c!=e&&(c.getComponent(cc.Button).interactable=!0,c.getChildByName("Label").color=COLOR_ICE),c=e};o.on(cc.Node.EventType.TOUCH_END,function(e){i(o,0)}),r.on(cc.Node.EventType.TOUCH_END,function(e){i(r,1)}),n.on(cc.Node.EventType.TOUCH_END,function(e){i(n,2)}),t.node.on("page-turning",function(e){var a=e.getCurrentPageIndex();i(s[a],a)},e)},processResourceSelection:function(e){var a=this.world;if(a.gameParams.state!==GAME_STATES.PAUSED){var t=Math.floor(1+3*Math.random());a.gameParams.resources+=t,e.target.destroy(),a.gameParams.resourcesAdded||(a.gameParams.state=GAME_STATES.PAUSED,a.gameParams.resourcesAdded=!0,a.gameParams.tutorialMode?a.showMessageBox(a,"HINT:",TUTORIAL_MESSAGES.FIRST_RESOURCE_CLICKED[cc.sys.localStorage.language],"OK!",function(){a.gameParams.tutorialHints.push(TUTORIAL_MESSAGES.FIRST_RESOURCE_CLICKED[cc.sys.localStorage.language]),a.gameParams.state=GAME_STATES.STARTED}):a.gameParams.state=GAME_STATES.STARTED)}},processCrisisSelection:function(e){var a=this.world;if(a.gameParams.state!==GAME_STATES.PAUSED){a.gameParams.crisisCountry=null;for(var t=null,o=0;o<a.gameParams.crises.length;o++)if(a.gameParams.crises[o].id==e.target.crisisId){var r=a.gameParams.crises[o];t=CRISES[r.crisis],a.gameParams.crises.splice(o,1);break}if(e.target.destroy(),!a.gameParams.alertCrisis&&a.gameParams.tutorialMode)a.gameParams.state=GAME_STATES.PAUSED,a.gameParams.alertCrisis=!0,a.showMessageBox(a,gd.lang.crisis_title[cc.sys.localStorage.language],gd.lang.crisis_message[cc.sys.localStorage.language]+t[cc.sys.localStorage.language]+"!","OK!",function(){a.gameParams.state=GAME_STATES.STARTED});else if(Math.random()<.5){var n=Math.floor(Math.random()*gd.quizzes.length),s=gd.quizzes[n];if(a.gameParams.quizzes.indexOf(s)>-1)return;a.gameParams.quizzes.push(s);var c=s.quiz[cc.sys.localStorage.language],i=s.wrong_answer[cc.sys.localStorage.language],l=s.right_answer[cc.sys.localStorage.language];a.showQuizBox(a,"CRISIS ALERT!",c,i,l)}}},refreshDate:function(e){e.topBar.getChildByName("lblMonth").getComponent(cc.Label).string=(e.gameParams.currentDate.getMonth()+1).toString(),e.topBar.getChildByName("lblYear").getComponent(cc.Label).string=e.gameParams.currentDate.getFullYear().toString()},printCountryStats:function(){var e=this.world,a=e.countries[e.gameParams.currentCountry];e.countryLabel.string=a.name;var t=Math.floor(a.loss),o=Math.floor(a.pop_prepared_percent);e.countryLoss.string=t+"%",e.countryLossProgress.progress=t/100,t>=LOSS_TOTAL?e.countryLossProgress.opacity=255:t>=LOSS_PARTIAL&&(e.countryLossProgress.opacity=191),e.countryAwarePrepared.string=o+"%",e.countryPreparedProgress.progress=o/100},printWorldStats:function(){var e=this.world;e.countryLabel.string=gd.lang.world_label[cc.sys.localStorage.language];var a=Math.round(e.gameParams.totalLoss),t=Math.round(e.gameParams.populationPreparedPercent);e.countryLoss.string=a+"%",e.countryAwarePrepared.string=t+"%",e.countryLossProgress.progress=a/100,e.countryPreparedProgress.progress=t/100},generateResourceDistribution:function(){for(var e=this.world,a=[],t=0,o=0;o<16;o++){var r=1;void 0!==e.gameParams.policies[o+1]&&(r+=e.gameParams.policies[o+1]),t+=r,a.push(r)}for(var n=0;n<a.length;n++)a[n]/=t;return a},selectCountry:function(e,a){var t=this.world;if(t.gameParams.state===GAME_STATES.PREPARED||t.gameParams.state===GAME_STATES.STARTED||t.gameParams.state===GAME_STATES.PAUSED){var o=e.getCurrentTarget().convertToNodeSpaceAR(a);t.lastLayerID=-1;var r=0,n=t.sortedObjs.length;t.lastLayerID>-1&&(r=r<0?0:r,n=n>t.sortedObjs.length?t.sortedObjs.length:n);for(var s=function(e,a){return Math.sqrt(Math.pow(e.x-a.x,2)+Math.pow(e.y-a.y,2))},c=-1,i=null,l=r;l<n;l++){var g=t.sortedObjs[l],m={x:o.x,y:cc.winSize.height-o.y-2*Y_OFFSET};if(t.collisionDetection(g.points[0],m)){t.lastLayerID=l;var u=s(t.countries[g.iso_a3].centroid,m);if(-1===c||u<c){c=u,i=g.iso_a3;break}}}return null!=i?(null!=t.gameParams.currentCountry&&(t.countries[t.gameParams.currentCountry].selected=!1),t.gameParams.currentCountry=i,null!=t.gameParams.currentCountry&&(t.countries[t.gameParams.currentCountry].selected=!0),t.gameParams.currentCountry=i,t.printCountryStats()):(null!=t.gameParams.currentCountry&&(t.countries[t.gameParams.currentCountry].selected=!1),t.gameParams.currentCountry=null,t.printWorldStats()),!0}},generateWeightedPolicyIndex:function(e){for(var a=this.world.generateResourceDistribution(),t=0,o=0,r=0;r<a.length;r++){if((t+=a[r])>e){o=r;break}}return o},generatePolicyIcon:function(){var e=this.world.generateWeightedPolicyIndex(Math.random());switch(e){case 0:res.resource_economy_1;break;case 1:res.resource_economy_2;break;case 2:res.resource_economy_3;break;case 3:res.resource_economy_4;break;case 4:res.resource_politics_1;break;case 5:res.resource_politics_2;break;case 6:res.resource_politics_3;break;case 7:res.resource_politics_4;break;case 8:res.resource_culture_1;break;case 9:res.resource_culture_2;break;case 10:res.resource_culture_3;break;case 11:res.resource_culture_4;break;case 12:res.resource_ecology_1;break;case 13:res.resource_ecology_2;break;case 14:res.resource_ecology_3;break;case 15:res.resource_ecology_4}return e},addResource:function(){var e=this.world,a=new cc.Node("Resource"),t=a.addComponent(cc.Sprite),o=e.generatePolicyIcon();t.spriteFrame=e.policyIcons[o];var r=Math.floor(Math.random()*Object.keys(e.countries).length),n=e.countries[Object.keys(e.countries)[r]].centroid;a.setPosition(n.x,e.node.height-2*Y_OFFSET-n.y+RESOURCE_SIZE_H/2),a.setContentSize(cc.size(RESOURCE_SIZE_W,RESOURCE_SIZE_H)),a.placedAt=e.gameParams.counter,a.setAnchorPoint(.5,0),a.parent=cc.director.getScene(),a.zIndex=102,e.buttons.push(a),a.on(cc.Node.EventType.TOUCH_END,e.processResourceSelection,this),e.gameParams.alertResources||e.gameParams.tutorialMode&&(e.gameParams.state=GAME_STATES.PAUSED,e.gameParams.alertResources=!0,e.showMessageBox(e,"HINT:",TUTORIAL_MESSAGES.FIRST_RESOURCE_SHOWN[cc.sys.localStorage.language],"OK!",function(a){e.gameParams.tutorialHints.push(TUTORIAL_MESSAGES.FIRST_RESOURCE_SHOWN[cc.sys.localStorage.language]),e.gameParams.state=GAME_STATES.PAUSED_TUTORIAL})),e.gameParams.lastResource=e.gameParams.counter},crisisProbDistribution:function(){var e=this.world,a=[],t=Object.keys(CRISES),o=Object.keys(e.countries),r=0;t.forEach(function(t){var n=CRISES[t];o.forEach(function(t){var o=e.countries[t],s=o.loss/e.gameParams.totalLoss,c=o.pop_prepared_percent/e.gameParams.populationPreparedPercent,i=1;i+=s*n.influence_of_environmental_loss,i+=c*n.influence_of_preparedness,isNaN(i)&&(i=0),i>0&&(r+=i,a.push(i))})});for(var n=0;n<a.length;n++)a[n]/=r;return a},crisisProbLocation:function(e){for(var a=this.world,t=a.crisisProbDistribution(),o=Object.keys(CRISES),r=Object.keys(a.countries),n={},s=0,c=0;c<t.length;c++)if(e<(s+=t[c])){var i=Math.floor(o.length*c/t.length),l=c%r.length;n.crisis=o[i],n.country=r[l],n.id=c,n.counter=a.gameParams.counter;break}return n},addCrisis:function(){var e=this.world,a=Math.random(),t=e.crisisProbLocation(a);e.gameParams.crisisCountry=t,e.gameParams.crises.push(t),e.gameParams.crisisCount++;var o=CRISES[t.crisis],r=e.countries[t.country],n=new cc.Node("Crisis");n.addComponent(cc.Sprite).spriteFrame=e.crisisIcons[t.crisis];var s=r.centroid;console.log(r.name),n.setPosition(s.x,e.node.height-2*Y_OFFSET-s.y+RESOURCE_SIZE_H/2),n.setContentSize(cc.size(RESOURCE_SIZE_W,RESOURCE_SIZE_H)),n.placedAt=e.gameParams.counter,n.setAnchorPoint(.5,0),n.crisisId=t.id,n.name="crisis"+t.id,n.parent=cc.director.getScene(),n.zIndex=102,e.buttons.push(n),n.on(cc.Node.EventType.TOUCH_END,e.processCrisisSelection,this);var c=gd.lang.crisis_prefix[cc.sys.localStorage.language]+o[cc.sys.localStorage.language]+gd.lang.crisis_suffix[cc.sys.localStorage.language]+r.name+".";if(e.gameParams.crisisCount<4){e.gameParams.state=GAME_STATES.PAUSED,c+=gd.lang.crisis_explanation[cc.sys.localStorage.language];var i=e.showMessageBox(e,gd.lang.crisis_alert[cc.sys.localStorage.language],c,"OK!",function(a){e.gameParams.tutorialMode?e.gameParams.state=GAME_STATES.PAUSED_TUTORIAL:e.gameParams.state=GAME_STATES.STARTED});e.gameParams.automateMode&&fireClickOnTarget(i[0])}e.gameParams.lastCrisis=e.gameParams.counter},addTutorial:function(){var e=this.world;if(!(e.gameParams.tutorialHints.length<2||e.gameParams.tutorialHints.length>=6)){e.gameParams.state=GAME_STATES.PAUSED;var a=null;switch(e.gameParams.tutorialHints.length){case 2:default:a=TUTORIAL_MESSAGES.RANDOM_1[cc.sys.localStorage.language];break;case 3:a=TUTORIAL_MESSAGES.RANDOM_2[cc.sys.localStorage.language];break;case 4:a=TUTORIAL_MESSAGES.RANDOM_3[cc.sys.localStorage.language];break;case 5:a=TUTORIAL_MESSAGES.RANDOM_4[cc.sys.localStorage.language]}e.showMessageBox(e,"HINT:",a,"OK",function(){e.gameParams.tutorialHints.push(a),e.gameParams.state=GAME_STATES.STARTED})}},sigmoidalPercent:function(e,a){this.world;void 0===a&&(a=50);var t=1*((e-a)/a),o=1/Math.pow(Math.E,t);return o},evaluateLoss:function(e){var a=this.world,t=e.loss,o=1+a.gameParams.rateOfLoss*(.5+Math.random()),r=1+.1*e.pop_prepared_percent/100;o/=r,a.gameParams.crises.forEach(function(e){var r=CRISES[e.crisis];o*=1+r.effect_on_environmental_loss*Math.pow(t/a.gameParams.totalLoss,.5)});var n=1+(o-1)*a.sigmoidalPercent(t),s=t+(n-1);return s>100&&(s=100),s<0&&(s=0),s},transmitFrom:function(e){var a=this.world,t=e.neighbours,o=e.shared_border_percentage,r=a.scenarioData.threat_details.transmission.transmission_land,n=a.scenarioData.threat_details.transmission.transmission_sea,s=a.scenarioData.threat_details.transmission.transmission_air,c=a.scenarioData.threat_details.advanced_stats.minimum_infectivity_increase,i=e.affected_chance,l=e.pop_est,g=a.gameParams.populationWorld,m=Math.log(l)/Math.log(g),u=e.income_grp,p=parseFloat(u.charAt(0))/6,d=o*r*i*m*p,y=(1-o)*n*i*m*(1-p),h=o*s*i*m*(1-p),f=null;if(Math.random()<d&&t.length>0){var _=Math.floor(Math.random()*t.length),P=a.countries[t[_]];0==P.policy&&(f=P)}else if(Math.random()<y)for(var C=a.shuffleArray(Object.keys(a.countries)),S=Math.random(),v=0;v<C.length;v++){var b=a.countries[C[v]];if(S<1-b.shared_border_percentage&&0==b.policy){f=b;break}}else if(Math.random()<h)for(var E=a.shuffleArray(Object.keys(a.countries)),T=Math.random(),O=0;O<E.length;O++){var B=a.countries[E[O]],N=B.income_grp;if(T<1-parseFloat(N.charAt(0))/6&&0==B.policy){f=B;break}}null!=f&&(f.affected_chance=.1,e.affected_chance<1&&(e.affected_chance*=.1),f.policy=1,f.pop_aware=parseInt(f.pop_est)*c)},infectWithin:function(e){var a=this.world;if(0!=e.affected_chance&&!(e.pop_aware>=parseInt(e.pop_est))){var t=a.scenarioData.threat_details.advanced_stats.infectivity_increase_speed,o=a.scenarioData.threat_details.advanced_stats.minimum_infectivity_increase,r=t;Object.keys(a.gameParams.policies).forEach(function(t){a.gameParams.policies[t];switch(t.id){case 1:r*=Math.log(1+e.income_grp_num);break;case 2:case 3:case 4:r*=Math.log(1.1*(6-e.income_grp_num));break;case 5:case 6:r*=1.1;break;case 7:r*=Math.log(1.1*(6-e.income_grp_num));break;case 8:case 9:r*=Math.log(2+e.income_grp_num);break;case 10:r*=Math.log(.8*(7-e.income_grp_num));break;case 11:case 12:r*=Math.log(1+e.income_grp_num);break;case 13:r*=Math.log(1.1*(6-e.income_grp_num));break;case 14:r*=Math.log(1+e.income_grp_num);break;case 15:r*=Math.log(1.1*(6-e.income_grp_num));break;case 16:r*=Math.log(1+e.income_grp_num)}}),r-1<o&&(r=1+o),e.pop_aware=(1+e.pop_aware)*r,e.pop_aware>e.pop_est&&(e.pop_aware=e.pop_est)}},calculatePolicyBalanceOnPreparedness:function(){var e=this.world,a=Object.values(e.gameParams.policies).reduce(function(e,a){return e+a},0);if(0==a)return 1;var t=a/4,o=0,r=0,n=0,s=0;Object.keys(e.gameParams.policies).forEach(function(a){var t=e.gameParams.policyOptions[a],c=e.gameParams.policies[a];switch(t.domain){case 1:o+=c;break;case 2:r+=c;break;case 3:n+=c;break;case 4:s+=c}});var c=Math.pow(o-t,2)+Math.pow(r-t,2)+Math.pow(n-t,2)+Math.pow(s-t,2);return 1-Math.pow(c/Math.pow(a,2),4)},calculateSinglePolicyImpactOnPreparedness:function(e,a){var t=this.world,o=1,r=parseInt(Object.keys(t.gameParams.policies)[a]),n=t.gameParams.policyOptions[r],s=t.gameParams.policies[r],c=Math.log(s+1.718),i=parseInt(e.pop_est);switch(o*=i<1e7?1+n.effect_on_pop_low*c:i<1e8?1+n.effect_on_pop_medium*c:1+n.effect_on_pop_high*c,e.income_grp_num){case 1:case 2:o*=1+n.effect_on_income_high*c;break;case 3:o*=1+n.effect_on_income_medium_high*c;break;case 4:o*=1+n.effect_on_income_low_medium*c;break;case 5:o*=1+n.effect_on_income_low*c}var l=parseFloat(e.equator_dist);o*=l>-23.5&&l<23.5?1+n.effect_on_geo_tropic*c:l>-40&&l<40?1+n.effect_on_geo_subtropic*c:l>-60&&l<60?1+n.effect_on_geo_temperate*c:1+n.effect_on_geo_polar*c;for(var g=a+1;g<Object.keys(t.gameParams.policies).length;g++){var m=parseInt(Object.keys(t.gameParams.policies)[g]),u=t.gameParams.policies[m],p=Math.log(u+1.718),d=t.gameParams.policyRelations[r][m];void 0!==d&&(o*=1+d*p)}return o},calculatePolicyImpactOnPreparedness:function(e){for(var a=this.world,t=1,o=0;o<Object.keys(a.gameParams.policies).length;o++)t*=a.calculateSinglePolicyImpactOnPreparedness(e,o);return t*(a.sigmoidalPercent(e.pop_prepared_percent,5)+.5)},registerPreparednessWithin:function(e){var a=this.world;if(0!=e.affected_chance){var t=e.pop_est,o=e.pop_prepared,r=a.scenarioData.threat_details.advanced_stats.severity_increase_speed,n=a.scenarioData.threat_details.advanced_stats.minimum_severity_increase,s=1+(a.calculatePolicyBalanceOnPreparedness()*a.calculatePolicyImpactOnPreparedness(e)*r-1)/MONTH_INTERVAL;r<n&&(r=n),0==o?o=1:o*=s,o>t&&(o=t),o>e.pop_est&&(o=e.pop_est),e.pop_prepared=o}},doSim:function(){var e=this.world;if(null!==e.gameParams.startCountry&&e.gameParams.state===GAME_STATES.PREPARED){var a=e.countries[e.gameParams.startCountry];a.policy=1,a.affected_chance=1,e.shuffleArray=function(e){return e.sort(function(){return Math.random()-.5})},e.startGameParams(e),e.refreshDate(e),e.buttons=[];(function a(){if(e.gameParams.state===GAME_STATES.STARTED){if(e.gameParams.counter++,e.gameParams.automateMode){for(var t=function(a){var t=e.gameParams.automateScript.policyEvents[a];if(e.gameParams.counter==t.counter/MONTH_INTERVAL)return fireClickOnTarget(e.btnDevelopPolicy,function(){var a=Object.values(RESOURCES).map(function(e){return e.name}),o=Math.floor((t.policyID-1)/a.length),r=e.designPolicyLayer.getChildByName(a[o]);fireClickOnTarget(r,function(){var a=e.designPolicyLayer.policyButtons[t.policyID-1];fireClickOnTarget(a,function(){fireClickOnTarget(e.designPolicyLayer.investButton,function(){fireClickOnTarget(e.designPolicyLayer.btnExit)})})})}),"break"},o=0;o<e.gameParams.automateScript.policyEvents.length&&"break"!==t(o);o++);for(var r=0;r<e.gameParams.crises.length;r++){var n=e.gameParams.crises[r];if(e.gameParams.counter==n.counter+e.gameParams.automateScript.crisisDuration){var s=e.worldBackground.getChildByName("crisis"+n.id);fireClickOnTarget(s)}}}if(e.gameParams.counter%e.gameParams.timeInterval==0){e.gameParams.currentDate=new Date(e.gameParams.currentDate.valueOf()),e.gameParams.currentDate.setDate(e.gameParams.currentDate.getDate()+30.417);var c=e.gameParams.currentDate.getFullYear(),i=e.gameParams.previousDate.getFullYear();if(c>i){e.gameParams.stats[i]={loss:e.gameParams.totalLoss,prepared:e.gameParams.populationPreparedPercent};var l="",g=!1,m=Object.values(NARRATIVES.n2048).sort(function(e,a){return a.loss-e.loss});switch(c){case 2048:g=!0;for(var u=0;u<m.length;u++){var p=m[u];if(e.gameParams.totalLoss>p.loss){var d=Math.floor(Math.random()*p[cc.sys.localStorage.language].length);l=p[cc.sys.localStorage.language][d];break}}}if(g){e.gameParams.state=GAME_STATES.PAUSED;var y=e.showMessageBox(e,gd.lang.bulletin[cc.sys.localStorage.language]+c,l,"OK",function(){e.gameParams.state=GAME_STATES.STARTED});e.gameParams.automateMode&&e.fireClickOnTarget(y[0])}}e.gameParams.previousDate=e.gameParams.currentDate;var h=0,f=0,_=0,P=0,C=0;Object.keys(e.countries).forEach(function(a){var t=e.countries[a],o=e.evaluateLoss(t);if(o>=.1&&(t.previousLoss=t.loss,t.loss=o),t.affected_chance){e.transmitFrom(t),e.infectWithin(t),e.registerPreparednessWithin(t),_++,P+=t.pop_aware,C+=t.pop_prepared,t.pop_aware_percent=100*t.pop_aware/t.pop_est;var r=t.pop_prepared_percent;t.pop_prepared_percent=100*t.pop_prepared/t.pop_est,r>.5&&parseInt(r),t.pop_prepared_percent>.5&&parseInt(t.pop_prepared_percent)}h+=t.policy,f+=t.loss}),h/=Object.keys(e.countries).length,e.gameParams.policy=h,f/=Object.keys(e.countries).length,e.gameParams.previousLoss=f,e.gameParams.totalLoss=f,e.gameParams.countriedAffected=_,e.gameParams.populationAware=P,e.gameParams.populationPrepared=C,e.gameParams.populationAwarePercent=100*e.gameParams.populationAware/e.gameParams.populationWorld,e.gameParams.populationPreparedPercent=100*e.gameParams.populationPrepared/e.gameParams.populationWorld,null!=e.gameParams.currentCountry?e.printCountryStats():e.printWorldStats()}var S=e.gameParams.crisisInterval;Object.keys(e.gameParams.policies).forEach(function(a){var t=e.gameParams.policyOptions[a],o=e.gameParams.policies[a];S/=1+t.effect_on_crises*Math.log(o+1.718)}),e.gameParams.counter-e.gameParams.lastCrisis>=S&&Math.random()<CRISIS_CHANCE&&e.addCrisis();var v=function(a){return a=(a=1/(a+=1.000001))>1?Math.pow(a,e.gameParams.difficultyMultiplier):Math.pow(a,1/e.gameParams.difficultyMultiplier)},b=e.gameParams.resourceInterval;e.gameParams.crises.forEach(function(a){var t=CRISES[a.crisis].effect_on_resources;e.countries[a.country],b*=v(t)}),Object.keys(e.gameParams.policies).forEach(function(a){var t=e.gameParams.policyOptions[a],o=e.gameParams.policies[a];b*=v(t.effect_on_resources*Math.log(o+1.718))}),e.gameParams.counter-e.gameParams.lastResource>=b&&(e.addResource(),e.gameParams.resourceInterval*=1.1),e.gameParams.tutorialMode&&e.gameParams.counter%e.gameParams.tutorialInterval==0&&e.addTutorial();for(var E=[],T=0;T<e.buttons.length;T++){var O=e.buttons[T];e.gameParams.counter>O.placedAt+RESOURCE_DURATION?O.removeFromParent():E.push(O)}if(e.buttons=E,e.resourceScoreLabel.string=e.gameParams.resources,e.refreshDate(e),e.gameParams.totalLoss>=100){var B=Object.values(NARRATIVES.n2070).sort(function(e,a){return a.loss-e.loss})[0],N=Math.floor(Math.random()*B[cc.sys.localStorage.language].length),M=B[cc.sys.localStorage.language][N];e.gameOver(e,M,"OK")}else if(e.gameParams.currentDate>=e.gameParams.targetDate){for(var A="",R=Object.values(NARRATIVES.n2070).sort(function(e,a){return a.loss-e.loss}),L=0;L<R.length;L++){var w=R[L];if(e.gameParams.totalLoss>w.loss){var D=Math.floor(Math.random()*w[cc.sys.localStorage.language].length);A=w[cc.sys.localStorage.language][D];break}}gameOver(e,A,"OK")}e.gameParams.timeoutID=setTimeout(a,20)}else e.gameParams.timeoutID=setTimeout(a,20)})()}},onLoad:function(){this._time=0;var e=this.world=this;e.messageBox.opacity=0,e.scenarioData=gd.scenarioData,e.automateScripts=gd.automateScripts,e.automateID=-1,"undefined"!=typeof automateID&&(e.automateID=automateID),e.mouse={x:0,y:0},this.initGameParams(e.scenarioData),cc.loader.loadRes("singleColor",cc.SpriteFrame,function(a,t){e.singleColor=t}),cc.loader.loadRes("icons/DOT_ON",cc.SpriteFrame,function(a,t){e.dotOn=t,cc.loader.loadRes("icons/DOT_OFF",cc.SpriteFrame,function(a,t){e.dotOff=t,e.initPolicyDesign(),e.initStats()})}),e.policyIcons=[],Object.keys(res).forEach(function(a){var t=res[a];cc.loader.loadRes(t,cc.SpriteFrame,function(a,t){e.policyIcons.push(t)})}),e.crisisIcons={},Object.keys(CRISES).forEach(function(a){var t=CRISES[a].image;cc.loader.loadRes(t,cc.SpriteFrame,function(t,o){e.crisisIcons[a]=o})});cc.loader.loadRes("scripts/json-equal-greyscale",function(a,t){null==a&&(e.countriesJson=t.json,e.initCountries(),e.spriteCountries={},e.countryNodes={},cc.loader.loadResDir("countries",cc.SpriteFrame,function(a,t,o){for(var r=0;r<t.length;r++){var n=new cc.Node("Sprite "),s=n.addComponent(cc.Sprite);s.spriteFrame=t[r];var c=cc.MaterialVariant.create(e.material);c.setProperty("u_selected",0),c.setProperty("u_percentageLoss",0),c.setProperty("u_percentagePrep",0),s.materials=[c],s.setMaterial(0,c);var i=o[r].match("/([A-Z]*)_")[1];e.countryNodes[i]=n}for(var l=cc.director.getScene(),g=Object.keys(e.countryNodes),m=0;m<g.length;m++){var u=g[m],p=e.countries[u];if(void 0!==p){var d=e.countryNodes[u];d.setAnchorPoint(0,0),d.setPosition(p.offsetX,cc.winSize.height-55-p.offsetY),d.parent=l,d.zIndex=2}}}))}),e.initControls(),cc.director.getScene().getChildByName("foreground").on(cc.Node.EventType.MOUSE_MOVE,function(a){e.selectCountry(a,a.getLocation())});var a=function(){e.gameParams.state=GAME_STATES.PREPARED,e.btnPause.getComponent(cc.Button).interactable=!0,e.btnPlay.getComponent(cc.Button).interactable=!1,e.btnFF.getComponent(cc.Button).interactable=!0,e.doSim()},t=["NZL","AUS","ZAF","ARG","CHL"],o=t[Math.floor(Math.random()*t.length)];e.showMessageBox(e,e.scenarioData[cc.sys.localStorage.language].popup_1_title,e.scenarioData[cc.sys.localStorage.language].popup_1_description,gd.lang.start_tutorial[cc.sys.localStorage.language],function(t){e.gameParams.tutorialMode=!0,e.gameParams.startCountry=o,e.gameParams.statsCountry=o,e.gameParams.currentCountry=o;var r=e.countries[e.gameParams.startCountry].name;e.showMessageBox(e,gd.lang.start_prepare[cc.sys.localStorage.language],gd.lang.start_mission_a[cc.sys.localStorage.language]+r+gd.lang.start_mission_b[cc.sys.localStorage.language],e.scenarioData[cc.sys.localStorage.language].popup_2_title,function(e){a()})},gd.lang.start_tutorial_skip[cc.sys.localStorage.language],function(t){e.gameParams.tutorialMode=!1,e.gameParams.startCountry=o,e.gameParams.statsCountry=o,e.gameParams.currentCountry=o;var r=e.countries[e.gameParams.startCountry].name;e.showMessageBox(e,gd.lang.start_prepare[cc.sys.localStorage.language],gd.lang.start_mission_a[cc.sys.localStorage.language]+r+gd.lang.start_mission_b[cc.sys.localStorage.language],e.scenarioData[cc.sys.localStorage.language].popup_2_title,function(e){a()})})},start:function(){},update:function(e){var a=this.world;this._time+=e,void 0!==a.countryNodes&&Object.keys(a.countryNodes).forEach(function(e){var t=a.countryNodes[e],o=a.countries[e];if(void 0!==o){var r=t.getComponent(cc.Sprite).materials[0];r.setProperty("u_selected",o.selected?1:0),r.setProperty("u_percentageLoss",o.loss),r.setProperty("u_percentagePrep",o.pop_prepared_percent/100)}})}}),cc._RF.pop()},{}],PlayGame:[function(e,a,t){"use strict";cc._RF.push(a,"b0bd514jFpPtqlkebr5Q6hp","PlayGame");var o=this&&this.__extends||function(){var e=function(a,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)a.hasOwnProperty(t)&&(e[t]=a[t])})(a,t)};return function(a,t){function o(){this.constructor=a}e(a,t),a.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,a,t,o){var r,n=arguments.length,s=n<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,a,t,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(n<3?r(s):n>3?r(a,t,s):r(a,t))||s);return n>3&&s&&Object.defineProperty(a,t,s),s};Object.defineProperty(t,"__esModule",{value:!0});var n=cc._decorator,s=n.ccclass,c=(n.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return o(a,e),a.prototype.onLoad=function(){this.node.on("mouseup",function(e){this.interactable&&cc.director.loadScene("WorldScene")},this)},a.prototype.start=function(){},a=r([s],a)}(cc.Component));t.default=c,cc._RF.pop()},{}],SelectConsent:[function(e,a,t){"use strict";cc._RF.push(a,"ee485aC70hKQoQzbDeMsmD2","SelectConsent");var o=this&&this.__extends||function(){var e=function(a,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)a.hasOwnProperty(t)&&(e[t]=a[t])})(a,t)};return function(a,t){function o(){this.constructor=a}e(a,t),a.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,a,t,o){var r,n=arguments.length,s=n<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,a,t,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(n<3?r(s):n>3?r(a,t,s):r(a,t))||s);return n>3&&s&&Object.defineProperty(a,t,s),s};Object.defineProperty(t,"__esModule",{value:!0});var n=cc._decorator,s=n.ccclass,c=n.property,i=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.play=null,a.consent=null,a}return o(a,e),a.prototype.onLoad=function(){},a.prototype.togglePlay=function(e){cc.sys.localStorage.consent=e.isChecked,this.play.interactable=e.isChecked},a.prototype.playGame=function(e){this.play.interactable&&cc.director.loadScene("WorldScene")},a.prototype.start=function(){},r([c(cc.Button)],a.prototype,"play",void 0),r([c(cc.Toggle)],a.prototype,"consent",void 0),a=r([s],a)}(cc.Component);t.default=i,cc._RF.pop()},{}],SelectDifficulty:[function(e,a,t){"use strict";cc._RF.push(a,"cedefktLpdJpZ5X0rs4xwzP","SelectDifficulty");var o=this&&this.__extends||function(){var e=function(a,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)a.hasOwnProperty(t)&&(e[t]=a[t])})(a,t)};return function(a,t){function o(){this.constructor=a}e(a,t),a.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,a,t,o){var r,n=arguments.length,s=n<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,a,t,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(n<3?r(s):n>3?r(a,t,s):r(a,t))||s);return n>3&&s&&Object.defineProperty(a,t,s),s};Object.defineProperty(t,"__esModule",{value:!0});var n=cc._decorator,s=n.ccclass,c=n.property,i=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.label=null,a.text="hello",a}return o(a,e),a.prototype.start=function(){this.node.on("mouseup",function(e){"chbEasy"===this.name?cc.sys.localStorage.level="Easy":"chbMedium"===this.name?cc.sys.localStorage.level="Medium":cc.sys.localStorage.level="Hard"},this)},r([c(cc.Label)],a.prototype,"label",void 0),r([c],a.prototype,"text",void 0),a=r([s],a)}(cc.Component);t.default=i,cc._RF.pop()},{}],SelectLanguage:[function(e,a,t){"use strict";cc._RF.push(a,"c7fb7xn9bJHg63X4zTEA/cA","SelectLanguage");var o=this&&this.__extends||function(){var e=function(a,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)a.hasOwnProperty(t)&&(e[t]=a[t])})(a,t)};return function(a,t){function o(){this.constructor=a}e(a,t),a.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,a,t,o){var r,n=arguments.length,s=n<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,a,t,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(n<3?r(s):n>3?r(a,t,s):r(a,t))||s);return n>3&&s&&Object.defineProperty(a,t,s),s};Object.defineProperty(t,"__esModule",{value:!0});var n=cc._decorator,s=n.ccclass,c=n.property,i=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.label=null,a.text="hello",a}return o(a,e),a.prototype.onLoad=function(){this.node.on("mouseup",function(e){"chbEnglish"===this.name?cc.sys.localStorage.language="eng":cc.sys.localStorage.language="esp"},this)},a.prototype.start=function(){},r([c(cc.Label)],a.prototype,"label",void 0),r([c],a.prototype,"text",void 0),a=r([s],a)}(cc.Component);t.default=i,cc._RF.pop()},{}],StartGame:[function(e,a,t){"use strict";cc._RF.push(a,"ed7884Okn1M7qmcjCUuwTbH","StartGame"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){void 0===cc.sys.localStorage.language&&(cc.sys.localStorage.language="eng"),void 0===cc.sys.localStorage.level&&(cc.sys.localStorage.level="Easy"),void 0===cc.sys.localStorage.greyscale&&(cc.sys.localStorage.greyscale=!0),this.node.on("mouseup",function(e){cc.director.loadScene("LoadingScene")})},start:function(){}}),cc._RF.pop()},{}]},{},["PlayGame","SelectConsent","SelectDifficulty","SelectLanguage","StartGame","ChangeTweet","LoadMap"]);