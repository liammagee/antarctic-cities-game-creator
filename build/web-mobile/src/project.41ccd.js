window.__require=function e(t,o,a){function i(s,r){if(!o[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(n)return n(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var d=o[s]={exports:{}};t[s][0].call(d.exports,function(e){return i(t[s][1][e]||e)},d,d.exports,e,t,o,a)}return o[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<a.length;s++)i(a[s]);return i}({ChangeTweet:[function(e,t,o){"use strict";cc._RF.push(t,"13336WWeLpLWpKn6MnNRBYz","ChangeTweet");var a=this&&this.__decorate||function(e,t,o,a){var i,n=arguments.length,s=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,a);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(s=(n<3?i(s):n>3?i(t,o,s):i(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:i,property:n}=cc._decorator;let s=class extends cc.Component{constructor(){super(...arguments),this.label=null,this.text="hello"}start(){}tweetRendered(){let e=cc.director.getScene().getChildByName("Canvas").getChildByName("layout").getComponent("GameController"),t=e.world,o=e.node.getChildByName("topBar").getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet"),a=t.gameState,i=a.scenarioName,n=-1;if(null!=a.messageOverride)i=a.messageOverride,o.color=t.colours.COLOR_RED,a.messageOverride=null;else if(a.totalLoss>0||a.populationPreparedPercent>0){const t=a.totalLoss/(a.totalLoss+a.populationPreparedPercent);Math.random()<t?(n=Math.floor(Math.random()*a.messagesNegative.length),i=a.messagesNegative[n]):(n=Math.floor(Math.random()*a.messagesPositive.length),i=a.messagesPositive[n]),o.color=e.colors.COLOR_ICE}o.getComponent(cc.Label).string=i}};a([n(cc.Label)],s.prototype,"label",void 0),a([n],s.prototype,"text",void 0),s=a([i],s),o.default=s,cc._RF.pop()},{}],Colors:[function(e,t,o){"use strict";cc._RF.push(t,"1d538DdehxKN5PvRmaJKaiq","Colors"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){return function(){this.COLOR_LICORICE=new cc.Color(42,54,68),this.COLOR_ZINC=new cc.Color(123,133,143),this.COLOR_ICE=new cc.Color(214,225,227),this.COLOR_OAK=new cc.Color(243,226,206),this.COLOR_UMBER=new cc.Color(154,136,124),this.COLOR_BLACK=new cc.Color(0,0,0),this.COLOR_WHITE=new cc.Color(255,255,255),this.COLOR_BACKGROUND=this.COLOR_BLACK,this.COLOR_FOREGROUND=this.COLOR_ICE,this.COLOR_HIGHLIGHT=this.COLOR_OAK,this.COLOR_RESOURCE=new cc.Color(108,180,244),this.COLOR_GREEN=new cc.Color(153,204,102),this.COLOR_RED=new cc.Color(151,51,51),this.COLOR_SKY=new cc.Color(204,204,255),this.COLOR_BACKGROUND_TRANS=new cc.Color(42,54,68)}}();o.Colors=a,cc._RF.pop()},{}],Consent:[function(e,t,o){"use strict";cc._RF.push(t,"88dd3qzPgBGFqbZtHCNnhKL","Consent");var a=this&&this.__decorate||function(e,t,o,a){var i,n=arguments.length,s=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,a);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(s=(n<3?i(s):n>3?i(t,o,s):i(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:i,property:n}=cc._decorator,s=e("../WorldScene/Resources");let r=class extends cc.Component{constructor(){super(...arguments),this.play=null,this.consent=null,this.lblConsent=null,this.res=new s.Resources}onLoad(){}start(){void 0===cc.sys.localStorage.language&&(cc.sys.localStorage.language="eng");let e=this.node.getChildByName("layout"),t=e.getChildByName("lblWelcome").getComponent(cc.Label),o=e.getChildByName("lblAbout").getComponent(cc.Label),a=e.getChildByName("consentHolder").getChildByName("chbAgree").getComponent(cc.Toggle),i=a.node.getChildByName("Background").getChildByName("lblAgree").getComponent(cc.Label),n=e.getChildByName("btnPlayGame").getChildByName("Background").getChildByName("Label").getComponent(cc.Label),s=e.getChildByName("btnLearnMore").getChildByName("Background").getChildByName("Label").getComponent(cc.Label);t.string=this.res.lang.welcome[cc.sys.localStorage.language],o.string=this.res.lang.about_game[cc.sys.localStorage.language],i.string=this.res.lang.consent[cc.sys.localStorage.language],n.string=this.res.lang.commands_play[cc.sys.localStorage.language],s.string=this.res.lang.commands_learn_more[cc.sys.localStorage.language];let r="true"===cc.sys.localStorage.consent;a.isChecked=r,this.play.interactable=r,i.node.on(cc.Node.EventType.TOUCH_END,e=>{a.node.emit(cc.Node.EventType.TOUCH_END,e)},this)}togglePlay(e){cc.sys.localStorage.consent=e.isChecked,this.play.interactable=e.isChecked}playGame(e){this.play.interactable&&cc.director.loadScene("WorldScene")}learnMore(){cc.sys.openURL("https://antarctic-cities.org/the-game/")}};a([n(cc.Button)],r.prototype,"play",void 0),a([n(cc.Toggle)],r.prototype,"consent",void 0),a([n(cc.Label)],r.prototype,"lblConsent",void 0),r=a([i],r),o.default=r,cc._RF.pop()},{"../WorldScene/Resources":"Resources"}],GameController:[function(e,t,o){"use strict";cc._RF.push(t,"c1ea0UUQNBK3p3x+MH5+jRU","GameController");var a=this&&this.__decorate||function(e,t,o,a){var i,n=arguments.length,s=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,a);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(s=(n<3?i(s):n>3?i(t,o,s):i(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:i,property:n}=cc._decorator,s=e("./Resources"),r=e("./World"),c=e("./Colors");class l extends cc.Node{constructor(){super(...arguments),this.placedAt=0,this.id=0}}let d=class extends cc.Component{constructor(){super(...arguments),this.audio=null,this.defaultMaterial=null,this.countryMaterial=null,this.materialA=null,this.materialB=null,this.messageBox=null,this.topBar=null,this.singleColor=null,this.titleFont=null,this.bodyFont=null,this.backgroundGreyscale=null,this.backgroundColour=null,this.controller=null,this.world=null,this._time=0,this.colors=new c.Colors,this.res=new s.Resources,this.countries=[],this.automateID=0,this.automateScripts=[],this.btnQuit=null,this.btnSettings=null,this.btnSound=null,this.btnSnapshot=null,this.btnPause=null,this.btnPlay=null,this.btnFF=null,this.tweetLabel=null,this.bottomBar=null,this.countryLabel=null,this.countryLoss=null,this.countryLossProgress=null,this.countryAwarePrepared=null,this.countryPreparedProgress=null,this.resourceScoreLabel=null,this.quizBox=null,this.settingsBox=null,this.dotOff=null,this.dotOn=null,this.lastLayerID=-1,this.buttons=[],this.policyIcons=[],this.crisisIcons=new Map,this.countryNodes=new Map,this.currentAudioId=-1}collisionDetection(e,t){let o=!1,a=Math.max(...e.map(e=>e.x));for(let i=0;i<e.length;i++){let n=e[i],s=i==e.length-1?e[0]:e[i+1],r=parseFloat(n.x)+.001,c=parseFloat(n.y)-.001,l=parseFloat(s.x)+.001,d=parseFloat(s.y)-.001;(c<t.y&&d>=t.y||c>t.y&&d<=t.y)&&(r+l)/2<t.x&&t.x<a&&(o=!o)}return o}showMessageBox(e,t,o,a,i,n,s){let r=this.controller;r.world.gameState.modal=!0,r.world.gameState.state=r.world.res.GAME_STATES.PAUSED,r.topBar.getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet").getComponent(cc.Animation).pause(),r.messageBox.zIndex=104,r.messageBox.opacity=255;let c=r.messageBox.getChildByName("messageBoxTitle").getComponent(cc.Label),l=r.messageBox.getChildByName("messageBoxContents").getComponent(cc.Label),d=r.messageBox.getChildByName("btn1").getComponent(cc.Button),p=r.messageBox.getChildByName("btn2").getComponent(cc.Button);l=r.messageBox.getChildByName("messageBoxContents").getComponent(cc.Label),c.string=t,l.string=o,d.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=a,p.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=n;let g=[];g.push(d),null===o||void 0===o||""===o?void 0!==n?(d.node.x=-.25*r.messageBox.width,p.node.x=.25*r.messageBox.width,p.node.opacity=255,p.interactable=!0,p.enabled=!0,g.push(p)):(d.node.x=0*r.messageBox.width,p.node.opacity=0,p.interactable=!1,p.enabled=!1):void 0!==n?(d.node.x=-.2*r.messageBox.width,p.node.x=.2*r.messageBox.width,p.node.opacity=255,p.interactable=!0,p.enabled=!0,g.push(p)):(d.node.x=0*r.messageBox.width,p.node.opacity=0,p.interactable=!1,p.enabled=!1);let u=e=>{r.messageBox.opacity=0,r.messageBox.zIndex=-1,d.node.off(cc.Node.EventType.TOUCH_END,u,d),p.node.off(cc.Node.EventType.TOUCH_END,_,p),r.world.gameState.modal=!1,i(),r.topBar.getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet").getComponent(cc.Animation).resume(),e.stopPropagation()};d.node.on(cc.Node.EventType.TOUCH_END,u,d);let _=e=>{r.messageBox.opacity=0,r.messageBox.zIndex=-1,d.node.off(cc.Node.EventType.TOUCH_END,u,d),p.node.off(cc.Node.EventType.TOUCH_END,_,p),r.world.gameState.modal=!1,s(),r.topBar.getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet").getComponent(cc.Animation).resume(),e.stopPropagation()};return p.interactable?p.node.on(cc.Node.EventType.TOUCH_END,_,p):p.node.off(cc.Node.EventType.TOUCH_END,_,p),g.push(d),void 0!==p&&g.push(p),g}showGameOverBox(e,t,o,a,i,n,s){let r=this.controller;r.world.gameState.modal=!0,r.world.gameState.state=r.world.res.GAME_STATES.PAUSED;let c=r.node.parent.getChildByName("layerGameOver");c.zIndex=104,c.opacity=255;let l=c.getChildByName("messageBoxTitle").getComponent(cc.Label),d=c.getChildByName("messageBoxContents").getComponent(cc.Label),p=c.getChildByName("btn1").getComponent(cc.Button),g=c.getChildByName("btn2").getComponent(cc.Button);d=c.getChildByName("messageBoxContents").getComponent(cc.Label),l.string=t,d.string=o,p.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=a,g.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=n;let u=[];u.push(p),null===o||void 0===o||""===o?void 0!==n?(p.node.x=-.25*c.width,g.node.x=.25*c.width,g.node.opacity=255,g.interactable=!0,g.enabled=!0,u.push(g)):(p.node.x=0*c.width,g.node.opacity=0,g.interactable=!1,g.enabled=!1):void 0!==n?(p.node.x=-.2*c.width,g.node.x=.2*c.width,g.node.opacity=255,g.interactable=!0,g.enabled=!0,u.push(g)):(p.node.x=0*c.width,g.node.opacity=0,g.interactable=!1,g.enabled=!1);let _=e=>{c.opacity=0,c.zIndex=-1,p.node.off(cc.Node.EventType.TOUCH_END,_,p),g.node.off(cc.Node.EventType.TOUCH_END,m,g),r.world.gameState.modal=!1,i(),e.stopPropagation()};p.node.on(cc.Node.EventType.TOUCH_END,_,p);let m=e=>{c.opacity=0,c.zIndex=-1,p.node.off(cc.Node.EventType.TOUCH_END,_,p),g.node.off(cc.Node.EventType.TOUCH_END,m,g),r.world.gameState.modal=!1,s(),e.stopPropagation()};return g.interactable?g.node.on(cc.Node.EventType.TOUCH_END,m,g):g.node.off(cc.Node.EventType.TOUCH_END,m,g),u.push(p),void 0!==g&&u.push(g),u}showQuizBox(e,t,o,a,i){let n=this.controller;n.world.gameState.modal=!0,n.topBar.getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet").getComponent(cc.Animation).pause(),n.world.gameState.state=n.world.res.GAME_STATES.PAUSED,n.quizBox.zIndex=104,cc.tween(n.quizBox).to(.5,{position:cc.v2(0,0)},{easing:"backOut"}).start(),n.quizBox.getChildByName("quizTitle").getComponent(cc.Label).string=t,n.quizBox.getChildByName("quizContents").getComponent(cc.RichText).string=o;let s=n.quizBox.getChildByName("btn1"),r=n.quizBox.getChildByName("btn2");if(Math.random()>.5){let e=r;r=s,s=e}s.getChildByName("Background").getChildByName("optContents").getComponent(cc.RichText).string=i,r.getChildByName("Background").getChildByName("optContents").getComponent(cc.RichText).string=a;s.getChildByName("button").on(cc.Node.EventType.TOUCH_END,t=>{cc.tween(n.quizBox).to(.5,{position:cc.v2(0,-750)},{easing:"backIn"}).start(),n.world.gameState.modal=!1,n.topBar.getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet").getComponent(cc.Animation).resume(),t.stopPropagation(),n.showMessageBox(e,"CRISIS RESPONSE","Great response to this crisis!","OK!",function(){const e=Math.floor(1+3*Math.random());n.world.gameState.resources+=e,n.world.gameState.state=n.world.res.GAME_STATES.STARTED},void 0,void 0)},s);r.getChildByName("button").on(cc.Node.EventType.TOUCH_END,t=>{cc.tween(n.quizBox).to(.5,{position:cc.v2(0,-750)},{easing:"backIn"}).start(),n.world.gameState.modal=!1,n.topBar.getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet").getComponent(cc.Animation).resume(),t.stopPropagation(),n.showMessageBox(e,"CRISIS RESPONSE","Good try, but this won't be enough to preserve the future of Antarctica!","OK!",function(){const e=Math.floor(1+3*Math.random());n.world.gameState.resources-e>0?n.world.gameState.resources-=e:n.world.gameState.resources=0,n.world.gameState.state=n.world.res.GAME_STATES.STARTED},void 0,void 0)},r)}showSettingsBox(){let e=this.controller,t=this.world;t.gameState.modal=!0;let o=t.gameState.state;t.gameState.state=t.res.GAME_STATES.PAUSED,e.settingsBox.zIndex=106,cc.tween(e.settingsBox).by(.5,{position:cc.v2(0,-750)},{easing:"backOut"}).start();let a=e.settingsBox.getChildByName("pageview").getChildByName("view").getChildByName("content"),i=a.getChildByName("page_1"),n=(a.getChildByName("page_2"),e.settingsBox.getChildByName("apply")),s=e.settingsBox.getChildByName("cancel"),r="true"==cc.sys.localStorage.greyscale;i.getChildByName("toggleContainer").getChildByName("toggle1").getComponent(cc.Toggle).isChecked=r,i.getChildByName("toggleContainer").getChildByName("toggle2").getComponent(cc.Toggle).isChecked=!r;let c="eng"==cc.sys.localStorage.language;i.getChildByName("toggleLanguage").getChildByName("toggle1").getComponent(cc.Toggle).isChecked=c,i.getChildByName("toggleLanguage").getChildByName("toggle2").getComponent(cc.Toggle).isChecked=!c;let l=void 0===cc.sys.localStorage.countryMask||"default"===cc.sys.localStorage.countryMask;i.getChildByName("toggleCountryMask").getChildByName("toggle1").getComponent(cc.Toggle).isChecked=l,i.getChildByName("toggleCountryMask").getChildByName("toggle2").getComponent(cc.Toggle).isChecked=!l;let d=function(a){let n=i.getChildByName("toggleContainer").getChildByName("toggle1").getComponent(cc.Toggle).isChecked;cc.sys.localStorage.greyscale=n,t.gameState.greyscale=n,n?(e.backgroundGreyscale.opacity=255,e.backgroundColour.opacity=0,e.node.color=new cc.Color(234,245,247)):(e.backgroundGreyscale.opacity=0,e.backgroundColour.opacity=255,e.node.color=e.colors.COLOR_LICORICE);let s=i.getChildByName("toggleLanguage").getChildByName("toggle1").getComponent(cc.Toggle).isChecked;cc.sys.localStorage.language=s?"eng":"esp",e.updateLanguageSettings();let r=i.getChildByName("toggleCountryMask").getChildByName("toggle1").getComponent(cc.Toggle).isChecked;cc.sys.localStorage.countryMask=r?"default":"experimental",e.updateCountryMask(),t.gameState.modal=!1,t.gameState.state=o,cc.tween(e.settingsBox).by(.5,{position:cc.v2(0,750)},{easing:"backIn"}).start()};n.on(cc.Node.EventType.TOUCH_END,d,n);let p=function(a){n.off(cc.Node.EventType.TOUCH_END,d,n),s.off(cc.Node.EventType.TOUCH_END,p,s),a.stopPropagation(),t.gameState.modal=!1,t.gameState.state=o,cc.tween(e.settingsBox).by(.5,{position:cc.v2(0,750)},{easing:"backIn"}).start()};s.on(cc.Node.EventType.TOUCH_END,p,s)}updateLanguageSettings(){let e=this.controller,t=this.world,o=cc.director.getScene().getChildByName("Canvas").getChildByName("layout").getChildByName("bottomBar");o.getChildByName("btnDesignPolicy").getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=t.res.lang.commands_policy[cc.sys.localStorage.language],o.getChildByName("lblLossLabel").getComponent(cc.Label).string=t.res.lang.commands_loss[cc.sys.localStorage.language],o.getChildByName("lblPreparednessLabel").getComponent(cc.Label).string=t.res.lang.commands_prepared[cc.sys.localStorage.language],o.getChildByName("btnStats").getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=t.res.lang.commands_stats[cc.sys.localStorage.language],t.gameState.messagesNegative=t.res.scenarioData[cc.sys.localStorage.language].messages.negative,t.gameState.messagesPositive=t.res.scenarioData[cc.sys.localStorage.language].messages.positive,t.gameState.messageOverride=null,e.initPolicyDesign()}updateCountryMask(){let e=this.controller;this.world,cc.director.getScene().getChildByName("Canvas").getChildByName("layout");"default"==cc.sys.localStorage.countryMask?e.countryMaterial=e.materialB:e.countryMaterial=e.materialA,e.loadCountrySprites()}loadCountrySprites(){let e=this,t=e.world,o=e.node.getChildByName("mapBack");Object.values(e.countryNodes).forEach(e=>{e.removeFromParent()}),cc.loader.loadResDir("countries",cc.SpriteFrame,function(a,i,n){for(var s=0;s<i.length;s++){const a=new cc.Node("Sprite "),r=a.addComponent(cc.Sprite);r.spriteFrame=i[s];let c=cc.MaterialVariant.create(e.countryMaterial,r);c.setProperty("u_selected",0),c.setProperty("u_percentageLoss",0),c.setProperty("u_percentagePrep",0),r.setMaterial(0,c);let l=n[s].match("/([A-Z]*)_")[1];e.countryNodes[l]=a;let d=t.countries[l];void 0!==d&&(a.setAnchorPoint(0,0),a.setPosition(d.offsetX-o.x,cc.winSize.height-1*t.res.Y_OFFSET-d.offsetY-o.y),a.parent=o,a.zIndex=202)}})}postResultsToServer(){let e=this.world;const t=cc.loader.getXMLHttpRequest();t.open("POST","/game_data"),t.setRequestHeader("Content-Type","application/json;charset=UTF-8");let o=Object.assign({},e.gameState,{policyOptions:void 0,policyRelations:void 0,messagesNegative:void 0,messagesPositive:void 0,timeoutID:void 0,tutorialHints:void 0,tutorialInterval:void 0,automateScript:void 0,countries:[]}),a=[];Object.values(e.countries).forEach(e=>{let t=Object.assign({},e,{points:void 0,points_shared:void 0,points_total:void 0,selected:void 0,shared_border_percentage:void 0,subregion:void 0,destructionPoints:void 0,destructionDots:void 0,policyPoints:void 0,policyDots:void 0,offsetX:void 0,offsetY:void 0,neighbours:void 0,income_grp:void 0,income_grp_num:void 0,iso_a2:void 0,gdp:void 0,extremes:void 0,equator_dist:void 0,centroid:void 0,area:void 0,density:void 0,economy:void 0,places:void 0});a.push(t)}),o.countries=a,t.send(JSON.stringify(o))}gameOver(e,t,o){let a=this.controller,i=this.world;a.postResultsToServer(),window.clearTimeout(i.gameState.timeoutID),i.gameState.state=i.res.GAME_STATES.PAUSED,a.showGameOverBox(e,"Game Over",t,o,function(){i.initGameState(cc.sys.localStorage.level,cc.sys.localStorage.language,cc.sys.localStorage.greyscale,cc.sys.isMobile,cc.winSize.width,cc.winSize.height),i.gameState.state=i.res.GAME_STATES.GAME_OVER,i.gameState.startCountry=null,i.gameState.policies=new Map,a.tweetLabel.string=i.gameState.scenarioName,cc.director.loadScene("OptionsScene")},void 0,void 0)}handleMouseTouchEvent(e,t){cc.sys.isMobile&&e.on(cc.Node.EventType.TOUCH_START,function(t){e.TOUCHED=!0,t.stopPropagation()}.bind(e)),e.on(cc.Node.EventType.TOUCH_END,function(o){cc.sys.isMobile&&!e.TOUCHED||(t(e),o.stopPropagation(),e.TOUCHED=!1)}.bind(e))}initControls(){let e=this.controller,t=this.world;e.btnQuit=e.topBar.getChildByName("btnQuit"),e.btnSettings=e.topBar.getChildByName("btnSettings"),e.btnSound=e.topBar.getChildByName("btnSound"),e.btnSnapshot=e.topBar.getChildByName("btnSnapshot"),e.btnPause=e.topBar.getChildByName("btnPause"),e.btnPlay=e.topBar.getChildByName("btnPlay"),e.btnFF=e.topBar.getChildByName("btnFF"),e.tweetLabel=e.topBar.getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet").getComponent(cc.Label),e.bottomBar=cc.director.getScene().getChildByName("Canvas").getChildByName("layout").getChildByName("bottomBar"),e.countryLabel=e.bottomBar.getChildByName("lblCountry").getComponent(cc.Label),e.countryLoss=e.bottomBar.getChildByName("lblLossPercent").getComponent(cc.Label),e.countryLossProgress=e.bottomBar.getChildByName("progressBarLoss").getComponent(cc.ProgressBar),e.countryAwarePrepared=e.bottomBar.getChildByName("lblPreparednessPercent").getComponent(cc.Label),e.countryPreparedProgress=e.bottomBar.getChildByName("progressBarPreparedness").getComponent(cc.ProgressBar),e.resourceScoreLabel=cc.director.getScene().getChildByName("Canvas").getChildByName("resourceScoreBackground").getChildByName("lblResourceScore").getComponent(cc.Label),e.quizBox=cc.director.getScene().getChildByName("Canvas").getChildByName("layerQuizBox"),e.settingsBox=cc.director.getScene().getChildByName("Canvas").getChildByName("layerSettings"),e.handleMouseTouchEvent(e.topBar.getChildByName("btnQuit"),function(){t.gameState.modal=!0,t.gameState.state=t.res.GAME_STATES.PAUSED,e.showMessageBox(e.node.parent,"Quit Game","","Quit Game",()=>{e.postResultsToServer(),t.gameState.state=t.res.GAME_STATES.GAME_OVER,cc.director.loadScene("OptionsScene")},"Return to Game",()=>{t.gameState.modal=!1,t.gameState.state=t.res.GAME_STATES.STARTED})}),e.topBar.getChildByName("btnSettings").on(cc.Node.EventType.TOUCH_END,function(){e.showSettingsBox()},this),e.handleMouseTouchEvent(e.topBar.getChildByName("btnSound"),function(){e.topBar.getChildByName("btnSound").getComponent(cc.Button).interactable=!("true"==cc.sys.localStorage.isPlaying),"true"==cc.sys.localStorage.isPlaying?(cc.sys.localStorage.isPlaying=!1,cc.audioEngine.pauseAll()):(cc.sys.localStorage.isPlaying=!0,cc.audioEngine.resumeAll(),e.topBar.getChildByName("btnSound").getComponent(cc.Button).interactable=!0)}),e.topBar.getChildByName("btnSnapshot").on(cc.Node.EventType.TOUCH_END,function(){t.gameState.state=t.res.GAME_STATES.PAUSED,e.snapshot(),t.gameState.state=t.res.GAME_STATES.STARTED},this),e.handleMouseTouchEvent(e.topBar.getChildByName("btnPause"),function(){t.gameState.state!==t.res.GAME_STATES.PAUSED&&(t.gameState.state=t.res.GAME_STATES.PAUSED,e.btnPause.getComponent(cc.Button).interactable=!1,e.btnPlay.getComponent(cc.Button).interactable=!0,e.btnFF.getComponent(cc.Button).interactable=!0,e.topBar.getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet").getComponent(cc.Animation).pause())}),e.handleMouseTouchEvent(e.topBar.getChildByName("btnPlay"),function(){t.updateTimeVariables(t.res.MONTH_INTERVAL),t.gameState.state=t.res.GAME_STATES.STARTED,e.btnPause.getComponent(cc.Button).interactable=!0,e.btnPlay.getComponent(cc.Button).interactable=!1,e.btnFF.getComponent(cc.Button).interactable=!0,e.topBar.getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet").getComponent(cc.Animation).resume()}),e.handleMouseTouchEvent(e.topBar.getChildByName("btnFF"),function(){t.updateTimeVariables(t.res.MONTH_INTERVAL_FF),t.gameState.state=t.res.GAME_STATES.STARTED,e.btnPause.getComponent(cc.Button).interactable=!0,e.btnPlay.getComponent(cc.Button).interactable=!0,e.btnFF.getComponent(cc.Button).interactable=!1,e.topBar.getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet").getComponent(cc.Animation).resume()});let o=e.node.getChildByName("bottomBar").getChildByName("btnDesignPolicy"),a=e.node.getChildByName("bottomBar").getChildByName("btnStats"),i=cc.director.getScene().getChildByName("Canvas").getChildByName("layerDesignPolicy"),n=cc.director.getScene().getChildByName("Canvas").getChildByName("resourceScoreBackground"),s=cc.director.getScene().getChildByName("Canvas").getChildByName("layerStats");s.zIndex=105;let r=t.gameState.state;o.on(cc.Node.EventType.TOUCH_END,()=>{t.gameState.state!==t.res.GAME_STATES.STARTED&&t.gameState.state!==t.res.GAME_STATES.PAUSED&&t.gameState.state!==t.res.GAME_STATES.PAUSED_TUTORIAL||(r=t.gameState.state,e.showPolicyDesign())});let c=i.getChildByName("btnDesignPolicyQuit");c.on(cc.Node.EventType.TOUCH_END,()=>{t.gameState.modal=!1,t.gameState.state=r,cc.tween(i).by(.5,{position:cc.v2(-1334,0)},{easing:"backIn"}).start(),n.zIndex=101},c),a.on(cc.Node.EventType.TOUCH_END,()=>{t.gameState.state!==t.res.GAME_STATES.STARTED&&t.gameState.state!==t.res.GAME_STATES.PAUSED&&t.gameState.state!==t.res.GAME_STATES.PAUSED_TUTORIAL||(r=t.gameState.state,e.showStatsBox())},a);let l=s.getChildByName("btnStatsQuit");l.on(cc.Node.EventType.TOUCH_END,()=>{t.gameState.modal=!1,t.gameState.state=r,cc.tween(s).by(.5,{position:cc.v2(1334,0)},{easing:"backIn"}).start()},l),e.tweetLabel.string=t.gameState.scenarioName}initPolicyDesign(){let e=this.controller,t=this.world,o=cc.director.getScene().getChildByName("Canvas").getChildByName("layerDesignPolicy"),a=o.getChildByName("pageview").getComponent(cc.PageView),i=cc.director.getScene().getChildByName("Canvas").getChildByName("resourceScoreBackground").getChildByName("lblResourceScore").getComponent(cc.Label),n=o.getChildByName("btnEconomy"),s=o.getChildByName("btnPolitics"),r=o.getChildByName("btnCulture"),c=o.getChildByName("btnEcology"),l=o.getChildByName("policyLabel"),d=o.getChildByName("policyDescription"),p=o.getChildByName("policyCostLabel"),g=o.getChildByName("btnPolicyInvest");a.setCurrentPageIndex(0),n.getComponent(cc.Button).interactable=!1,n.getChildByName("Label").color=e.colors.COLOR_UMBER;let u=[n,s,r,c],_=n;let m=null;const h=(o,i)=>{a.setCurrentPageIndex(i),o.getComponent(cc.Button).interactable=!1,o.getChildByName("Label").color=e.colors.COLOR_UMBER,null!=_&&_!=o&&(_.getComponent(cc.Button).interactable=!0,_.getChildByName("Label").color=e.colors.COLOR_ICE),_=o,l.opacity=0;const n=t.res.lang.policy_platform_hint[cc.sys.localStorage.language];d.getComponent(cc.Label).string=n,p.opacity=0,g.opacity=0},f=function(t,a,i){let n=u[i];return n.getChildByName("Label").getComponent(cc.Label).string=t,n.on(cc.Node.EventType.TOUCH_END,function(e){h(n,i)},o),0==i&&(n.getComponent(cc.Button).interactable=!1,n.getChildByName("Label").color=e.colors.COLOR_UMBER,_=n),n};g.on(cc.Node.EventType.TOUCH_END,()=>{let o=g.policy;const n=t.costCalculation(o);let s=parseInt(o.id)-1,r=Math.floor(s/4),c=s%4,l=a.node.getChildByName("view").getChildByName("content").children[r].getChildByName(`opt_${r}_${c}`);if(t.gameState.resources-n>=0&&void 0===t.gameState.policies[o.id]){t.gameState.resources-=n,t.gameState.policies[o.id]=1,i.string=t.gameState.resources.toString(),l.getChildByName(`btnLvl1_${r}_${c}`).color=e.colors.COLOR_UMBER}else if(t.gameState.resources-n>=0&&1===t.gameState.policies[o.id]){t.gameState.resources-=n,t.gameState.policies[o.id]=2,i.string=t.gameState.resources.toString(),l.getChildByName(`btnLvl2_${r}_${c}`).color=e.colors.COLOR_UMBER}else if(t.gameState.resources-n>=0&&2==t.gameState.policies[o.id]){t.gameState.resources-=n,t.gameState.policies[o.id]=3,i.string=t.gameState.resources.toString(),l.getChildByName(`btnLvl3_${r}_${c}`).color=e.colors.COLOR_UMBER}let d=t.costCalculation(o);p.getComponent(cc.Label).string=t.res.lang.policy_platform_cost[cc.sys.localStorage.language]+d.toString(),3==t.gameState.policies[o.id]?(g.getComponent(cc.Button).interactable=!1,g.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=t.res.lang.policy_platform_completed[cc.sys.localStorage.language]):d<=t.gameState.resources?(g.getComponent(cc.Button).interactable=!0,g.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=t.res.lang.policy_platform_invest[cc.sys.localStorage.language]):(g.getComponent(cc.Button).interactable=!1,g.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=t.res.lang.policy_platform_more_resources[cc.sys.localStorage.language])},this),Object.values(t.res.RESOURCES).forEach((e,t)=>{f(e[cc.sys.localStorage.language].name,new cc.Vec2(300+200*t,80),t)});for(let o=0;o<4;++o){let i=t.res.RESOURCES[Object.keys(t.res.RESOURCES)[o]],n=0,s=0,r=0,c=a.node.getChildByName("view").getChildByName("content").children[o];c.removeAllChildren();for(let a=0;a<i.policyOptions.length;a++){let u=i.policyOptions[a];n=r%2*c.width/2,s=(1-Math.floor(r/2))*c.height/2,r++;const _=new cc.Node;_.name=`opt_${o}_${a}`,_.setAnchorPoint(new cc.Vec2(0,0)),_.parent=c,_.setPosition(n,s),_.setContentSize(cc.size(c.width/3,c.height/3));const h=new cc.Node;h.name="Background",h.setAnchorPoint(new cc.Vec2(0,0)),h.setContentSize(cc.size(104,104)),h.setPosition(50,50),h.parent=_,h.color=e.colors.COLOR_ICE,cc.loader.loadRes(u.img_normal,cc.SpriteFrame,function(t,o){const a=h.addComponent(cc.Sprite);a.setMaterial(1,e.defaultMaterial),a.spriteFrame=o});let f=new cc.Node;f.name="Label",f.color=e.colors.COLOR_ICE;const y=f.addComponent(cc.Label);y.string=u[cc.sys.localStorage.language].text,y.font=e.titleFont,y.fontSize=20,y.verticalAlign=cc.Label.VerticalAlign.BOTTOM,f.setPosition(0,0),f.setAnchorPoint(0,0),f.setContentSize(_.width,.1*_.height),f.parent=_;const S=o=>{l.getComponent(cc.Label).string=u[cc.sys.localStorage.language].text_long,d.getComponent(cc.Label).string=u[cc.sys.localStorage.language].description;const a=t.costCalculation(u);p.getComponent(cc.Label).string=t.res.lang.policy_platform_cost[cc.sys.localStorage.language]+a.toString(),g.attr({policy:u}),3==t.gameState.policies[u.id]?(g.getComponent(cc.Button).interactable=!1,g.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=t.res.lang.policy_platform_completed[cc.sys.localStorage.language]):a<=t.gameState.resources?(g.getComponent(cc.Button).interactable=!0,g.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=t.res.lang.policy_platform_invest[cc.sys.localStorage.language]):(g.getComponent(cc.Button).interactable=!1,g.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=t.res.lang.policy_platform_more_resources[cc.sys.localStorage.language]),l.opacity=255,d.opacity=255,p.opacity=255,g.opacity=255,null!=m&&m!=_&&(m.getChildByName("Background").color=e.colors.COLOR_ICE,m.getChildByName("Label").color=e.colors.COLOR_ICE),m=_},C=function(t){h.color=e.colors.COLOR_UMBER,f.color=e.colors.COLOR_UMBER},b=function(t){m!=_&&(h.color=e.colors.COLOR_ICE,f.color=e.colors.COLOR_ICE)};[_,h,f].forEach(e=>{e.on(cc.Node.EventType.TOUCH_END,S,_)}),[_,h,f].forEach(e=>{e.on(cc.Node.EventType.MOUSE_ENTER,C,_)}),[_,h,f].forEach(e=>{e.on(cc.Node.EventType.MOUSE_LEAVE,b,_)});let A=new cc.Node;A.name=`btnLvl1_${o}_${a}`;let E=A.addComponent(cc.Sprite);E.spriteFrame=e.dotOff,E.setMaterial(1,e.defaultMaterial);let v=new cc.Node;v.name=`btnLvl2_${o}_${a}`;let w=v.addComponent(cc.Sprite);w.spriteFrame=e.dotOff,w.setMaterial(1,e.defaultMaterial);let O=new cc.Node;O.name=`btnLvl3_${o}_${a}`;let T=O.addComponent(cc.Sprite);T.spriteFrame=e.dotOff,T.setMaterial(1,e.defaultMaterial),void 0===t.gameState.policies[u.id]||(1===t.gameState.policies[u.id]?E.node.color=e.colors.COLOR_UMBER:2===t.gameState.policies[u.id]?(E.node.color=e.colors.COLOR_UMBER,w.node.color=e.colors.COLOR_UMBER):3===t.gameState.policies[u.id]&&(E.node.color=e.colors.COLOR_UMBER,w.node.color=e.colors.COLOR_UMBER,T.node.color=e.colors.COLOR_UMBER)),A.setPosition(0,50),A.setContentSize(25,25),A.setAnchorPoint(new cc.Vec2(0,0)),v.setPosition(0,A.y+35),v.setContentSize(25,25),v.setAnchorPoint(new cc.Vec2(0,0)),O.setPosition(0,v.y+35),O.setAnchorPoint(new cc.Vec2(0,0)),O.setContentSize(25,25),A.parent=_,v.parent=_,O.parent=_}}n.on(cc.Node.EventType.TOUCH_END,e=>{h(n,0)}),s.on(cc.Node.EventType.TOUCH_END,e=>{h(s,1)}),r.on(cc.Node.EventType.TOUCH_END,e=>{h(r,2)}),c.on(cc.Node.EventType.TOUCH_END,e=>{h(c,3)}),a.node.on("page-turning",e=>{let t=e.getCurrentPageIndex();h(u[t],t)},e)}showPolicyDesign(){this.controller;let e=this.world,t=cc.director.getScene().getChildByName("Canvas").getChildByName("layerDesignPolicy"),o=cc.director.getScene().getChildByName("Canvas").getChildByName("resourceScoreBackground");e.gameState.modal=!0,e.gameState.state=e.res.GAME_STATES.PAUSED,t.zIndex=105,o.zIndex=106,cc.tween(t).by(.5,{position:cc.v2(1334,0)},{easing:"backOut"}).start();let a=cc.director.getScene().getChildByName("Canvas").getChildByName("layerDesignPolicy"),i=a.getChildByName("policyLabel"),n=a.getChildByName("policyDescription"),s=a.getChildByName("policyCostLabel"),r=a.getChildByName("btnPolicyInvest");i.opacity=0,i.getComponent(cc.Label).string="<< Select",n.opacity=255;const c=e.res.lang.policy_platform_hint[cc.sys.localStorage.language];n.getComponent(cc.Label).string=c,s.opacity=0,r.getComponent(cc.Button).interactable=!0,r.opacity=0}initStats(){let e=this.controller,t=this.world,o=cc.director.getScene().getChildByName("Canvas").getChildByName("layerStats"),a=o.getChildByName("pageview").getComponent(cc.PageView),i=o.getChildByName("btnWorld"),n=o.getChildByName("btnCountries"),s=o.getChildByName("btnTrends");a.setCurrentPageIndex(0),i.getComponent(cc.Button).interactable=!1,i.getChildByName("Label").color=e.colors.COLOR_UMBER;let r=[i,n,s],c=i;const l=(t,o)=>{a.setCurrentPageIndex(o),t.getComponent(cc.Button).interactable=!1,t.getChildByName("Label").color=e.colors.COLOR_UMBER,null!=c&&c!=t&&(c.getComponent(cc.Button).interactable=!0,c.getChildByName("Label").color=e.colors.COLOR_ICE),c=t};i.on(cc.Node.EventType.TOUCH_END,function(e){l(i,0)}),n.on(cc.Node.EventType.TOUCH_END,function(e){l(n,1)}),s.on(cc.Node.EventType.TOUCH_END,function(e){l(s,2)}),a.node.on("page-turning",function(e){let t=e.getCurrentPageIndex();l(r[t],t)},t)}showStatsBox(){let e=this.controller,t=this.world,o=cc.director.getScene().getChildByName("Canvas").getChildByName("layerStats");t.gameState.modal=!0,t.gameState.state=t.res.GAME_STATES.PAUSED,cc.tween(o).by(.5,{position:cc.v2(-1334,0)},{easing:"backOut"}).start(),o.zIndex=105;let a=o.getChildByName("pageview").getChildByName("view").getChildByName("content").getChildByName("page_1"),i=o.getChildByName("pageview").getChildByName("view").getChildByName("content").getChildByName("page_2"),n=o.getChildByName("pageview").getChildByName("view").getChildByName("content").getChildByName("page_3"),s=function(e,t,o,a){g.lineWidth=o,g.strokeColor=a,g.fillColor=a,g.moveTo(e.x,e.y),g.lineTo(t.x+1,t.y),g.stroke(),g.fill()};const r=function(e){return(Math.round(10*e)/10).toString()+"%"};a.getChildByName("lblYear").getComponent(cc.Label).string=t.res.lang.stats_year[cc.sys.localStorage.language]+t.gameState.currentDate.getFullYear(),a.getChildByName("lblYearMessage").getComponent(cc.Label).string=t.res.lang.stats_year_message_a[cc.sys.localStorage.language]+(t.gameState.targetDate.getFullYear()-t.gameState.currentDate.getFullYear())+t.res.lang.stats_year_message_b[cc.sys.localStorage.language],a.getChildByName("lblLoss").getComponent(cc.Label).string=t.res.lang.stats_loss[cc.sys.localStorage.language],a.getChildByName("lblLossMessage").getComponent(cc.Label).string=t.res.lang.stats_loss_message_a[cc.sys.localStorage.language]+t.gameState.startDate.getFullYear()+t.res.lang.stats_loss_message_b[cc.sys.localStorage.language]+r(t.gameState.totalLoss)+".",a.getChildByName("lblPreparedness").getComponent(cc.Label).string=t.res.lang.stats_preparedness[cc.sys.localStorage.language]+r(t.gameState.populationPreparedPercent)+" / "+Math.round(t.gameState.populationPrepared/1e6)+"M";let c=t.res.lang.stats_preparedness_message_a[cc.sys.localStorage.language]+r(t.gameState.populationPreparedPercent)+t.res.lang.stats_preparedness_message_b[cc.sys.localStorage.language];a.getChildByName("lblPreparednessMessage").getComponent(cc.Label).string=c;const l=Object.values(t.countries).sort((e,t)=>e.name<t.name?-1:e.name>t.name?1:0);let d=i.getChildByName("scrollview").getChildByName("view").getChildByName("content");if(0===d.childrenCount){let t=0;l.forEach(o=>{t++;let a=o.loss>20?e.colors.COLOR_RED:o.pop_prepared_percent>20?e.colors.COLOR_GREEN:e.colors.COLOR_ICE,i=new cc.Node,n=i.addComponent(cc.Label);i.color=a,n.string=o.name,n.fontSize=20,n.font=e.titleFont,n.horizontalAlign=cc.Label.HorizontalAlign.LEFT,i.setAnchorPoint(0,0),i.x=0,i.y=-24*t-40,i.parent=d;let s=new cc.Node,c=s.addComponent(cc.Label);s.color=a,c.string=r(o.loss),c.fontSize=20,c.font=e.titleFont,c.horizontalAlign=cc.Label.HorizontalAlign.RIGHT,s.setAnchorPoint(1,0),s.x=580,s.y=-24*t-40,s.parent=d;let l=new cc.Node,p=l.addComponent(cc.Label);l.color=a,p.string=r(o.pop_prepared_percent),p.fontSize=20,p.font=e.titleFont,p.horizontalAlign=cc.Label.HorizontalAlign.RIGHT,l.setAnchorPoint(1,0),l.x=780,l.y=-24*t-40,l.parent=d})}else{let t=0;l.forEach(o=>{let a=o.loss>20?e.colors.COLOR_RED:o.pop_prepared_percent>20?e.colors.COLOR_GREEN:e.colors.COLOR_ICE,i=d.children[3*t+0].getComponent(cc.Label),n=d.children[3*t+1].getComponent(cc.Label),s=d.children[3*t+2].getComponent(cc.Label);i.node.color=a,n.node.color=a,s.node.color=a,i.string=o.name,n.string=r(o.loss),s.string=r(o.pop_prepared_percent),t++})}let p=n.getChildByName("graph"),g=p.getComponent(cc.Graphics);g.clear(),p.destroyAllChildren();let u=0,_=0,m=0,h=0,f=0,y=0;const S=new cc.Color(e.colors.COLOR_RED.r,e.colors.COLOR_RED.g,e.colors.COLOR_RED.b),C=new cc.Color(e.colors.COLOR_GREEN.r,e.colors.COLOR_GREEN.g,e.colors.COLOR_GREEN.b),b=t.gameState.targetDate.getFullYear()-t.gameState.startDate.getFullYear();const A=.9*n.width/b,E=.9*(n.height-14)/100;s(new cc.Vec2(4,-10),new cc.Vec2(4+.9*n.width,-10),1,e.colors.COLOR_ICE),s(new cc.Vec2(4,-10),new cc.Vec2(4,0+.9*n.height),1,e.colors.COLOR_ICE);for(let e=t.gameState.startDate.getFullYear();e<t.gameState.targetDate.getFullYear();e++){const o=e-t.gameState.startDate.getFullYear(),a=t.gameState.stats[e];if(void 0===a)continue;const i=a.loss,n=a.prepared;h=4+o*A,y=0+(100-Math.round(i))*E,f=0+Math.round(n)*E,o>0&&(s(new cc.Vec2(u,m),new cc.Vec2(h-1,m),1,S),s(new cc.Vec2(h,m),new cc.Vec2(h,y),1,S),s(new cc.Vec2(u,_),new cc.Vec2(h-1,_),1,C),s(new cc.Vec2(h,_),new cc.Vec2(h,f),1,C)),u=h,m=y,_=f}let v=new cc.Node,w=v.addComponent(cc.Label);w.string=r(t.gameState.totalLoss),w.font=e.titleFont,w.fontSize=28,v.color=S,v.setPosition(8+h,0+y),v.setAnchorPoint(0,.5),v.parent=p,v.zIndex=106;let O=new cc.Node,T=O.addComponent(cc.Label);T.string=r(t.gameState.populationPreparedPercent),T.font=e.titleFont,T.fontSize=28,O.color=C,O.setPosition(8+h,0+f),O.setAnchorPoint(0,.5),O.parent=p,O.zIndex=106}processResourceSelection(e){let t=this.controller,o=this.world;if(o.gameState.state===o.res.GAME_STATES.PAUSED)return;const a=Math.floor(1+3*Math.random());o.gameState.resources+=a,e.target.destroy(),o.gameState.resourcesAdded||(o.gameState.state=o.res.GAME_STATES.PAUSED,o.gameState.resourcesAdded=!0,o.gameState.tutorialMode?t.showMessageBox(o,"HINT:",o.res.TUTORIAL_MESSAGES.FIRST_RESOURCE_CLICKED[cc.sys.localStorage.language],"OK!",function(){o.gameState.tutorialHints.push(o.res.TUTORIAL_MESSAGES.FIRST_RESOURCE_CLICKED[cc.sys.localStorage.language]),o.gameState.state=o.res.GAME_STATES.STARTED},void 0,void 0):o.gameState.state=o.res.GAME_STATES.STARTED)}processCrisisSelection(e){let t=this.controller,o=this.world;if(o.gameState.state===o.res.GAME_STATES.PAUSED)return;o.gameState.crisisCountry=null;let a=null;for(let t=0;t<o.gameState.crises.length;t++)if(o.gameState.crises[t].id==e.target.id){const e=o.gameState.crises[t];a=o.res.CRISES[e.crisis],o.gameState.crises.splice(t,1);break}if(e.target.destroy(),!o.gameState.alertCrisis&&o.gameState.tutorialMode)o.gameState.state=o.res.GAME_STATES.PAUSED,o.gameState.alertCrisis=!0,t.showMessageBox(o,o.res.lang.crisis_title[cc.sys.localStorage.language],o.res.lang.crisis_message[cc.sys.localStorage.language]+a[cc.sys.localStorage.language]+"!","OK!",function(){o.gameState.state=o.res.GAME_STATES.STARTED},void 0,void 0);else if(Math.random()<o.res.QUIZ_CHANGE){let e=Math.floor(Math.random()*o.res.quizzes.length),a=o.res.quizzes[e];if(o.gameState.quizzes.indexOf(e)>-1)return;o.gameState.quizzes.push(e);let i=a.quiz[cc.sys.localStorage.language],n=a.wrong_answer[cc.sys.localStorage.language],s=a.right_answer[cc.sys.localStorage.language],r=o.res.lang.crisis_alert[cc.sys.localStorage.language];t.showQuizBox(o,r,i,n,s)}}refreshDate(e){let t=this.controller,o=e.gameState.currentDate.getMonth()+1,a=o<10?"0"+o.toString():o.toString();t.topBar.getChildByName("lblMonth").getComponent(cc.Label).string=a,t.topBar.getChildByName("lblYear").getComponent(cc.Label).string=e.gameState.currentDate.getFullYear().toString()}printCountryStats(){let e=this.controller,t=this.world;const o=t.countries[t.gameState.currentCountry];e.countryLabel.string=o.name;const a=Math.floor(o.loss),i=Math.floor(o.pop_prepared_percent);e.countryLoss.string=a+"%",e.countryLossProgress.progress=a/100,a>=t.res.LOSS_TOTAL?e.countryLossProgress.node.opacity=255:a>=t.res.LOSS_PARTIAL&&(e.countryLossProgress.node.opacity=191),e.countryAwarePrepared.string=i+"%",e.countryPreparedProgress.progress=i/100}printWorldStats(){let e=this.controller,t=this.world;e.countryLabel.string=t.res.lang.world_label[cc.sys.localStorage.language];const o=Math.round(t.gameState.totalLoss),a=Math.round(t.gameState.populationPreparedPercent);e.countryLoss.string=o+"%",e.countryAwarePrepared.string=a+"%",e.countryLossProgress.progress=o/100,e.countryPreparedProgress.progress=a/100}selectCountry(e,t){let o=this.controller,a=this.world,i=o.node.getChildByName("mapFront");if(a.gameState.state!==a.res.GAME_STATES.PREPARED&&a.gameState.state!==a.res.GAME_STATES.STARTED&&a.gameState.state!==a.res.GAME_STATES.PAUSED)return;const n=e.getCurrentTarget().convertToNodeSpaceAR(t);o.lastLayerID=-1;let s=0,r=a.sortedObjs.length;o.lastLayerID>-1&&(s=s<0?0:s,r=r>a.sortedObjs.length?a.sortedObjs.length:r);const c=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));let l=-1,d=null;for(let e=s;e<r;e++){const t=a.sortedObjs[e],s={x:n.x+i.x,y:cc.winSize.height-n.y-1*a.res.Y_OFFSET-i.y};if(o.collisionDetection(t.points[0],s)){o.lastLayerID=e;const i=c(a.countries[t.iso_a3].centroid,s);if(-1===l||i<l){l=i,d=t.iso_a3;break}}}return null!=d?(null!=a.gameState.currentCountry&&(a.countries[a.gameState.currentCountry].selected=!1),a.gameState.currentCountry=d,null!=a.gameState.currentCountry&&(a.countries[a.gameState.currentCountry].selected=!0),a.gameState.currentCountry=d,o.printCountryStats()):(null!=a.gameState.currentCountry&&(a.countries[a.gameState.currentCountry].selected=!1),a.gameState.currentCountry=null,o.printWorldStats()),!0}generatePolicyIcon(){this.controller;let e=this.world,t=e.generateWeightedPolicyIndex(Math.random()),o="";switch(t){case 0:o=e.res.res.resource_economy_1;break;case 1:o=e.res.res.resource_economy_2;break;case 2:o=e.res.res.resource_economy_3;break;case 3:o=e.res.res.resource_economy_4;break;case 4:o=e.res.res.resource_politics_1;break;case 5:o=e.res.res.resource_politics_2;break;case 6:o=e.res.res.resource_politics_3;break;case 7:o=e.res.res.resource_politics_4;break;case 8:o=e.res.res.resource_culture_1;break;case 9:o=e.res.res.resource_culture_2;break;case 10:o=e.res.res.resource_culture_3;break;case 11:o=e.res.res.resource_culture_4;break;case 12:o=e.res.res.resource_ecology_1;break;case 13:o=e.res.res.resource_ecology_2;break;case 14:o=e.res.res.resource_ecology_3;break;case 15:o=e.res.res.resource_ecology_4}return t}addResource(){let e=this.controller,t=this.world,o=e.node.getChildByName("mapFront");const a=new l("Resource"),i=a.addComponent(cc.Sprite),n=e.generatePolicyIcon();i.spriteFrame=e.policyIcons[n];const s=Math.floor(Math.random()*Object.keys(t.countries).length),r=t.countries[Object.keys(t.countries)[s]].centroid;a.setPosition(r.x-o.x,e.node.height-1*t.res.Y_OFFSET-r.y-o.y),a.setContentSize(cc.size(t.res.RESOURCE_SIZE_W,t.res.RESOURCE_SIZE_H)),a.placedAt=t.gameState.counter,a.setAnchorPoint(.5,0),a.parent=o,a.zIndex=103,e.buttons.push(a),a.on(cc.Node.EventType.TOUCH_END,e.processResourceSelection,this),t.gameState.alertResources||t.gameState.tutorialMode&&(t.gameState.state=t.res.GAME_STATES.PAUSED,t.gameState.alertResources=!0,e.showMessageBox(t,"HINT:",t.res.TUTORIAL_MESSAGES.FIRST_RESOURCE_SHOWN[cc.sys.localStorage.language],"OK!",function(e){t.gameState.tutorialHints.push(t.res.TUTORIAL_MESSAGES.FIRST_RESOURCE_SHOWN[cc.sys.localStorage.language]),t.gameState.state=t.res.GAME_STATES.PAUSED_TUTORIAL},void 0,void 0)),t.gameState.lastResource=t.gameState.counter}addCrisis(){let e=this.controller,t=this.world,o=e.node.getChildByName("mapFront");const a=Math.random(),i=t.crisisProbLocation(a);if(void 0===i)return;t.gameState.crisisCountry=i,t.gameState.crises.push(i),t.gameState.crisisCount++;const n=t.res.CRISES[i.crisis],s=t.countries[i.country],r=new l("Crisis");r.addComponent(cc.Sprite).spriteFrame=e.crisisIcons[i.crisis];const c=s.centroid;r.setPosition(c.x-o.x,e.node.height-1*t.res.Y_OFFSET-c.y-o.y),r.setContentSize(cc.size(t.res.RESOURCE_SIZE_W,t.res.RESOURCE_SIZE_H)),r.placedAt=t.gameState.counter,r.setAnchorPoint(.5,0),r.id=i.id,r.name="crisis"+i.id,r.parent=o,r.zIndex=103,e.buttons.push(r),r.on(cc.Node.EventType.TOUCH_END,e.processCrisisSelection,this);let d=t.res.lang.crisis_prefix[cc.sys.localStorage.language]+n[cc.sys.localStorage.language]+t.res.lang.crisis_suffix[cc.sys.localStorage.language]+s.name+".";t.gameState.crisisCount<4&&(t.gameState.state=t.res.GAME_STATES.PAUSED,d+=t.res.lang.crisis_explanation[cc.sys.localStorage.language],e.showMessageBox(t,t.res.lang.crisis_alert[cc.sys.localStorage.language],d,"OK!",e=>{t.gameState.tutorialMode?t.gameState.state=t.res.GAME_STATES.PAUSED_TUTORIAL:t.gameState.state=t.res.GAME_STATES.STARTED},void 0,void 0),t.gameState.automateMode),t.gameState.lastCrisis=t.gameState.counter}addTutorial(){let e=this.controller,t=this.world;if(t.gameState.tutorialHints.length<2||t.gameState.tutorialHints.length>=6)return;t.gameState.state=t.res.GAME_STATES.PAUSED;let o=null;switch(t.gameState.tutorialHints.length){case 2:default:o=t.res.TUTORIAL_MESSAGES.RANDOM_1[cc.sys.localStorage.language];break;case 3:o=t.res.TUTORIAL_MESSAGES.RANDOM_2[cc.sys.localStorage.language];break;case 4:o=t.res.TUTORIAL_MESSAGES.RANDOM_3[cc.sys.localStorage.language];break;case 5:o=t.res.TUTORIAL_MESSAGES.RANDOM_4[cc.sys.localStorage.language]}e.showMessageBox(t,"HINT:",o,"OK",function(){t.gameState.tutorialHints.push(o),t.gameState.state=t.res.GAME_STATES.STARTED},void 0,void 0)}doSim(){let e=this.controller,t=this.world;if(null===t.gameState.startCountry||t.gameState.state!==t.res.GAME_STATES.PREPARED)return;const o=t.countries[t.gameState.startCountry];o.policy=1,o.affected_chance=1,t.gameState.state=t.res.GAME_STATES.STARTED,e.refreshDate(t),e.buttons=[]}snapshot(){if(!cc.sys.isBrowser)return;let e=new cc.Node;e.parent=cc.director.getScene(),e.zIndex=cc.macro.MAX_ZINDEX;let t=cc.winSize.width,o=cc.winSize.height;e.x=t/2,e.y=o/2;let a=e.addComponent(cc.Camera);a.cullingMask=4294967295;let i=new cc.RenderTexture,n=cc.game._renderContext;i.initWithSize(cc.visibleRect.width,cc.visibleRect.height,n.STENCIL_INDEX8),a.targetTexture=i,a.render(cc.director.getScene());let s=i.readPixels(),r=document.createElement("canvas"),c=r.getContext("2d"),l=r.width=i.width,d=r.height=i.height;r.width=i.width,r.height=i.height;let p=4*l;for(let e=0;e<d;e++){let t=d-1-e,o=c.createImageData(l,1),a=t*l*4;for(let e=0;e<p;e++)o.data[e]=s[a+e];c.putImageData(o,0,e)}let g=r.toDataURL("image/jpeg");document.createElement("img").src=g;var u=g.replace(/^data:image[^;]*/,"data:image/octet-stream");document.location.href=u}showAntarcticCities(e){let t=this.controller,o=this.world;if(void 0===o.countries.AUS)return;let a=t.node.getChildByName("mapFront").getChildByName("cities").getComponent(cc.Graphics);a.clear(),a.fillColor=t.colors.COLOR_GREEN;let i=o.countries.AUS.places.Hobart,n=o.countries.NZL.places.Christchurch,s=o.countries.ZAF.places["Cape Town"],r=o.countries.CHL.places["Punta Arenas"],c=o.countries.ARG.places.Ushuaia;a.circle(i.points[0]-t.node.width/2,t.node.height-i.points[1]-o.res.Y_OFFSET-t.node.height/2,e),a.fill(),a.circle(n.points[0]-t.node.width/2,t.node.height-n.points[1]-o.res.Y_OFFSET-t.node.height/2,e),a.fill(),a.circle(s.points[0]-t.node.width/2,t.node.height-s.points[1]-o.res.Y_OFFSET-t.node.height/2,e),a.fill(),a.circle(r.points[0]-t.node.width/2,t.node.height-r.points[1]-o.res.Y_OFFSET-t.node.height/2,e),a.fill(),a.circle(c.points[0]-t.node.width/2,t.node.height-c.points[1]-o.res.Y_OFFSET-t.node.height/2,e),a.fill()}onLoad(){this._time=0;let e=window.controller=this.controller=this;e.world=window.world=new r.World;let t=e.world;e.messageBox.opacity=0,t.automateScripts=t.res.automateScripts,t.automateID=-1,void 0===cc.sys.localStorage.language&&(cc.sys.localStorage.language="eng"),void 0===cc.sys.localStorage.level&&(cc.sys.localStorage.level="Easy"),t.initGameState(cc.sys.localStorage.level,cc.sys.localStorage.language,cc.sys.localStorage.greyscale,cc.sys.isMobile,cc.winSize.width,cc.winSize.height),void 0===cc.sys.localStorage.isPlaying&&(cc.sys.localStorage.isPlaying=!0),e.topBar.getChildByName("btnSound").getComponent(cc.Button).interactable="true"===cc.sys.localStorage.isPlaying,cc.loader.loadRes("singleColor",cc.SpriteFrame,function(t,o){e.singleColor=o}),cc.loader.loadRes("icons/DOT_ON",cc.SpriteFrame,function(t,o){e.dotOn=o,cc.loader.loadRes("icons/DOT_OFF",cc.SpriteFrame,function(t,o){e.dotOff=o,e.updateLanguageSettings(),e.initStats()})}),e.policyIcons=[],Object.keys(t.res.res).forEach(function(o){let a=t.res.res[o];cc.loader.loadRes(a,cc.SpriteFrame,function(t,o){e.policyIcons.push(o)})}),e.crisisIcons=new Map,Object.keys(t.res.CRISES).forEach(function(o){let a=t.res.CRISES[o].image;cc.loader.loadRes(a,cc.SpriteFrame,function(t,a){e.crisisIcons[o]=a})});cc.loader.loadRes("scripts/json-equal-greyscale",(o,a)=>{if(null==o){e.world.countriesJson=a.json,e.world.setupCountries(),e.loadCountrySprites(),e.initControls();let o=e.node.getChildByName("mapFront");o.on(cc.Node.EventType.MOUSE_MOVE,t=>{e.selectCountry(t,t.getLocation())});const i=()=>{t.gameState.state=t.res.GAME_STATES.PREPARED,e.btnPause.getComponent(cc.Button).interactable=!0,e.btnPlay.getComponent(cc.Button).interactable=!1,e.btnFF.getComponent(cc.Button).interactable=!0,e.doSim()};let n=e.node.getChildByName("mapFront");n.on(cc.Node.EventType.MOUSE_WHEEL,o=>{if(t.gameState.modal||!t.gameState.mouseZoom)return!1;const a=e.node.getChildByName("mapBack"),i=cc.sys.isNative?6*o.getScrollY():-o.getScrollY(),s=a.scale*(1+i/1e3);a.width;s<=10&&s>=1&&(a.setScale(s),n.setScale(s))},n),n.on(cc.Node.EventType.MOUSE_MOVE,o=>{if(t.gameState.modal||!t.gameState.mousePan)return!1;if(o.getButton()==cc.Event.EventMouse.BUTTON_LEFT){const t=e.node.getChildByName("mapBack"),a=t.scale,i=t.getContentSize();i.width,i.height,t.width,t.height;t.x+=o.getDeltaX(),t.y+=o.getDeltaY(),n.x+=o.getDeltaX(),n.y+=o.getDeltaY()}},o);let s=["NZL","AUS","ZAF","ARG","CHL"],r=s[Math.floor(Math.random()*s.length)];e.showMessageBox(t,t.res.scenarioData[cc.sys.localStorage.language].popup_1_title,t.res.scenarioData[cc.sys.localStorage.language].popup_1_description,t.res.lang.start_tutorial[cc.sys.localStorage.language],o=>{t.gameState.tutorialMode=!0,t.gameState.startCountry=r,t.gameState.statsCountry=r,t.gameState.currentCountry=r;const a=t.countries[t.gameState.startCountry].name;e.showMessageBox(t,t.res.lang.start_prepare[cc.sys.localStorage.language],t.res.lang.start_mission_a[cc.sys.localStorage.language]+a+t.res.lang.start_mission_b[cc.sys.localStorage.language],t.res.scenarioData[cc.sys.localStorage.language].popup_2_title,e=>{i()},void 0,void 0)},t.res.lang.start_tutorial_skip[cc.sys.localStorage.language],o=>{t.gameState.tutorialMode=!1,t.gameState.startCountry=r,t.gameState.statsCountry=r,t.gameState.currentCountry=r;const a=t.countries[t.gameState.startCountry].name;e.showMessageBox(t,t.res.lang.start_prepare[cc.sys.localStorage.language],t.res.lang.start_mission_a[cc.sys.localStorage.language]+a+t.res.lang.start_mission_b[cc.sys.localStorage.language],t.res.scenarioData[cc.sys.localStorage.language].popup_2_title,e=>{i()},void 0,void 0)})}})}start(){void 0==cc.sys.localStorage.isPlaying&&(cc.sys.localStorage.isPlaying=!0),this.currentAudioId=cc.audioEngine.play(this.audio,!0,.5);let e=cc.audioEngine.getDuration(this.currentAudioId),t=Math.floor(Math.random()*e);cc.audioEngine.setCurrentTime(this.currentAudioId,t),"true"!=cc.sys.localStorage.isPlaying&&cc.audioEngine.pauseAll()}onDestroy(){cc.audioEngine.stop(this.currentAudioId)}updateLive(){let e=this,t=this.world;t.gameState.counter++,t.gameState.automateMode,t.gameState.counter%t.gameState.timeInterval==0&&(t.updateGameTime(o=>{t.gameState.state=t.res.GAME_STATES.PAUSED;const a=t.gameState.currentDate.getFullYear();e.showMessageBox(t,t.res.lang.bulletin[cc.sys.localStorage.language]+a,o,"OK",function(){t.gameState.state=t.res.GAME_STATES.STARTED},void 0,void 0),t.gameState.automateMode}),null!=t.gameState.currentCountry?e.printCountryStats():e.printWorldStats()),t.updateGameStats();let o=t.isItTimeForNewCrisis();t.gameState.counter-t.gameState.lastCrisis>=o&&Math.random()<t.res.CRISIS_CHANCE&&e.addCrisis();let a=t.isItTimeForNewResources();t.gameState.counter-t.gameState.lastResource>=a&&(e.addResource(),t.gameState.resourceInterval*=1.1),t.gameState.tutorialMode&&t.gameState.counter%t.gameState.tutorialInterval==0&&e.addTutorial();const i=[];for(let o=0;o<e.buttons.length;o++){const a=e.buttons[o];"Resource"==a.name&&t.gameState.counter>a.placedAt+t.res.RESOURCE_DURATION?a.destroy():i.push(a)}if(e.buttons=i,e.resourceScoreLabel.string=t.gameState.resources.toString(),e.refreshDate(t),t.gameState.totalLoss>=100){const o=Object.values(t.res.NARRATIVES.n2070).sort((e,t)=>t.loss-e.loss)[0],a=Math.floor(Math.random()*o[cc.sys.localStorage.language].length),i=o[cc.sys.localStorage.language][a];e.gameOver(t,i,"OK")}else if(t.gameState.currentDate>=t.gameState.targetDate){let o="";const a=Object.values(t.res.NARRATIVES.n2070).sort((e,t)=>t.loss-e.loss);for(let e=0;e<a.length;e++){const i=a[e];if(t.gameState.totalLoss>=i.loss){const e=Math.floor(Math.random()*i[cc.sys.localStorage.language].length);o=i[cc.sys.localStorage.language][e];break}}e.gameOver(t,o,"OK")}}update(e){let t=this.controller,o=this.world;this._time+=e,void 0!==t.countryNodes&&Object.keys(t.countryNodes).forEach(e=>{let a=t.countryNodes[e],i=o.countries[e];if(void 0!==i){let e=a.getComponent(cc.Sprite).materials[0];e.setProperty("u_selected",i.selected?1:0),e.setProperty("u_percentageLoss",i.loss),e.setProperty("u_percentagePrep",i.pop_prepared_percent)}});let a=3*this._time%3*3;t.showAntarcticCities(a),o.gameState.state===o.res.GAME_STATES.STARTED&&this.updateLive()}};a([n({type:cc.AudioClip})],d.prototype,"audio",void 0),a([n(cc.Material)],d.prototype,"defaultMaterial",void 0),a([n(cc.Material)],d.prototype,"countryMaterial",void 0),a([n(cc.Material)],d.prototype,"materialA",void 0),a([n(cc.Material)],d.prototype,"materialB",void 0),a([n(cc.Node)],d.prototype,"messageBox",void 0),a([n(cc.Node)],d.prototype,"topBar",void 0),a([n(cc.SpriteFrame)],d.prototype,"singleColor",void 0),a([n(cc.Font)],d.prototype,"titleFont",void 0),a([n(cc.Font)],d.prototype,"bodyFont",void 0),a([n(cc.Node)],d.prototype,"backgroundGreyscale",void 0),a([n(cc.Node)],d.prototype,"backgroundColour",void 0),d=a([i],d),o.default=d,cc._RF.pop()},{"./Colors":"Colors","./Resources":"Resources","./World":"World"}],Resources:[function(e,t,o){"use strict";cc._RF.push(t,"587cb1iGflJEKQLWaMRrpL5","Resources"),Object.defineProperty(o,"__esModule",{value:!0});o.Resources=class{constructor(){this.VERSION_ANTARCTIC_FUTURES="Build: 1027",this.LANGUAGES=["eng","esp"],this.FONT_FACE_TITLE="ArvoFont",this.FONT_FACE_BODY="JosefinSansFont",this.FONT_FACE_TITLE_SMALL=20,this.FONT_FACE_TITLE_MEDIUM=26,this.FONT_FACE_TITLE_BIG=38,this.FONT_FACE_BODY_SMALL=20,this.FONT_FACE_BODY_MEDIUM=24,this.FONT_FACE_BODY_BIG=30,this.FONT_FACE_BODY_VERY_BIG=48,this.FONT_SPACING=4,this.X_OFFSET=0,this.Y_OFFSET=55,this.RESOURCE_SIZE_W=64,this.RESOURCE_SIZE_H=72,this.TAG_SPRITE_BATCH_NODE=1,this.FULLSCREEN=!0,this.DECAY_LOSS=50,this.DECAY_PREPAREDNESS=5,this.MONTH_INTERVAL=15,this.MONTH_INTERVAL_FF=this.MONTH_INTERVAL/3,this.RESOURCE_CHANCE=.1,this.CRISIS_CHANCE=.05,this.QUIZ_CHANGE=.33,this.TUTORIAL_INTERVAL_MULTIPLIER=6,this.RESOURCE_INTERVAL_MULTIPLIER=10,this.CRISIS_INTERVAL_MULTIPLIER=20,this.RESOURCE_DURATION=300,this.GAME_STATES={INITIALISED:0,PREPARED:1,STARTED:2,PAUSED:3,PAUSED_TUTORIAL:4,GAME_OVER:5},this.LOSS_TOTAL=80,this.LOSS_PARTIAL=80,this.SIGMOIDAL_DECAY=!0,this.res={resource_economy_1:"icons/RESOURCE_1",resource_economy_2:"icons/RESOURCE_2",resource_economy_3:"icons/RESOURCE_3",resource_economy_4:"icons/RESOURCE_4",resource_politics_1:"icons/RESOURCE_1",resource_politics_2:"icons/RESOURCE_2",resource_politics_3:"icons/RESOURCE_3",resource_politics_4:"icons/RESOURCE_4",resource_culture_1:"icons/RESOURCE_1",resource_culture_2:"icons/RESOURCE_2",resource_culture_3:"icons/RESOURCE_3",resource_culture_4:"icons/RESOURCE_4",resource_ecology_1:"icons/RESOURCE_1",resource_ecology_2:"icons/RESOURCE_2",resource_ecology_3:"icons/RESOURCE_3",resource_ecology_4:"icons/RESOURCE_4"},this.crisis={crisis_1:"icons/ICON_CRISIS_CRASH",crisis_2:"icons/ICON_CRISIS_DISPLACEMENT",crisis_3:"icons/ICON_CRISIS_PANDEMIC",crisis_4:"icons/ICON_CRISIS_WAR",crisis_5:"icons/ICON_CRISIS_WATER_SHORTAGE",crisis_6:"icons/ICON_CRISIS_WEATHER"},this.RESOURCES={economic:{eng:{labelText:"Design your Economic Policy",name:"Economy"},esp:{labelText:"Dise\xf1e su p\xf3litica econ\xf3mica",name:"Econom\xeda"},policyOptions:[{id:1,domain:1,eng:{text:"Free Trade Agreements",text_long:"Free Trade Agreements",description:"This policy may produce additional resources in lower-income countries."},esp:{text:"Acuerdos de libre comercio",text_long:"Acuerdos de libre comercio",description:"Esta pol\xedtica puede producir recursos adicionales en los pa\xedses de bajos ingresos."},location:{x:300,y:500},img_normal:"policies/POLICY_ECONOMY_1_NORMAL",img_on:"policies/POLICY_ECONOMY_1_ON",levels:3,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:.2,effect_on_crises:.05,effect_on_pop_high:0,effect_on_pop_medium:-.05,effect_on_pop_low:-.1,effect_on_income_low:-.2,effect_on_income_low_medium:-.15,effect_on_income_medium_high:.05,effect_on_income_high:.1,effect_on_geo_tropic:0,effect_on_geo_subtropic:0,effect_on_geo_temperate:0,effect_on_geo_polar:0,effect_on_density:0,effect_on_area_large:0,effect_on_area_medium:0,effect_on_area_small:0,cost_1:3,cost_2:4,cost_3:5},{id:2,domain:1,eng:{text:"Automate Industry",text_long:"Automate Industry",description:"This policy reduces the carbon footprint of wealthy nations and it may produce additional resources in middle-income countries."},esp:{text:"Automatizar la industria",text_long:"Automatizar la industria",description:"Esta pol\xedtica reduce la huella de carbono de las naciones ricas y puede producir recursos adicionales en los pa\xedses de ingresos medios."},location:{x:600,y:500},img_normal:"policies/POLICY_ECONOMY_2_NORMAL",img_on:"policies/POLICY_ECONOMY_2_ON",levels:3,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:.4,effect_on_crises:.05,effect_on_pop_high:-.1,effect_on_pop_medium:0,effect_on_pop_low:.2,effect_on_income_low:0,effect_on_income_low_medium:0,effect_on_income_medium_high:.1,effect_on_income_high:.15,effect_on_geo_tropic:0,effect_on_geo_subtropic:0,effect_on_geo_temperate:0,effect_on_geo_polar:0,effect_on_density:0,effect_on_area_large:0,effect_on_area_medium:0,effect_on_area_small:0,cost_1:3,cost_2:4,cost_3:5},{id:3,domain:1,eng:{text:"Reduce Inequality",text_long:"Reduce Inequality",description:"This policy may produce additional resources in lower-income countries."},esp:{text:"Reducir la desigualdad",text_long:"Reducir la desigualdad",description:"Esta pol\xedtica puede producir recursos adicionales en los pa\xedses de bajos ingresos."},location:{x:300,y:200},img_normal:"policies/POLICY_ECONOMY_3_NORMAL",img_on:"policies/POLICY_ECONOMY_3_ON",levels:3,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:.3,effect_on_crises:-.05,effect_on_pop_high:.05,effect_on_pop_medium:0,effect_on_pop_low:0,effect_on_income_low:.15,effect_on_income_low_medium:.1,effect_on_income_medium_high:.05,effect_on_income_high:.01,effect_on_geo_tropic:0,effect_on_geo_subtropic:0,effect_on_geo_temperate:0,effect_on_geo_polar:0,effect_on_density:0,effect_on_area_large:0,effect_on_area_medium:0,effect_on_area_small:0,cost_1:3,cost_2:4,cost_3:5},{id:4,domain:1,eng:{text:"Remove Regulations",text_long:"Remove Regulations",description:"This policy is highly effective in producing additional resources but may worsen carbon footprint globally."},esp:{text:"Eliminar regulaciones",text_long:"Eliminar regulaciones",description:"Esta pol\xedtica es muy eficaz para producir recursos adicionales, pero puede empeorar la huella de carbono en todo el mundo."},location:{x:600,y:200},img_normal:"policies/POLICY_ECONOMY_4_NORMAL",img_on:"policies/POLICY_ECONOMY_4_ON",levels:3,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:.2,effect_on_crises:.1,effect_on_pop_high:-.1,effect_on_pop_medium:-.1,effect_on_pop_low:-.05,effect_on_income_low:-.3,effect_on_income_low_medium:-.15,effect_on_income_medium_high:-.05,effect_on_income_high:0,effect_on_geo_tropic:0,effect_on_geo_subtropic:0,effect_on_geo_temperate:0,effect_on_geo_polar:0,effect_on_density:0,effect_on_area_large:0,effect_on_area_medium:0,effect_on_area_small:0,cost_1:3,cost_2:4,cost_3:5}]},politics:{eng:{labelText:"Design your Political Policy",name:"Politics"},esp:{labelText:"Dise\xf1e su p\xf3litica pol\xedtica",name:"Pol\xedtica"},policyOptions:[{id:5,domain:2,eng:{text:"Diplomacy",text_long:"Diplomacy",description:"This policy may allow the renegotiations of climate accords with better targets and stricter conditions."},esp:{text:"Diplomacia",text_long:"Diplomacia",description:"Esta pol\xedtica puede permitir la renegociaci\xf3n de acuerdos clim\xe1ticos con mejores objetivos y condiciones m\xe1s estrictas."},location:{x:300,y:500},img_normal:"policies/POLICY_POLITCS_1_NORMAL",img_on:"policies/POLICY_POLITCS_1_ON",levels:3,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:0,effect_on_crises:-.5,effect_on_pop_high:0,effect_on_pop_medium:0,effect_on_pop_low:0,effect_on_income_low:0,effect_on_income_low_medium:0,effect_on_income_medium_high:.1,effect_on_income_high:.1,effect_on_geo_tropic:0,effect_on_geo_subtropic:0,effect_on_geo_temperate:0,effect_on_geo_polar:0,effect_on_density:0,effect_on_area_large:0,effect_on_area_medium:0,effect_on_area_small:0,cost_1:3,cost_2:4,cost_3:5},{id:6,domain:2,eng:{text:"Promote Democracy",text_long:"Promote Democracy",description:"Democratic institutions may improve the effectiveness of cultural policies."},esp:{text:"Promover la democracia",text_long:"Promover la democracia",description:"Las instituciones democr\xe1ticas pueden mejorar la eficacia de las pol\xedticas culturales."},location:{x:600,y:500},img_normal:"policies/POLICY_POLITCS_2_NORMAL",img_on:"policies/POLICY_POLITCS_2_ON",levels:3,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:0,effect_on_crises:0,effect_on_pop_high:.05,effect_on_pop_medium:.05,effect_on_pop_low:0,effect_on_income_low:0,effect_on_income_low_medium:.05,effect_on_income_medium_high:0,effect_on_income_high:0,effect_on_geo_tropic:0,effect_on_geo_subtropic:0,effect_on_geo_temperate:0,effect_on_geo_polar:0,effect_on_density:0,effect_on_area_large:0,effect_on_area_medium:0,effect_on_area_small:0,cost_1:3,cost_2:4,cost_3:5},{id:7,domain:2,eng:{text:"Global Treaties",text_long:"Global Treaties",description:"This policy allows the creation of global alliances in the reduction of greenhouse emissions."},esp:{text:"Tratados Globales",text_long:"Tratados Globales",description:"Esta pol\xedtica permite la creaci\xf3n de alianzas globales en la reducci\xf3n de emisiones de gases de efecto invernadero."},location:{x:300,y:200},img_normal:"policies/POLICY_POLITCS_3_NORMAL",img_on:"policies/POLICY_POLITCS_3_ON",levels:3,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:0,effect_on_crises:0,effect_on_pop_high:.05,effect_on_pop_medium:.05,effect_on_pop_low:0,effect_on_income_low:0,effect_on_income_low_medium:0,effect_on_income_medium_high:0,effect_on_income_high:.05,effect_on_geo_tropic:0,effect_on_geo_subtropic:0,effect_on_geo_temperate:0,effect_on_geo_polar:0,effect_on_density:0,effect_on_area_large:0,effect_on_area_medium:0,effect_on_area_small:0,cost_1:3,cost_2:4,cost_3:5},{id:8,domain:2,eng:{text:"Boost Military",text_long:"Boost Military",description:"This policy may produce additional resources and improve the effectiveness of top-down ecological transitions."},esp:{text:"Impulso Militar",text_long:"Impulso Militar",description:"Esta pol\xedtica puede producir recursos adicionales y mejorar la eficacia de las transiciones ecol\xf3gicas de arriba hacia abajo."},location:{x:600,y:200},img_normal:"policies/POLICY_POLITCS_4_NORMAL",img_on:"policies/POLICY_POLITCS_4_ON",levels:3,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:.1,effect_on_crises:.1,effect_on_pop_high:-.05,effect_on_pop_medium:0,effect_on_pop_low:0,effect_on_income_low:-.2,effect_on_income_low_medium:-.05,effect_on_income_medium_high:0,effect_on_income_high:-.1,effect_on_geo_tropic:0,effect_on_geo_subtropic:0,effect_on_geo_temperate:0,effect_on_geo_polar:0,effect_on_density:0,effect_on_area_large:0,effect_on_area_medium:0,effect_on_area_small:0,cost_1:3,cost_2:4,cost_3:5}]},cultural:{eng:{labelText:"Design your Cultural Policy",name:"Culture"},esp:{labelText:"Dise\xf1e su p\xf3litica cultural",name:"Cultura"},policyOptions:[{id:9,domain:3,eng:{text:"Social Media",text_long:"Social Media",description:"Through social media, some ecological and political strategies may increase their effectiveness."},esp:{text:"Medios de comunicaci\xf3n social",text_long:"Medios de comunicaci\xf3n social",description:"A trav\xe9s de los medios sociales, algunas estrategias ecol\xf3gicas y pol\xedticas pueden aumentar su eficacia."},location:{x:300,y:500},img_normal:"policies/POLICY_CULTURE_1_NORMAL",img_on:"policies/POLICY_CULTURE_1_ON",levels:3,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:.1,effect_on_crises:0,effect_on_pop_high:.05,effect_on_pop_medium:0,effect_on_pop_low:0,effect_on_income_low:-.15,effect_on_income_low_medium:-.1,effect_on_income_medium_high:.1,effect_on_income_high:.1,effect_on_geo_tropic:0,effect_on_geo_subtropic:0,effect_on_geo_temperate:0,effect_on_geo_polar:0,effect_on_density:0,effect_on_area_large:0,effect_on_area_medium:0,effect_on_area_small:0,cost_1:3,cost_2:4,cost_3:5},{id:10,domain:3,eng:{text:"Global Festivals",text_long:"Global Festivals",description:"Global festivals generate consensus and may add resources to spend on other cultural strategies."},esp:{text:"Festivales Globales",text_long:"Festivales Globales",description:"Los festivales globales generan consenso y pueden a\xf1adir recursos para gastar en otras estrategias culturales."},location:{x:600,y:500},img_normal:"policies/POLICY_CULTURE_2_NORMAL",img_on:"policies/POLICY_CULTURE_2_ON",levels:3,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:.2,effect_on_crises:0,effect_on_pop_high:.1,effect_on_pop_medium:.05,effect_on_pop_low:0,effect_on_income_low:-.1,effect_on_income_low_medium:0,effect_on_income_medium_high:0,effect_on_income_high:.1,effect_on_geo_tropic:0,effect_on_geo_subtropic:0,effect_on_geo_temperate:0,effect_on_geo_polar:0,effect_on_density:0,effect_on_area_large:0,effect_on_area_medium:0,effect_on_area_small:0,cost_1:3,cost_2:4,cost_3:5},{id:11,domain:3,eng:{text:"Global Education",text_long:"Global Education",description:"Education strategies may improve climate change awareness as well as resource production in lower and middle-income countries."},esp:{text:"Educaci\xf3n Global",text_long:"Educaci\xf3n Global",description:"Las estrategias de educaci\xf3n pueden mejorar la concienciaci\xf3n sobre el cambio clim\xe1tico, as\xed como la producci\xf3n de recursos en los pa\xedses de ingresos bajos y medios."},location:{x:300,y:200},img_normal:"policies/POLICY_CULTURE_3_NORMAL",img_on:"policies/POLICY_CULTURE_3_ON",levels:3,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:.1,effect_on_crises:-.05,effect_on_pop_high:.05,effect_on_pop_medium:0,effect_on_pop_low:0,effect_on_income_low:.05,effect_on_income_low_medium:.05,effect_on_income_medium_high:.05,effect_on_income_high:0,effect_on_geo_tropic:0,effect_on_geo_subtropic:0,effect_on_geo_temperate:0,effect_on_geo_polar:0,effect_on_density:0,effect_on_area_large:0,effect_on_area_medium:0,effect_on_area_small:0,cost_1:3,cost_2:4,cost_3:5},{id:12,domain:3,eng:{text:"Celebrity Endorsements",text_long:"Celebrity Endorsements",description:"This policy uses film and music stars to raise awareness. Combined with ecological strategies, it may improve their effectiveness."},esp:{text:"Apoyos de celebridades",text_long:"Apoyos de celebridades",description:"Esta pol\xedtica utiliza estrellas de cine y de m\xfasica para sensibilizar a la opini\xf3n p\xfablica. Combinado con estrategias ecol\xf3gicas, puede mejorar su eficacia."},location:{x:600,y:200},img_normal:"policies/POLICY_CULTURE_4_NORMAL",img_on:"policies/POLICY_CULTURE_4_ON",levels:3,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:.1,effect_on_crises:.1,effect_on_pop_high:-.05,effect_on_pop_medium:0,effect_on_pop_low:0,effect_on_income_low:0,effect_on_income_low_medium:0,effect_on_income_medium_high:0,effect_on_income_high:.05,effect_on_geo_tropic:0,effect_on_geo_subtropic:0,effect_on_geo_temperate:0,effect_on_geo_polar:0,effect_on_density:0,effect_on_area_large:0,effect_on_area_medium:0,effect_on_area_small:0,cost_1:3,cost_2:4,cost_3:5}]},ecology:{eng:{labelText:"Design your Ecological Policy",name:"Ecology"},esp:{labelText:"Dise\xf1e su p\xf3litica ecol\xf3gica",name:"Ecolog\xeda"},policyOptions:[{id:13,domain:4,eng:{text:"Fund Renewable Energy",text_long:"Fund Renewable Energy",description:"This policy is potentially very effective in highly industrialised countries."},esp:{text:"Fondo de Energ\xedas Renovables",text_long:"Fondo de Energ\xedas Renovables",description:"Esta pol\xedtica es potencialmente muy eficaz en los pa\xedses altamente industrializados."},location:{x:300,y:500},img_normal:"policies/POLICY_ECOLOGY_1_NORMAL",img_on:"policies/POLICY_ECOLOGY_1_ON",levels:3,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:.2,effect_on_crises:-.2,effect_on_pop_high:.05,effect_on_pop_medium:0,effect_on_pop_low:0,effect_on_income_low:0,effect_on_income_low_medium:.05,effect_on_income_medium_high:.15,effect_on_income_high:.15,effect_on_geo_tropic:.2,effect_on_geo_subtropic:.1,effect_on_geo_temperate:.05,effect_on_geo_polar:0,effect_on_density:0,effect_on_area_large:0,effect_on_area_medium:0,effect_on_area_small:0,cost_1:3,cost_2:4,cost_3:5},{id:14,domain:4,eng:{text:"Public Transport",text_long:"Public Transport",description:"This policy targets the reduction on greenhouse emissions globally. Particularly effective in urbanised countries."},esp:{text:"Transporte P\xfablico",text_long:"Transporte P\xfablico",description:"Esta pol\xedtica tiene como objetivo la reducci\xf3n de las emisiones de gases de efecto invernadero en todo el mundo. Especialmente eficaz en pa\xedses urbanizados."},location:{x:600,y:500},img_normal:"policies/POLICY_ECOLOGY_2_NORMAL",img_on:"policies/POLICY_ECOLOGY_2_ON",levels:3,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:0,effect_on_crises:-.1,effect_on_pop_high:.1,effect_on_pop_medium:0,effect_on_pop_low:0,effect_on_income_low:.1,effect_on_income_low_medium:.2,effect_on_income_medium_high:.2,effect_on_income_high:.15,effect_on_geo_tropic:0,effect_on_geo_subtropic:0,effect_on_geo_temperate:0,effect_on_geo_polar:0,effect_on_density:0,effect_on_area_large:0,effect_on_area_medium:0,effect_on_area_small:0,cost_1:3,cost_2:4,cost_3:5},{id:15,domain:4,eng:{text:"Green Cities",text_long:"Green Cities",description:"This policy involves the reduction of urban carbon footprint but does not address inequalities."},esp:{text:"Ciudades verdes",text_long:"Ciudades verdes",description:"Esta pol\xedtica implica la reducci\xf3n de la huella de carbono urbana, pero no aborda las desigualdades."},location:{x:300,y:200},img_normal:"policies/POLICY_ECOLOGY_3_NORMAL",img_on:"policies/POLICY_ECOLOGY_3_ON",levels:3,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:.1,effect_on_crises:-.1,effect_on_pop_high:.2,effect_on_pop_medium:0,effect_on_pop_low:0,effect_on_income_low:0,effect_on_income_low_medium:0,effect_on_income_medium_high:.1,effect_on_income_high:.1,effect_on_geo_tropic:.1,effect_on_geo_subtropic:.1,effect_on_geo_temperate:.1,effect_on_geo_polar:0,effect_on_density:0,effect_on_area_large:0,effect_on_area_medium:0,effect_on_area_small:0,cost_1:3,cost_2:4,cost_3:5},{id:16,domain:4,eng:{text:"Global Heritage Trust",text_long:"Global Heritage Trust",description:"This policy boots the creation of national parks and produces better awareness about endangered species."},esp:{text:"Fondo del Patrimonio Mundial",text_long:"Fondo del Patrimonio Mundial",description:"Esta pol\xedtica fomenta la creaci\xf3n de parques nacionales y produce una mayor conciencia sobre las especies en peligro de extinci\xf3n."},location:{x:600,y:200},img_normal:"policies/POLICY_ECOLOGY_4_NORMAL",img_on:"policies/POLICY_ECOLOGY_4_ON",levels:3,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:0,effect_on_crises:-.05,effect_on_pop_high:0,effect_on_pop_medium:0,effect_on_pop_low:0,effect_on_income_low:-.1,effect_on_income_low_medium:0,effect_on_income_medium_high:.1,effect_on_income_high:.15,effect_on_geo_tropic:.1,effect_on_geo_subtropic:0,effect_on_geo_temperate:.05,effect_on_geo_polar:.1,effect_on_density:0,effect_on_area_large:0,effect_on_area_medium:0,effect_on_area_small:0,cost_1:3,cost_2:4,cost_3:5}]}},this.RESOURCE_MATRIX2=[[0],[0,0],[0,0,0],[0,0,0,0],[0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],this.RESOURCE_MATRIX=[[0,.4,-.5,1,0,-.5,-.2,0,.2,.2,.1,0,.1,.1,.1,-.1],[.1,0,-.7,0,0,-.3,-.1,.2,.1,0,-.2,0,.2,.2,.1,0],[-.5,-.5,0,-.8,.2,.8,.2,-.3,.1,.1,1,-.4,.2,.4,.2,.1],[1,.6,-1,0,.2,-.7,.2,.2,.4,.4,-.6,0,-.7,-.8,.2,-1],[.6,-.2,.2,-.6,0,.4,1,-.5,0,.1,.5,-.4,.1,.1,.5,.5],[0,-.1,.5,-.6,.6,0,.4,-.8,.3,.2,.6,-.1,.3,.4,.3,.3],[-.1,-.4,.2,.4,.6,.5,0,-.6,.1,.3,.2,.1,.2,.1,.4,.4],[.1,.4,-.8,.1,-.9,-.7,-.6,0,0,.1,-.6,0,.3,-.3,.1,-.7],[0,.3,.1,.2,.4,-.4,.1,0,0,.6,.3,1,-.3,0,.1,.1],[.3,.1,-.3,.1,.6,-.5,.1,.4,.6,0,.1,.7,-.6,.3,.1,.2],[-.2,.2,.8,-.5,.2,.8,.1,-.7,.5,.2,0,-.4,.6,.5,.8,.7],[.2,0,-.6,.2,.3,.2,.1,-.3,.9,1,.5,0,0,0,.3,.2],[.1,.4,.4,-.4,0,.2,0,.2,-.2,-.5,.1,.1,0,1,.8,.5],[.1,.2,.5,-.4,.1,.5,0,-.4,.1,.4,.7,0,1,0,.5,.3],[.2,.4,.2,.2,0,.2,.6,.1,.2,0,.2,0,1,.8,0,.5],[-.7,-.2,-.1,-1,.2,-.1,.5,-1,0,.6,.3,0,.6,.2,-.1,0]],this.CRISES={WATER_SHORTAGE:{eng:"Water shortage",esp:"Escasez de agua",image:"icons/ICON_CRISIS_WATER_SHORTAGE",effect_on_climate:0,effect_on_population:0,effect_on_global_gdp:0,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:-.2,effect_on_environmental_loss:.3,influence_of_environmental_loss:2,influence_of_preparedness:-.2},FINANCIAL_CRISIS:{eng:"Financial crisis",esp:"Crisis financiera",image:"icons/ICON_CRISIS_CRASH",effect_on_climate:0,effect_on_population:0,effect_on_global_gdp:0,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:-1,effect_on_environmental_loss:0,influence_of_environmental_loss:0,influence_of_preparedness:0},EXTREME_WEATHER_EVENT:{eng:"Extreme weather event",esp:"Evento meteorol\xf3gico extremo",image:"icons/ICON_CRISIS_WEATHER",effect_on_climate:0,effect_on_population:0,effect_on_global_gdp:0,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:-.2,effect_on_environmental_loss:.4,influence_of_environmental_loss:.5,influence_of_preparedness:-.2},FORCED_DISPLACEMENT:{eng:"Forced displacement",esp:"Desplazamiento forzado",image:"icons/ICON_CRISIS_DISPLACEMENT",effect_on_climate:0,effect_on_population:0,effect_on_global_gdp:0,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:-.5,effect_on_environmental_loss:.2,influence_of_environmental_loss:.4,influence_of_preparedness:-.5},EPIDEMIC:{eng:"Epidemic",esp:"Epid\xe9mico",image:"icons/ICON_CRISIS_EPIDEMIC",effect_on_climate:0,effect_on_population:0,effect_on_global_gdp:0,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:-.7,effect_on_environmental_loss:0,influence_of_environmental_loss:.2,influence_of_preparedness:-.2},WAR:{eng:"War",esp:"Guerra",image:"icons/ICON_CRISIS_WAR",effect_on_climate:0,effect_on_population:0,effect_on_global_gdp:0,effect_on_transmissability:0,effect_on_infectivity:0,effect_on_resources:-.8,effect_on_environmental_loss:-.1,influence_of_environmental_loss:.3,influence_of_preparedness:-.2}},this.TUTORIAL_MESSAGES={FIRST_RESOURCE_SHOWN:{eng:"Click on the blue icons when they appear. It will add resources to your wallet.",esp:"Haga clic en los iconos azules cuando aparezcan. A\xf1adir\xe1 recursos a su billetera."},FIRST_RESOURCE_CLICKED:{eng:'Click on the "POLICY" button to invest your resources and build your strategy. Remember that not all policies are equally effective in each country and that some policies are only effective if combined with other ones.',esp:'Haga clic en el bot\xf3n "P\xd3LIZA" para invertir sus recursos y construir su estrategia. Recuerde que no todas las pol\xedticas son igualmente eficaces en cada pa\xeds y que algunas s\xf3lo lo son si se combinan con otras.'},RANDOM_1:{eng:"Click on one country to check the progress of environmental loss and the effectiveness of your policy on the preparedness of that country.",esp:"Haga clic en un pa\xeds para comprobar el progreso de la p\xe9rdida medioambiental y la eficacia de su pol\xedtica sobre la preparaci\xf3n de ese pa\xeds."},RANDOM_2:{eng:'Click on "STATS" to check the progress of the game and the global effectiveness of your policy platform.',esp:'Haga clic en "STATS" para comprobar el progreso del juego y la eficacia global de su plataforma de pol\xedticas.'},RANDOM_3:{eng:"You can pause or control the speed of the game by clicking on the top-right buttons.",esp:"Puedes pausar o controlar la velocidad del juego haciendo clic en los botones de la parte superior derecha."},RANDOM_4:{eng:"Keep an eye on the message bar at the top to be aware of unexpected events and adapt your strategy.",esp:"Vigile la barra de mensajes en la parte superior para estar al tanto de los eventos inesperados y adaptar su estrategia."}},this.NARRATIVES={n2048:{BAD:{loss:20,eng:["Because of the high level of environmental damage globally, surface waters have become corrosive to aragonite shells of pteropods, forever altering the Antarctic sea ecosystem. Act fast to avoid worse consequences to the Antarctic continent."],esp:["Debido al alto nivel de da\xf1o ambiental a nivel mundial, las aguas superficiales se han vuelto corrosivas para las conchas de aragonita de los pter\xf3podos, alterando para siempre el ecosistema marino ant\xe1rtico. Actuar con rapidez para evitar las peores consecuencias para el continente ant\xe1rtico."]},VERY_BAD:{loss:40,eng:["Sea levels are rising because of the contribution of Antarctic glaciers and ice shelves. Their retreat has exposed new ice-free areas, particularly on the Antarctic Peninsula, the northernmost part of the continent, where new invasive species have arrived. Act fast to avoid worse consequences to the Antarctic continent."],esp:["El nivel del mar est\xe1 subiendo debido a la contribuci\xf3n de los glaciares y las plataformas de hielo de la Ant\xe1rtida. Su retirada ha puesto al descubierto nuevas \xe1reas libres de hielo, particularmente en la Pen\xednsula Ant\xe1rtica, la parte m\xe1s septentrional del continente, donde han llegado nuevas especies invasoras. Actuar con rapidez para evitar las peores consecuencias para el continente ant\xe1rtico."]},VERY_VERY_BAD:{loss:60,eng:["In response to new phenomena such as transport of soil particles to the ocean by increased run-off of ice melt from the continent, interactions between key species (especially krill, penguins, seals and whales) are unexpectedly changing. Catastrophic declines in some communities prelude to the extinction of many of these species. Act fast to avoid worse consequences to the Antarctic continent."],esp:["En respuesta a nuevos fen\xf3menos como el transporte de part\xedculas de suelo al oc\xe9ano por el aumento de la escorrent\xeda del hielo derretido del continente, las interacciones entre especies clave (especialmente el krill, los ping\xfcinos, las focas y las ballenas) est\xe1n cambiando inesperadamente. Las disminuciones catastr\xf3ficas en algunas comunidades son el preludio de la extinci\xf3n de muchas de estas especies. Actuar con rapidez para evitar las peores consecuencias para el continente ant\xe1rtico."]},VERY_VERY_VERY_BAD:{loss:80,eng:["Owing to tremendous pressure for resources to support the world's population, Antarctica is becoming more widely exploited. The Commission for the Conservation of Antarctic Marine Living Resources (CCAMLR), which is responsible for setting the limits on fishing in the region, is weakening. As a result, many new marine species are now being harvested in the Southern Ocean. In addition, several nations are attempting to rescind Article 7 of the Protocol on Environmental Protection to the Antarctic Treaty, which prohibits mineral resource exploitation. The destruction of Antarctica as we know it seems inevitable."],esp:["Debido a la tremenda presi\xf3n por recursos para apoyar a la poblaci\xf3n mundial, la Ant\xe1rtida se est\xe1 explotando cada vez m\xe1s. La Comisi\xf3n para la Conservaci\xf3n de los Recursos Vivos Marinos Ant\xe1rticos (CCAMLR), responsable de fijar los l\xedmites de pesca en la regi\xf3n, se est\xe1 debilitando. Como resultado, muchas nuevas especies marinas est\xe1n siendo capturadas en el Oc\xe9ano Austral. Adem\xe1s, varias naciones est\xe1n intentando rescindir el Art\xedculo 7 del Protocolo sobre Protecci\xf3n Ambiental del Tratado Ant\xe1rtico, que proh\xedbe la explotaci\xf3n de recursos minerales. La destrucci\xf3n de la Ant\xe1rtida tal como la conocemos parece inevitable."]},GOOD:{loss:0,eng:["While some ice shelves in the Antarctic Peninsula and Amundsen Sea appear forever lost, the thinning rates observed in the large ice shelves for the period 1994\u20132012 remained fairly steady through to 2048. The marine ice cliff instability has mostly been limited to a few outlet glaciers in the Amundsen Sea sector of West Antarctica and has not reached East Antarctica. Keep improving your global policy strategy to save Antarctica.","Although ocean acidification is continuing, the impact is stabilizing as atmospheric CO2 levels are decreasing. Some Antarctic population declines have been recorded in sensitive species, but others adapted, resulting in less change than was initially forecast. Seal and seabird populations will probably be able to adapt to the new ecosystemic conditions if extreme events due to climate change become less frequent.","Thanks to the strong action in mitigation greenhouse emissions globally, changes in the temperature and salinity of the Southern Ocean are reversing. The Antarctic Circumpolar Current is shifting towards the Equator, therefore contributing to cooling  the Southern Ocean. Changes in wind-driven ocean currents are reducing the exposure of the floating ice shelves to basal melt by warm ocean waters. However, the reduction in ocean heat transport to the ice shelf cavities is coming too late to save some West Antarctic ice shelves and ice tongues. Keep acting on your global policy strategy to save Antarctica."],esp:["Mientras que algunas plataformas de hielo en la Pen\xednsula Ant\xe1rtica y el Mar de Amundsen parecen haberse perdido para siempre, las tasas de adelgazamiento observadas en las grandes plataformas de hielo durante el per\xedodo 1994-2012 se mantuvieron bastante estables hasta 2048. La inestabilidad de los acantilados de hielo marino se ha limitado principalmente a unos pocos glaciares de salida en el sector del Mar de Amundsen de la Ant\xe1rtida occidental y no ha llegado a la Ant\xe1rtida oriental. Sigan mejorando su estrategia de pol\xedtica global para salvar a la Ant\xe1rtida.","Aunque la acidificaci\xf3n de los oc\xe9anos contin\xfaa, su impacto se estabiliza debido a que los niveles atmosf\xe9ricos de CO2 est\xe1n decreciendo. Se ha registrado una ca\xedda en las poblaciones ant\xe1rticas de algunas especies cr\xedticas, pero otras especies se han adaptado, resultando en un cambio menos dram\xe1tico que el inicialmente pronosticado. Si los eventos clim\xe1ticos extremos se vuelven menos frecuentes, es probable que las poblaciones de focas y aves marinas puedan adaptarse a las nuevas condiciones ecosist\xe9micas.","Gracias a las en\xe9rgicas medidas de mitigaci\xf3n de las emisiones de gases de efecto invernadero en todo el mundo, los cambios en la temperatura y la salinidad del Oc\xe9ano Austral se est\xe1n invirtiendo. La Corriente Circumpolar Ant\xe1rtica se desplaza hacia el Ecuador, contribuyendo as\xed a enfriar el Oc\xe9ano Austral. Los cambios en las corrientes oce\xe1nicas impulsadas por el viento est\xe1n reduciendo la exposici\xf3n de las plataformas de hielo flotante al derretimiento basal por las aguas c\xe1lidas del oc\xe9ano. Sin embargo, la reducci\xf3n en el transporte de calor oce\xe1nico a las cavidades de la plataforma de hielo est\xe1 llegando demasiado tarde para salvar algunas plataformas de hielo y lenguas de hielo de la Ant\xe1rtida Occidental. Sigan actuando en su estrategia de pol\xedtica global para salvar a la Ant\xe1rtida."]}},n2070:{BAD:{loss:80,eng:["You lost! Your policy platform did not achieve its aim and an unprecedented environmental catastrophe is leading to a collapse of organised society globally. An international armed conflict over the use of Antarctic water and underground resources has sparked in 2069 with large scale human casualties. Forced human migration has spiked in 2048, when low-rise coastal cities needed to be abandoned and half the species on the planet have gone extinct. Carbon footprint is decreasing, but only due to population loss. Underground and low-orbit settlements for wealthy people are under construction, whilst a large majority of the world\u2019s population will not survive the combination of climate wars and extreme climate events."],esp:["\xa1Perdiste! Su plataforma pol\xedtica no ha alcanzado su objetivo y una cat\xe1strofe medioambiental sin precedentes est\xe1 llevando a un colapso de la sociedad organizada a nivel mundial. Un conflicto armado internacional por el uso del agua de la Ant\xe1rtida y los recursos subterr\xe1neos se desencaden\xf3 en 2069 con grandes p\xe9rdidas humanas. La migraci\xf3n forzada de seres humanos ha aumentado en 2048, cuando las ciudades costeras de baja altura necesitaban ser abandonadas y la mitad de las especies del planeta se han extinguido. La huella de carbono est\xe1 disminuyendo, pero s\xf3lo debido a la p\xe9rdida de poblaci\xf3n. Se est\xe1n construyendo asentamientos subterr\xe1neos y en \xf3rbita baja para personas ricas, mientras que una gran mayor\xeda de la poblaci\xf3n mundial no sobrevivir\xe1 a la combinaci\xf3n de guerras clim\xe1ticas y fen\xf3menos clim\xe1ticos extremos."]},MID:{loss:20,eng:["You lost! In spite of your efforts, which have curbed climate change and reduced global carbon footprint, your policy platform was not strong enough to avoid environmental catastrophe. Whilst some Antarctic species have adapted to the new habitat conditions, the loss of ice shelves, the change in salinity, temperature and acidity of the Southern Ocean have completely transformed the Antarctic Continent. Mining explorations are taking place in the eastern side of the continent, after a number of states called for a review of the Environmental Protocol to the Antarctic Treaty. Elsewhere in the world, several cities have become inhospitable and climate migrants are causing several political struggles globally. The future of humanity is at risk."],esp:["\xa1Perdiste! A pesar de sus esfuerzos, que han frenado el cambio clim\xe1tico y reducido la huella de carbono global, su plataforma pol\xedtica no era lo suficientemente fuerte como para evitar una cat\xe1strofe medioambiental. Mientras que algunas especies ant\xe1rticas se han adaptado a las nuevas condiciones del h\xe1bitat, la p\xe9rdida de las plataformas de hielo, el cambio en la salinidad, la temperatura y la acidez del Oc\xe9ano Austral han transformado completamente el continente ant\xe1rtico. Las exploraciones mineras se est\xe1n llevando a cabo en la parte oriental del continente, despu\xe9s de que varios estados solicitaran una revisi\xf3n del Protocolo Ambiental del Tratado Ant\xe1rtico. En otras partes del mundo, varias ciudades se han vuelto inh\xf3spitas y los migrantes clim\xe1ticos est\xe1n causando varias luchas pol\xedticas a nivel mundial. El futuro de la humanidad est\xe1 en peligro."]},GOOD:{loss:0,eng:["You won! Your global policy platform has arrested climate change and reverted its negative effects on Antarctica. Most polar species have adapted to the new environmental conditions and your policy efforts have allowed a renegotiation of the Antarctic Treaty, which imposes much stricter limitations on human presence and on the exploitation of resources on the continent. Sea level rise has remained contained within 6cm, whilst less than 10% of Antarctic ice has been lost. Congratulations for avoiding an environmental catastrophe."],esp:["\xa1Ganaste! Tu plataforma pol\xedtica global ha logrado detener el cambio clim\xe1tico y revertir sus efectos negativos sobre la Ant\xe1rtida. La mayor\xeda de las especies polares se han adaptado a las nuevas condiciones clim\xe1ticas y tus esfuerzos pol\xedticos han permitido la renegociaci\xf3n del Tratado Ant\xe1rtico, el cual impone l\xedmites m\xe1s estrictos a la presencia humana y la explotaci\xf3n de recursos en el continente. El nivel del mar ha permanecido contenido en 6cm y s\xf3lo un 10% del hielo Ant\xe1rtico se ha perdido. Felicitaciones por evitar una cat\xe1strofe ambiental."]}}},this.lang={welcome:{eng:"Welcome to Antarctic Futures!",esp:"\xa1Bienvenido a Futuros Ant\xe1rcticos!"},about_game:{eng:"This game is developed as part of a research project, 'Antarctic Cities and the Global Commons'. As part of our research, we collect your IP address, as well as anonymous data during the game. To learn more, click the 'Learn More' button below.",esp:"Este juego forma parte del proyecto de investigaci\xf3n \u201cCiudades Ant\xe1rticas y Bienes Comunes Globales\u201d. Como parte de nuestra investigaci\xf3n recopilamos tu direcci\xf3n de IP as\xed como algunos datos an\xf3nimos de la sesi\xf3n de juego."},consent:{eng:"I agree to participate in this research project, and understand my gameplay data will be recorded anonymously.",esp:"Acepto participar de este proyecto de investigaci\xf3n y entiendo que los datos de mi sesi\xf3n de juego ser\xe1n recopilados de forma an\xf3nima."},commands_play:{eng:"PLAY",esp:"JUEGA"},commands_learn_more:{eng:"LEARN MORE",esp:"APRENDA M\xc1S"},commands_policy:{eng:"POLICY",esp:"P\xd3LITICA"},commands_loss:{eng:"Loss",esp:"P\xe9rdida"},commands_prepared:{eng:"Prepared",esp:"Preparado"},commands_stats:{eng:"STATS",esp:"ESTAD\xcdSTICA"},world_label:{eng:"World",esp:"Mundo"},crisis_prefix:{eng:"A ",esp:"Un "},crisis_suffix:{eng:" is taking place in ",esp:" tiene lugar en "},crisis_explanation:{eng:" Crises are unexpected events due to environmental loss. Click on the crisis icon to slow the loss and increase the preparedness of the country to minimise the risk of further crises.",esp:" Las crisis son eventos inesperados como consecuencia de la degradaci\xf3n ambiental. Haz clic sobre el \xedcono de crisis para detener el da\xf1o ambiental; aumenta el nivel de preparaci\xf3n de los pa\xedses para minimizar el riesgo de nuevas crisis."},crisis_alert:{eng:"Crisis alert!",esp:"\xa1Alerta de Crisis!"},bulletin:{eng:"Antarctic Bulletin, year ",esp:"Bolet\xedn Ant\xe1rtico, a\xf1o "},start_tutorial:{eng:"Start Tutorial",esp:"Iniciar Tutorial"},start_tutorial_skip:{eng:"Straight to Game",esp:"Directo al juego"},start_prepare:{eng:"Prepare the world...",esp:"Preparar al mundo..."},start_mission_a:{eng:"In 2019, your global policy mission begins in ",esp:"En el 2019 tu misi\xf3n pol\xedtica global comienza en "},start_mission_b:{eng:". You have until 2070 to save the Antarctic continent. Invest in policies that will reduce the effects of climate change, arrest environmental loss and increase the preparedness of each country.",esp:". Tienes tiempo hasta el a\xf1o 2070 para salvar el continente Ant\xe1rtico. Invert\xed en pol\xedticas que ayuden a reducir los efectos del cambio clim\xe1tico, evitar la p\xe9rdida de medio ambiente y aumentar el nivel de preparaci\xf3n de cada pa\xeds."},crisis_title:{eng:"Congratulations!",esp:"Felicitaciones!"},crisis_message:{eng:"You have averted the ",esp:"Has evitado el "},policy_platform_title:{eng:"Build a policy platform",esp:"Construir una plataforma de pol\xedticas"},policy_platform_hint:{eng:"<<< Select one of these policies to invest in it!",esp:"<<< \xa1Seleccione una de estas p\xf3liticas para invertir en ella!"},policy_platform_cost:{eng:"Cost: ",esp:"Costo: "},policy_platform_invest:{eng:"Invest in this policy",esp:"Invierta en esta pol\xedtica"},policy_platform_completed:{eng:"Policy completed!",esp:"\xa1P\xf3litica completa!"},policy_platform_more_resources:{eng:"You need more resources!",esp:"\xa1Necesita m\xe1s recursos!"},stats_world:{eng:"World",esp:"Mundo"},stats_countries:{eng:"Countries",esp:"Pa\xedses"},stats_trends:{eng:"Trends",esp:"Tendencias"},stats_country:{eng:"Country",esp:"Pa\xeds"},stats_year:{eng:"Year ",esp:"A\xf1o "},stats_year_message_a:{eng:"You have ",esp:"Usted tiene "},stats_year_message_b:{eng:" years until the end of the simulation.",esp:" a\xf1os hasta el final de la simulaci\xf3n."},stats_loss:{eng:"Environmental loss",esp:"P\xe9rdida ambiental"},stats_loss_message_a:{eng:"Since ",esp:"Desde que "},stats_loss_message_b:{eng:", the global environment has declined by ",esp:", el medio ambiente mundial se ha deteriorado en "},stats_preparedness:{eng:"Preparedness ",esp:"Preparaci\xf3n "},stats_preparedness_message_a:{eng:"Thanks to your policy platform, ",esp:"Gracias a su plataforma de p\xf3liticas, "},stats_preparedness_message_b:{eng:" of the world is now more ready to take action against climate change. ",esp:" del mundo est\xe1 ahora m\xe1s preparado para tomar medidas contra el cambio clim\xe1tico. "},stats_track:{eng:"Track how the world is doing",esp:"Siga la pista de c\xf3mo le va al mundo"}},this.scenarioData={version:"1.0",eng:{name:"Scenario: 'Choosing the future of Antarctica'",description:"Obtained from Rintoul et al. (2018), 'Choosing the future of Antarctica', Nature, 558, 233-241",icon:"",feedback_email:"",threat_type:"",threat_type_locked:"",threat_name:"",popup_1_title:"Welcome to Antarctic Futures",popup_1_description:"The future of Antarctica and the future of the world are deeply connected. What kind of policy action will halt climate change and save Antarctica from environmental destruction? The aim of the game is to build the right global policy platform to survive until year 2070.",popup_2_title:"OK",popup_2_description:"Click on the blue icons to collect resources!",messages:{negative:["Global temperatures are rising, and could be 3.5 degrees higher by 2070!","New ice-free areas are appearing on the Antarctic continent!","Warming of Southern Oceans pose risks to shellfish and other marine life.","Fishing, tourism and commercial shipping are expanding in the Southern Ocean!","Globally, sea level rises cost coastal cities $1 trillion USD each year!","Ships can now access new parts of the Antarctic continent...","Warmer waters see a rise in baleen whales!","Southern Ocean fish and penguin populations are declining...","Invasive species - grasses, insects, biota - are settling permanently in Antarctica...","Calls to protect endangered species appear to be ignored by Antarctic Treaty signatories...","Human population is on track to exceed 10 billion by 2070...","New technologies are enabling polar mining for oil and other resources!","Antarctica tourism reaches 1 million visitors per year!"],positive:["Finally! The physical environment of Antarctica and the Southern Ocean is returning to 2020 levels...","'Hey Jude'! Ozone levels in the Antarctic stratosphere are returning to the values of the 1960s...","Ocean acidification is no longer increasing dramatically...","Major ice shelves remain in tact... for now.","Sea level rises are restricted to 6cm per annum!","Systematic conservation begins...","Great! Invasive species are unable to settle permanently on the Antarctic!","Decisive steps are being taken to limit the impact of increased human engagement with Antarctica.","Truly global action on the Sustainable Development Goals is now underway!","Eureka! Scientists discover new compounds from Antarctic biota, with major industrial and medical applications..."]}},esp:{name:"Escenario: 'Choosing the future of Antarctica'",description:"Obtenido de Rintoul et al. (2018), 'Choosing the future of Antarctica', Nature, 558, 233-241",icon:"",feedback_email:"",threat_type:"",threat_type_locked:"",threat_name:"",popup_1_title:"\xa1Bienvenido a Futuros Ant\xe1rcticos!",popup_1_description:"El futuro de la Ant\xe1rtida y el futuro del planeta est\xe1n profundamente interconectados \xbfQu\xe9 tipo de pol\xedticas pueden detener el cambio clim\xe1tico global y salvar a la Ant\xe1rtida de la destrucci\xf3n medioambiental? El objetivo del juego es construir la plataforma pol\xedtica global correcta para sobrevivir hasta el a\xf1o 2070.",popup_2_title:"OK",popup_2_description:"Haga clic en los iconos azules para reunir recursos!",messages:{negative:["Las temperaturas globales est\xe1n subiendo, y podr\xedan ser 3,5 grados m\xe1s altas para el a\xf1o 2070!","Nuevas \xe1reas libres de hielo est\xe1n apareciendo en el continente ant\xe1rtico!","El calentamiento de los oc\xe9anos meridionales plantea riesgos para los mariscos y otras formas de vida marina.","La pesca, el turismo y la navegaci\xf3n comercial se est\xe1n expandiendo en el Oc\xe9ano Ant\xe1rtico!","A nivel global, el aumento del nivel del mar cuesta a las ciudades costeras 1 trill\xf3n de d\xf3lares cada a\xf1o.","Los barcos ya pueden acceder a nuevas partes del continente ant\xe1rtico....","Las aguas m\xe1s c\xe1lidas ven un aumento en las ballenas con barbas!","Las poblaciones de peces y ping\xfcinos del Oc\xe9ano Austral est\xe1n disminuyendo....","Las especies invasoras - hierbas, insectos, biota - se est\xe1n asentando permanentemente en la Ant\xe1rtida....","Los llamamientos para proteger las especies amenazadas parecen ser ignorados por los signatarios del Tratado Ant\xe1rtico...","La poblaci\xf3n humana va camino de superar los 10.000 millones para 2070...","Las nuevas tecnolog\xedas est\xe1n permitiendo la miner\xeda polar para el petr\xf3leo y otros recursos!","\xa1El turismo Ant\xe1rtico alcanza 1 mill\xf3n de visitantes al a\xf1o!"],positive:["\xa1Finalmente! El entorno f\xedsico de la Ant\xe1rtida y el Oc\xe9ano Ant\xe1rtico est\xe1 volviendo a los niveles del a\xf1o 2020....","\xa1Hey Jude! Los niveles de ozono en la estrat\xf3sfera ant\xe1rtica est\xe1n volviendo a los valores de 1960....","La acidificaci\xf3n de los oc\xe9anos ya no aumenta de modo dram\xe1tico....","Las principales plataformas de hielo permanecen intactas.... por ahora.","El aumento del nivel del mar est\xe1 restringido a 6 cm por a\xf1o!","Comienza una pol\xedtica de conservaci\xf3n sistem\xe1tica....","\xa1Genial! Las especies invasoras no pueden establecerse permanentemente en la Ant\xe1rtida!","Se est\xe1n tomando medidas decisivas para limitar el impacto del aumento de la participaci\xf3n humana en la Ant\xe1rtida.","La acci\xf3n verdaderamente global sobre los Objetivos de Desarrollo Sostenible ya est\xe1 en marcha!","\xa1Eureka! Cient\xedficos descubren nuevos compuestos en la biota Ant\xe1rtica con aplicaciones m\xe9dicas e industriales de gran alcance...."]}},start_country:"",start_country_locked:"",start_country_percentage_affected:"",start_country_percentage_dead:"",start_country_percentage_zombie:"",scenario_score_adjusted:"",event_restriction:"",lock_difficulty:"",gene_selection:"",allow_cheats:"",start_specified:1,start_day:1,start_month:1,start_year:2020,target_month:1,target_year:2070,starting_resources:8,threat_details:{threat_template:"",starting_conditions:{starting_loss:.1,starting_infectivity:1,starting_severity:1,starting_lethality:10},transmission:{transmission_air:1,transmission_sea:1,transmission_land:1},environmental_effectivness:{wealthy_country:0,poor_country:1,urban_country:1,rural_country:1,hot_country:.1,cold_country:.1,humid_country:1,arid_country:1},other_stats:{cure_requirement:0,mutation_likelihood:.5},advanced_stats:{loss_increase_speed:.1,minimum_loss_increase:.02,infectivity_increase_speed:1,minimum_infectivity_increase:.1,severity_increase_speed:1.1,minimum_severity_increase:1,lethality_increase_speed:.05,minimum_lethality_increase_speed:.4,enable_corpse_transmission:!1,enable_land_transmission:!0,enable_sea_transmission:!0,enable_air_transmission:!0,infected_points_pot:0}}},this.automateScripts=[{name:"Green Growth",resourcesProb:.8,crisisDuration:10,fastForward:!0,policyEvents:[{counter:480,policyID:1},{counter:960,policyID:5},{counter:1440,policyID:13},{counter:1920,policyID:2},{counter:2400,policyID:6},{counter:2880,policyID:14},{counter:3360,policyID:4},{counter:3840,policyID:7},{counter:4320,policyID:15},{counter:4800,policyID:8},{counter:5280,policyID:16},{counter:5760,policyID:1},{counter:6240,policyID:6},{counter:6720,policyID:13},{counter:7200,policyID:2},{counter:7680,policyID:8},{counter:8160,policyID:14},{counter:8640,policyID:4},{counter:9120,policyID:15},{counter:9600,policyID:16},{counter:10080,policyID:1},{counter:10560,policyID:8},{counter:11040,policyID:13},{counter:11520,policyID:2},{counter:12e3,policyID:4}]},{name:"Democratic Ecosocialism",resourcesProb:.8,crisisDuration:10,fastForward:!0,policyEvents:[{counter:480,policyID:2},{counter:960,policyID:5},{counter:1440,policyID:9},{counter:1920,policyID:13},{counter:2400,policyID:3},{counter:2880,policyID:6},{counter:3360,policyID:10},{counter:3840,policyID:14},{counter:4320,policyID:3},{counter:4800,policyID:7},{counter:5280,policyID:11},{counter:5760,policyID:15},{counter:6240,policyID:16},{counter:6720,policyID:13},{counter:7200,policyID:14},{counter:7680,policyID:15},{counter:8160,policyID:16},{counter:8640,policyID:14},{counter:9120,policyID:15}]},{name:"Eco totalitarian",resourcesProb:.8,crisisDuration:10,fastForward:!0,policyEvents:[{counter:480,policyID:1},{counter:960,policyID:7},{counter:1440,policyID:13},{counter:1920,policyID:14},{counter:2400,policyID:15},{counter:2880,policyID:16},{counter:3360,policyID:1},{counter:3840,policyID:7},{counter:4320,policyID:13},{counter:4800,policyID:14},{counter:5280,policyID:16},{counter:5760,policyID:1},{counter:6240,policyID:7},{counter:6720,policyID:13},{counter:7200,policyID:14},{counter:7680,policyID:16}]},{name:"Green Internationalist",resourcesProb:.8,crisisDuration:10,fastForward:!0,policyEvents:[{counter:480,policyID:1},{counter:960,policyID:5},{counter:1440,policyID:9},{counter:1920,policyID:13},{counter:2400,policyID:2},{counter:2880,policyID:7},{counter:3360,policyID:10},{counter:3840,policyID:14},{counter:4320,policyID:4},{counter:4800,policyID:7},{counter:5280,policyID:11},{counter:5760,policyID:15},{counter:6240,policyID:4},{counter:6720,policyID:12},{counter:7200,policyID:16},{counter:7680,policyID:9},{counter:8160,policyID:13},{counter:8640,policyID:10},{counter:9120,policyID:14},{counter:9600,policyID:11},{counter:10080,policyID:15},{counter:10560,policyID:12},{counter:11040,policyID:16},{counter:11520,policyID:12},{counter:12e3,policyID:16},{counter:12480,policyID:12},{counter:12960,policyID:16}]},{name:"Climate-change sceptic",resourcesProb:.8,crisisDuration:10,fastForward:!0,policyEvents:[{counter:480,policyID:1},{counter:960,policyID:5},{counter:1440,policyID:9},{counter:1920,policyID:15},{counter:2400,policyID:2},{counter:2880,policyID:6},{counter:3360,policyID:9},{counter:3840,policyID:3},{counter:4320,policyID:7},{counter:4800,policyID:4},{counter:5280,policyID:8},{counter:5760,policyID:1},{counter:6240,policyID:5},{counter:6720,policyID:2},{counter:7200,policyID:6},{counter:7680,policyID:3},{counter:8160,policyID:7},{counter:8640,policyID:4},{counter:9120,policyID:8},{counter:9600,policyID:1},{counter:10080,policyID:6},{counter:10560,policyID:2},{counter:11040,policyID:7},{counter:11520,policyID:3},{counter:12e3,policyID:8},{counter:11520,policyID:3},{counter:12e3,policyID:8},{counter:12e3,policyID:4}]},{name:"Do nothing",resourcesProb:.8,crisisDuration:10,fastForward:!0,policyEvents:[]}],this.quizzes=[{id:1,quiz:{eng:"As access to the Antarctic coast has become easier, thanks to rising temperatures and ice melt, <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Krill'>Antarctic krill</color> is being fished to produce protein-rich animal feed. This is causing a decline in many other marine species around the continent. What can be done?",esp:"A medida que el aumento de las temperaturas y el derretimiento del hielo han facilitado el acceso a la costa ant\xe1rtica, se est\xe1 pescando <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/Euphausiacea'>krill ant\xe1rtico</color> para producir alimentaci\xf3n animal rica en prote\xednas. Esto est\xe1 llevando a la disminuci\xf3n en muchas otras especies marinas en todo el continente. \xbfQu\xe9 se puede hacer?"},wrong_answer:{eng:"Establish a <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Marine_protected_area'>marine protected area</color>?",esp:"\xbfEstablecer un <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/%C3%81rea_marina_protegida'>\xe1rea marina protegida</color>?"},right_answer:{eng:"Lobby the parties to the <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Antarctic_Treaty_System'>Antarctic Treaty</color> secure Antarctica as a natural reserve and establish a <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Moratorium_(law)'>moratorium</color> on fishing in the Southern Ocean?",esp:"\xbfEjercer presi\xf3n sobre las partes del <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/Tratado_Ant%C3%A1rtico'>Tratado Ant\xe1rtico</color> para asegurar la Ant\xe1rtida como reserva natural y establecer una <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Moratorium_(law)'>moratoria</color> sobre la pesca en el Oc\xe9ano Austral?"}},{id:2,quiz:{eng:"Because of the <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Retreat_of_glaciers_since_1850#Antarctica'>retreat of glaciers</color> on the Antarctic peninsula, two <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Invasive_species'>invasive species</color> have been found to be spreading without control, threatening the local ecosystem. What can be done?",esp:"Se ha descubierto que dos <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/Especie_invasora'>especies invasoras</color> se extienden sin control y amenazan el ecosistema local, debido al <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/Retroceso_de_los_glaciares_desde_1850#Ant%C3%A1rtida'>retroceso de los glaciares</color> en la pen\xednsula ant\xe1rtica. \xbfQu\xe9 se puede hacer?"},wrong_answer:{eng:"Start a social media campaign to support research on non-native invaders by the <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Antarctic_Treaty_System'>Antarctic Treaty\u2019s</color> Committee for Environmental Protection?",esp:"\xbfIniciar una campa\xf1a en los medios de comunicaci\xf3n social para apoyar la investigaci\xf3n sobre invasores ex\xf3ticos por parte del Comit\xe9 para la Protecci\xf3n del Medio Ambiente del <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/Tratado_Ant%C3%A1rtico'>Tratado Ant\xe1rtico</color>?"},right_answer:{eng:"Adopt a systematic, <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/DNA_barcoding'>DNA barcoding</color> and web-based surveillance system, which will enable rapid identification of other \u2018unusual\u2019 species in order to curb their spread on the peninsula?",esp:"\xbfAdoptar un sistema de vigilancia sistem\xe1tico, basado en <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/%C3%81cido_desoxirribonucleico'>c\xf3digos de barras de ADN</color> y en la web, que permita la r\xe1pida identificaci\xf3n de otras especies \u2018inusuales\u2018 para frenar su propagaci\xf3n en la pen\xednsula?"}},{id:3,quiz:{eng:"Because of a global shortage in key minerals, a few nations have started investigating resource potential and extraction technologies in Antarctica, thinly veiled under the guise of scientific exploration. Environmental experts are worried that secret mines will appear on the continent, endangering the ecosystem. What can be done?",esp:"Debido a la escasez mundial de minerales clave, algunas naciones han comenzado a investigar el potencial de los recursos y las tecnolog\xedas de extracci\xf3n en la Ant\xe1rtida, apenas velado bajo el pretexto de la exploraci\xf3n cient\xedfica. A los expertos en medio ambiente les preocupa que aparezcan minas secretas en el continente, poniendo en peligro el ecosistema. \xbfQu\xe9 se puede hacer?"},wrong_answer:{eng:'Call upon the Antarctic Treaty parties to rescind Article 7 of the <color=#AAAAFF click="handler" param=\'https://en.wikipedia.org/wiki/Protocol_on_Environmental_Protection_to_the_Antarctic_Treaty>Protocol on Environmental Protection to the Antarctic Treaty</color>?',esp:"\xbfLlamar a las partes del Tratado Ant\xe1rtico a rescindir el art\xedculo 7 del Protocolo de <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/Protocolo_al_Tratado_Ant%C3%A1rtico_sobre_Protecci%C3%B3n_del_Medio_Ambiente'>Protecci\xf3n Ambiental del Tratado Ant\xe1rtico</color>?"},right_answer:{eng:'Call upon the Antarctic Treaty parties to reinforce Article 7 of the <color=#AAAAFF click="handler" param=\'https://en.wikipedia.org/wiki/Protocol_on_Environmental_Protection_to_the_Antarctic_Treaty>Protocol on Environmental Protection to the Antarctic Treaty</color>?',esp:"\xbfLlamar a las partes del Tratado Ant\xe1rtico a reforzar el art\xedculo 7 del Protocolo de <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/Protocolo_al_Tratado_Ant%C3%A1rtico_sobre_Protecci%C3%B3n_del_Medio_Ambiente'>Protecci\xf3n Ambiental del Tratado Ant\xe1rtico</color>?"}},{id:4,quiz:{eng:"Mass loss from the melting Antarctic Ice Sheet is contributing to global sea level rise and continues to accelerate. Antarctica now makes the largest contribution to the rise in global mean sea level, exceeding the contribution from <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Thermal_expansion'>thermal expansion</color>, the retreat of mountain glaciers and melting of the <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Greenland_ice_sheet'>Greenland Ice Sheet</color>. What can be done?",esp:"La p\xe9rdida masiva de la capa de hielo ant\xe1rtico en proceso de derretimiento est\xe1 contribuyendo a la elevaci\xf3n del nivel del mar a nivel mundial y contin\xfaa aceler\xe1ndose. El aporte ant\xe1rtico al aumento del nivel medio del mar mundial es actualmente el m\xe1s importante, superando la contribuci\xf3n de la <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/Expansi%C3%B3n_t%C3%A9rmica'>expansi\xf3n t\xe9rmica</color>, el retroceso de los glaciares monta\xf1osos y el derretimiento de la <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/Capa_de_hielo_de_Groenlandia'>capa de hielo de Groenlandia</color>. \xbfQu\xe9 se puede hacer?"},wrong_answer:{eng:"Lobby the Antarctic treaty parties to test a geoengineering solution that delays sea level rise by pumping seawater onto the Antarctic continent to be stored as ice, with power supplied by 850,000 1.5-MW wind turbines?",esp:"\xbfPresionar a las partes del <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/Tratado_Ant%C3%A1rtico'>Tratado Ant\xe1rtico</color> para probar una soluci\xf3n de geoingenier\xeda que retrase la subida del nivel del mar bombeando agua de mar al continente ant\xe1rtico para almacenarla como hielo, con la energ\xeda suministrada por 850 000 turbinas e\xf3licas de 1,5 MW?"},right_answer:{eng:"Lobby the UN to adopt a stricter temperature increase target and a <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Moratorium_(law)'>moratorium</color> on new <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Fossil_fuel'>fossil fuel</color> explorations?",esp:"\xbfPresionar a la ONU para que adopte un objetivo m\xe1s estricto para limitar el aumento de la temperatura y una <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Moratorium_(law)'>moratoria</color> de las nuevas exploraciones de <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/Hidrocarburos'>hidrocarburos</color>?"}},{id:5,quiz:{eng:"With the increase of tourism to Antarctica, and the construction of hotels in the Antarctic Peninsula, alien plants have spread, threatening the local ecosystem. What can be done?",esp:"Con el aumento del turismo hacia la Ant\xe1rtida y la construcci\xf3n de hoteles en la Pen\xednsula Ant\xe1rtica, las plantas ex\xf3ticas se han extendido, amenazando el ecosistema local. \xbfQu\xe9 se puede hacer?"},wrong_answer:{eng:"Start a social media campaign to ban tourism and non-scientific presence in Antarctica?",esp:"\xbfEmpezar una campa\xf1a en los medios sociales para prohibir el turismo y la presencia no cient\xedfica en la Ant\xe1rtida?"},right_answer:{eng:"Call upon the <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Antarctic_Treaty_System'>Antarctic Treaty</color> to include a limit on human presence in the <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Protocol_on_Environmental_Protection_to_the_Antarctic_Treaty'>Protocol on Environmental Protection</color>, and enact a systematic surveillance system for alien species?",esp:"\xbfExhortar al <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/Tratado_Ant%C3%A1rtico'>Tratado Ant\xe1rtico</color> a que incluya un l\xedmite a la presencia humana en el <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/Protocolo_al_Tratado_Ant%C3%A1rtico_sobre_Protecci%C3%B3n_del_Medio_Ambiente'>Protocolo de Protecci\xf3n Ambiental</color>, y a que promulgue un sistema de vigilancia sistem\xe1tica de las especies ex\xf3ticas?"}},{id:6,quiz:{eng:"Changes in food availability is endangering the survival of several penguin species, which have to compete with large-scale <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Krill'>krill</color> fishing in the North of Antarctica. What can be done?",esp:"Los cambios en la disponibilidad de alimentos est\xe1n poniendo en peligro la supervivencia de varias especies de ping\xfcinos, que tienen que competir con la pesca de <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/Euphausiacea'>krill</color> a gran escala en el norte de la Ant\xe1rtida. \xbfQu\xe9 se puede hacer?"},wrong_answer:{eng:"Establish a <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Marine_protected_area'>marine protected area</color>?",esp:"\xbfEstablecer un <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/%C3%81rea_marina_protegida'>\xe1rea marina protegida</color>?"},right_answer:{eng:"Lobby the parties to the <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Antarctic_Treaty_System'>Antarctic Treaty</color> to secure Antarctica as a <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Nature_reserve'>natural reserve</color> and establish a <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Moratorium_(law)'>moratorium</color> on fishing in the Southern Ocean?",esp:"\xbfPresionar a las partes del <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/Tratado_Ant%C3%A1rtico'>Tratado Ant\xe1rtico</color> para asegurar la Ant\xe1rtida como <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/Reserva_natural'>reserva natural</color> y establecer una <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Moratorium_(law)'>moratoria</color> de la pesca en el Oc\xe9ano Austral?"}},{id:7,quiz:{eng:"Owing to tremendous pressure for food to support the ever-growing world population, <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Bioprospecting'>bioprospecting</color> experiments have identified the possibility to harvest several <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Krill'>krill</color> species in the Southern Ocean. Scientists  fear that high levels of fishing will cause irreparable damage to the whole Antarctic ecosystem, whilst several nations are fighting for the apportionment of the krill population. What can be done?",esp:"Debido a la tremenda presi\xf3n para obtener alimentos para sostener la creciente poblaci\xf3n mundial, los experimentos de <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/Bioprospecci%C3%B3n'>bioprospecci\xf3n</color> han identificado la posibilidad de cosechar varias especies de <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/Euphausiacea'>krill</color> en el Oc\xe9ano Austral. Los cient\xedficos temen que los altos niveles de pesca causen un da\xf1o irreparable a todo el ecosistema ant\xe1rtico, mientras que varias naciones luchan por el reparto de la poblaci\xf3n de krill. \xbfQu\xe9 se puede hacer?"},wrong_answer:{eng:"Establish <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Marine_protected_area'>marine protected areas</color> within the <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Protocol_on_Environmental_Protection_to_the_Antarctic_Treaty'>Protocol on Environmental Protection of the Antarctic Treaty</color>, and apportion the remainder of the Southern Ocean area to countries that most need food supplies?",esp:"\xbfEstablecer \xe1reas marinas protegidas dentro del <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/Tratado_Ant%C3%A1rtico'>Protocolo sobre Protecci\xf3n Ambiental del Tratado Ant\xe1rtico</color>, y repartir el resto de la superficie del Oc\xe9ano Austral entre los pa\xedses que m\xe1s necesitan los suministros alimentarios?"},right_answer:{eng:"Lobby the Antarctic Treaty parties and the UN to adopt an <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Ecosystem-based_management'>ecosystem-based approach</color> to the conservation of krill in the Southern Ocean, including a possible <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Moratorium_(law)'>moratorium</color> on fishing?",esp:"\xbfPresionar a las partes del Tratado Ant\xe1rtico y a las Naciones Unidas para que adopten un enfoque basado en el <color=#AAAAFF click=\"handler\" param='https://es.wikipedia.org/wiki/Ecosistema'>ecosistema</color> para la conservaci\xf3n del krill en el Oc\xe9ano Austral, incluyendo una posible <color=#AAAAFF click=\"handler\" param='https://en.wikipedia.org/wiki/Moratorium_(law)'>moratoria</color> de la pesca?"}}]}},cc._RF.pop()},{}],RichTextHandler:[function(e,t,o){"use strict";cc._RF.push(t,"9d283dTKepBgKui+N+JrmfT","RichTextHandler");var a=this&&this.__decorate||function(e,t,o,a){var i,n=arguments.length,s=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,a);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(s=(n<3?i(s):n>3?i(t,o,s):i(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:i,property:n}=cc._decorator;let s=class extends cc.Component{start(){}handler(e,t){console.log(t),cc.sys.openURL(t)}};s=a([i],s),o.default=s,cc._RF.pop()},{}],SelectOptions:[function(e,t,o){"use strict";cc._RF.push(t,"234c4JdQ+FLb6injQfskJ2H","SelectOptions");var a=this&&this.__decorate||function(e,t,o,a){var i,n=arguments.length,s=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,a);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(s=(n<3?i(s):n>3?i(t,o,s):i(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});const{ccclass:i,property:n}=cc._decorator;let s=class extends cc.Component{constructor(){super(...arguments),this.lblEnglish=null,this.chkEnglish=null,this.lblEspanol=null,this.chkEspanol=null,this.lblEasy=null,this.chkEasy=null,this.lblMedium=null,this.chkMedium=null,this.lblDifficult=null,this.chkDifficult=null}selectLanguage(){this.chkEnglish.isChecked?cc.sys.localStorage.language="eng":cc.sys.localStorage.language="esp"}selectDifficulty(){this.chkEasy.isChecked?cc.sys.localStorage.level="Easy":this.chkMedium.isChecked?cc.sys.localStorage.level="Medium":cc.sys.localStorage.level="Hard"}launchGame(){void 0===cc.sys.localStorage.language&&(cc.sys.localStorage.language="eng"),void 0===cc.sys.localStorage.level&&(cc.sys.localStorage.level="Easy"),void 0===cc.sys.localStorage.greyscale&&(cc.sys.localStorage.greyscale=!0),void 0===cc.sys.localStorage.countryMask&&(cc.sys.localStorage.countryMask="default"),cc.sys.isMobile&&cc.screen.requestFullScreen(null,()=>{cc.log("now fullscreen")}),cc.director.loadScene("ConsentScene")}onLoad(){this.lblEnglish.node.on(cc.Node.EventType.TOUCH_END,e=>{this.chkEnglish.node.emit(cc.Node.EventType.TOUCH_END,e)},this),this.lblEspanol.node.on(cc.Node.EventType.TOUCH_END,e=>{this.chkEspanol.node.emit(cc.Node.EventType.TOUCH_END,e)},this),this.lblEasy.node.on(cc.Node.EventType.TOUCH_END,e=>{this.chkEasy.node.emit(cc.Node.EventType.TOUCH_END,e)},this),this.lblMedium.node.on(cc.Node.EventType.TOUCH_END,e=>{this.chkMedium.node.emit(cc.Node.EventType.TOUCH_END,e)},this),this.lblDifficult.node.on(cc.Node.EventType.TOUCH_END,e=>{this.chkDifficult.node.emit(cc.Node.EventType.TOUCH_END,e)},this)}start(){}};a([n(cc.Label)],s.prototype,"lblEnglish",void 0),a([n(cc.Toggle)],s.prototype,"chkEnglish",void 0),a([n(cc.Label)],s.prototype,"lblEspanol",void 0),a([n(cc.Toggle)],s.prototype,"chkEspanol",void 0),a([n(cc.Label)],s.prototype,"lblEasy",void 0),a([n(cc.Toggle)],s.prototype,"chkEasy",void 0),a([n(cc.Label)],s.prototype,"lblMedium",void 0),a([n(cc.Toggle)],s.prototype,"chkMedium",void 0),a([n(cc.Label)],s.prototype,"lblDifficult",void 0),a([n(cc.Toggle)],s.prototype,"chkDifficult",void 0),s=a([i],s),o.default=s,cc._RF.pop()},{}],ShowBuild:[function(e,t,o){"use strict";cc._RF.push(t,"b64b8QpGXhJzrtBJ81ph9J3","ShowBuild");var a=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function a(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(a.prototype=o.prototype,new a)}}(),i=this&&this.__decorate||function(e,t,o,a){var i,n=arguments.length,s=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,a);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(s=(n<3?i(s):n>3?i(t,o,s):i(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,s=n.ccclass,r=n.property,c=e("../WorldScene/Resources"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t.res=new c.Resources,t}return a(t,e),t.prototype.onLoad=function(){this.label.string=this.res.VERSION_ANTARCTIC_FUTURES},t.prototype.start=function(){},i([r(cc.Label)],t.prototype,"label",void 0),i([r],t.prototype,"text",void 0),t=i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../WorldScene/Resources":"Resources"}],UpdateSprite:[function(e,t,o){"use strict";cc._RF.push(t,"b9ecbrBeJpO3ri+UzS70fO/","UpdateSprite");var a=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function a(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(a.prototype=o.prototype,new a)}}(),i=this&&this.__decorate||function(e,t,o,a){var i,n=arguments.length,s=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,a);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(s=(n<3?i(s):n>3?i(t,o,s):i(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,s=n.ccclass,r=n.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t._time=0,t}return a(t,e),t.prototype.start=function(){},t.prototype.update=function(e){this._time+=e;var t=Math.abs(Math.sin(this._time)),o=(Math.abs(Math.cos(this._time)),cc.director.getScene().getChildByName("AUS_equal").getComponent(cc.Sprite).getMaterial(0));o.setProperty("u_selected",1),o.setProperty("u_percentageLoss",100*t),o.setProperty("u_percentagePrep",0)},i([r(cc.Label)],t.prototype,"label",void 0),i([r],t.prototype,"text",void 0),t=i([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],World:[function(e,t,o){"use strict";cc._RF.push(t,"e52f24LawtANp9bpzs/NQ9+","World"),Object.defineProperty(o,"__esModule",{value:!0});const a=e("./Resources");o.Utils=class{};class i{constructor(e,t){this.x=0,this.y=0,this.x=e,this.y=t}}o.Point=i;class n{constructor(){this.u_cellSize=0,this.u_randFactor=0,this.u_randAlpha=0,this.u_sizePower=0,this.u_sizeMultiplier=0,this.u_stepMin=0,this.u_stepMax=0,this.u_borderRadius=0}}o.Shader=n;class s{constructor(){this.points=[],this.name=null,this.iso_a2=null,this.iso_a3=null,this.latitute=0,this.longitude=0,this.pop_max=0,this.pop_min=0}}o.Place=s;class r{constructor(){this.name=null,this.points=[],this.extremes=[],this.centroid=null,this.area=0,this.affected_chance=0,this.pop_est=0,this.pop_aware=0,this.pop_aware_percent=0,this.pop_prepared=0,this.pop_prepared_percent=0,this.gdp_est=0,this.iso_a2=null,this.iso_a3=null,this.subregion=null,this.economy=null,this.income_grp=null,this.income_grp_num=0,this.equator_dist=0,this.offsetX=0,this.offsetY=0,this.policy=0,this.previousLoss=0,this.loss=0,this.neighbours=[],this.points_shared=0,this.points_total=0,this.shared_border_percentage=0,this.policyPoints=[],this.policyDots=[],this.destructionPoints=[],this.destructionDots=[],this.selected=!1,this.places=new Map}}o.Country=r;class c{constructor(){this.crisis="",this.id=0,this.country="",this.counter=0}}o.CrisisCountry=c;o.Policy=class{constructor(){this.cost_1=0,this.cost_2=0,this.cost_3=0}};class l{constructor(){this.populationWorld=0,this.level="",this.language="eng",this.greyscale=!0,this.mouseZoom=!0,this.mousePan=!1,this.difficultyMultiplier=0,this.state=0,this.modal=!1,this.startDate=new Date(Date.now()),this.targetDate=new Date(Date.now()),this.previousDate=null,this.currentDate=null,this.counter=0,this.lastResource=0,this.lastCrisis=0,this.crises=[],this.crisisCountry=null,this.crisisCount=0,this.policies=new Map,this.policy=0,this.countriedAffected=0,this.populationAware=0,this.populationPrepared=0,this.populationAwarePercent=0,this.populationPreparedPercent=0,this.resources=0,this.alertResources=!1,this.alertCrisis=!1,this.resourcesAdded=!1,this.previousLoss=0,this.rateOfLoss=0,this.minimumLoss=0,this.totalLoss=0,this.finalState=-1,this.scenarioName="",this.messagesNegative=[],this.messagesPositive=[],this.messageOverride=null,this.tutorialMode=!1,this.tutorialHints=[],this.stats={},this.quizzes=[],this.shader=new n,this.automateMode=!1,this.automateScript=null,this.timeInterval=0,this.tutorialInterval=0,this.resourceInterval=0,this.crisisInterval=0,this.policyOptions={},this.policyRelations={},this.startCountry="",this.statsCountry="",this.countries=[],this.currentCountry=null,this.timeoutID=null,this.width=1334,this.height=750}}o.GameState=l;o.AutomatedScript=class{constructor(){this.name=null}};o.World=class{constructor(){this.res=new a.Resources,this.countries=[],this.countriesJson=new Map,this.sortedObjs=[],this.areaMin=0,this.areaMax=0,this.areaMean=0,this.areaRatio=0,this.areaMinCountry="",this.areaMaxCountry="",this.gameState=null,this.automateID=-1,this.automateScripts=[],this.scenarioData={},this.shuffleArray=(e=>e.sort(()=>Math.random()-.5))}exponentialDecay(e,t){let o=e>1?100:1;return Math.pow(3*Math.E,(1-e)/o)}sigmoidalDecay(e,t){if(!this.res.SIGMOIDAL_DECAY)return 1;t=void 0===t?50:t;let o=1-Math.abs((e-t)/t);return Math.pow(Math.E,o)}initialiseCountries(){this.countries=Object.values(this.countriesJson).reduce((e,t)=>{if(!e[t.iso_a3]){let o=new r;o.name=t.name,o.points=t.points.map(e=>e.map(e=>new i(parseFloat(e.x),parseFloat(e.y)))),o.extremes=this.extremes(o.points),o.centroid=this.centroids(o.points),o.area=this.areas(o.points),o.affected_chance=1,o.pop_est=parseInt(t.pop_est),o.pop_aware=0,o.pop_aware_percent=0,o.pop_prepared=0,o.pop_prepared_percent=0,o.gdp_est=parseInt(t.gdp_md_est),o.iso_a2=t.iso_a2,o.iso_a3=t.iso_a3,o.subregion=t.subregion,o.economy=t.economy,o.income_grp=t.income_grp,o.income_grp_num=parseInt(t.income_grp.charAt(0)),o.equator_dist=t.equatorDist,o.offsetX=t.offsetX,o.offsetY=t.offsetY,o.policy=0,o.previousLoss=this.gameState.previousLoss,o.loss=this.gameState.previousLoss,o.neighbours=[],o.points_shared=0,o.points_total=0,o.shared_border_percentage=0,o.policyPoints=[],o.policyDots=[],o.destructionPoints=[],o.destructionDots=[],o.selected=!1,o.places=new Map,t.places.forEach(e=>{let t=new s;t.points=e.points,t.name=e.NAME,t.iso_a2=e.ISO_A2,t.iso_a3=e.ADM0_A3,t.latitute=e.LATITUDE,t.longitude=e.LONGITUDE,t.pop_max=e.POP_MAX,t.pop_min=e.POP_MIN,o.places[t.name]=t}),e[t.iso_a3]=o}return e},{})}mapAllPoints(){let e={};return Object.keys(this.countries).forEach(t=>{var o=this.countries[t];o.points.forEach(t=>{t.forEach(t=>{var a=t.x+"-"+t.y;void 0!==e[a]?e[a].push(o.iso_a3):e[a]=[o.iso_a3]})})}),e}sortCountriesByCoordinates(){this.sortedObjs=Object.values(this.countries).sort((e,t)=>e.points[0][0].y*this.gameState.height+e.points[0][0].x-(t.points[0][0].y*this.gameState.height+t.points[0][0].x))}establishNeighbours(){let e=this.mapAllPoints();Object.keys(e).forEach(t=>{var o=e[t];o.forEach(e=>{var t=this.countries[e];o.forEach(o=>{e!=o&&(-1==t.neighbours.indexOf(o)&&t.neighbours.push(o),t.points_shared+=1)}),t.points_total+=1})}),Object.keys(this.countries).forEach(e=>{var t=this.countries[e];t.shared_border_percentage=t.points_shared/t.points_total,t.shared_border_percentage>1&&(t.shared_border_percentage=1)})}establishDensities(){Object.keys(this.countries).forEach(e=>{var t=this.countries[e];t.density=t.pop_est/t.area})}establishAreas(){this.areaMin=0,this.areaMax=0,this.areaMean=0,this.areaMinCountry="",this.areaMaxCountry="",Object.keys(this.countries).forEach(e=>{var t=this.countries[e];(0==this.areaMin||this.areaMin>t.area)&&(this.areaMin=t.area,this.areaMinCountry=e),this.areaMax<t.area&&(this.areaMax=t.area,this.areaMaxCountry=e),this.areaMean+=t.area}),this.areaMean/=Object.keys(this.countries).length,this.areaRatio=Math.floor(Math.log2(this.areaMax/this.areaMin))}establishNumberOfPoints(){Object.keys(this.countries).forEach(e=>{var t=this.countries[e];t.numPoints=Math.ceil(Math.pow(t.area/this.areaMean,2))})}worldPopulation(){let e=this;this.gameState.populationWorld=Object.keys(this.countries).map(function(t){return e.countries[t].pop_est}).reduce((e,t)=>e+parseInt(t),0)}setupCountries(){this.initialiseCountries(),this.sortCountriesByCoordinates(),this.establishNeighbours(),this.establishDensities(),this.establishAreas(),this.establishNumberOfPoints(),this.worldPopulation()}extremes(e){let t=[];for(let o=0;o<e.length;o++){let a=e[o],i=0,n=0,s=0,r=0;for(let e=0;e<a.length;e++){let t=a[e];(0==i||i>t.x)&&(i=t.x),(0==n||n>t.y)&&(n=t.y),s<t.x&&(s=t.x),r<t.y&&(r=t.y)}t.push({minx:i,miny:n,maxx:s,maxy:r})}return t}regionalArea(e){let t=0;for(let o=0;o<e.length-1;o++){let a=e[o],i=e[o+1],n=a.x*i.y,s=a.y*i.x;t+=Math.abs(n-s)}return t/2}areas(e){let t=0;for(let o=0;o<e.length;o++){let a=e[o];t+=this.regionalArea(a)}return t}centroids(e){let t=0,o=0,a=-1;for(let i=0;i<e.length;i++){let n=e[i];(o=this.regionalArea(n))>t&&(a=i,t=o)}if(-1==a)return;let n=e[a],s=0,r=0;return n.forEach(e=>{s+=e.x,r+=e.y}),new i(s/n.length,r/n.length)}initGameState(e,t,o,a,i,s){let r=this;r.gameState=new l,r.gameState.width=i,r.gameState.height=s,r.gameState.level=e,r.gameState.language=t,r.gameState.greyscale=o,r.gameState.difficultyMultiplier=1,"Medium"===r.gameState.level?r.gameState.difficultyMultiplier=2:"Hard"===r.gameState.level&&(r.gameState.difficultyMultiplier=3),r.gameState.state=r.res.GAME_STATES.INITIALISED,r.gameState.modal=!1,r.gameState.startDate=new Date(Date.now()),r.gameState.startDate.setDate(1),r.gameState.startDate.setMonth(r.res.scenarioData.start_month),r.gameState.startDate.setFullYear(r.res.scenarioData.start_year),r.gameState.targetDate=new Date(Date.now()),r.gameState.targetDate.setDate(1),r.gameState.targetDate.setMonth(r.res.scenarioData.target_month),r.gameState.targetDate.setFullYear(r.res.scenarioData.target_year),r.gameState.previousDate=r.gameState.startDate,r.gameState.currentDate=r.gameState.startDate,r.gameState.counter=0,r.gameState.lastResource=0,r.gameState.lastCrisis=r.res.CRISIS_INTERVAL_MULTIPLIER,r.gameState.crises=[],r.gameState.crisisCountry=null,r.gameState.crisisCount=0,r.gameState.policies=new Map,r.gameState.policy=0,r.gameState.countriedAffected=0,r.gameState.populationAware=0,r.gameState.populationPrepared=0,r.gameState.populationAwarePercent=0,r.gameState.populationPreparedPercent=0,r.gameState.resources=r.res.scenarioData.starting_resources,r.gameState.alertResources=!1,r.gameState.alertCrisis=!1,r.gameState.resourcesAdded=!1,r.gameState.previousLoss=r.res.scenarioData.threat_details.starting_conditions.starting_loss,r.gameState.rateOfLoss=r.res.scenarioData.threat_details.advanced_stats.loss_increase_speed,r.gameState.minimumLoss=r.res.scenarioData.threat_details.advanced_stats.minimum_loss_increase,r.gameState.totalLoss=0,r.gameState.scenarioName=r.res.scenarioData[r.gameState.language].name,r.gameState.messagesNegative=r.res.scenarioData[r.gameState.language].messages.negative,r.gameState.messagesPositive=r.res.scenarioData[r.gameState.language].messages.positive,r.gameState.messageOverride=null,r.gameState.tutorialMode=!1,r.gameState.tutorialHints=[],r.gameState.stats={},r.gameState.quizzes=[],r.gameState.shader=new n,a?(r.gameState.shader.u_cellSize=1,r.gameState.shader.u_randFactor=.5,r.gameState.shader.u_randAlpha=.3,r.gameState.shader.u_sizePower=4,r.gameState.shader.u_sizeMultiplier=1,r.gameState.shader.u_stepMin=.9,r.gameState.shader.u_stepMax=1,r.gameState.shader.u_borderRadius=10):(r.gameState.shader.u_cellSize=10,r.gameState.shader.u_randFactor=.5,r.gameState.shader.u_randAlpha=.3,r.gameState.shader.u_sizePower=4,r.gameState.shader.u_sizeMultiplier=1,r.gameState.shader.u_stepMin=.9,r.gameState.shader.u_stepMax=1,r.gameState.shader.u_borderRadius=10),r.automateID>-1&&(r.gameState.automateMode=!0,r.gameState.automateScript=r.automateScripts[r.automateID-1],console.log("Running "+r.gameState.automateScript.name)),this.updateTimeVariables(r.res.MONTH_INTERVAL),this.calculatePolicyConnections()}updateTimeVariables(e){this.gameState.timeInterval=e,this.gameState.tutorialInterval=this.gameState.timeInterval*this.res.TUTORIAL_INTERVAL_MULTIPLIER,this.gameState.resourceInterval=this.gameState.timeInterval*this.res.RESOURCE_INTERVAL_MULTIPLIER,this.gameState.crisisInterval=this.gameState.timeInterval*this.res.CRISIS_INTERVAL_MULTIPLIER}calculatePolicyConnections(){let e=this;e.gameState.policyOptions={};let t=0;Object.keys(e.res.RESOURCES).forEach(o=>{e.res.RESOURCES[o].policyOptions.forEach(o=>{e.gameState.policyOptions[o.id]=o,t<o.id&&(t=o.id)})}),e.gameState.policyRelations={};for(let o=0;o<t;o++){const a=e.gameState.policyOptions[o+1];e.gameState.policyRelations[a.id]={};for(let i=0;i<t;i++){if(i==o)continue;const t=e.gameState.policyOptions[i+1];void 0===e.gameState.policyRelations[t.id]&&(e.gameState.policyRelations[t.id]={});let n=e.res.RESOURCE_MATRIX[o][i];n=void 0==n?0:n,e.gameState.policyRelations[a.id][t.id]=n}}}evaluateLoss(e){let t=this;const o=e.loss;let a=1+t.gameState.rateOfLoss*(.5+Math.random());const i=1+.25*e.pop_prepared_percent/100;a/=i,t.gameState.crises.forEach(e=>{let i=1+t.res.CRISES[e.crisis].effect_on_environmental_loss*Math.pow(o/t.gameState.totalLoss,.5);a*=i});const n=(a-1)*t.sigmoidalDecay(o,t.res.DECAY_LOSS);let s=o+n;return s>100&&(s=100),s<0&&(s=0),s}transmitFrom(e){let t=this;const o=e.neighbours,a=e.shared_border_percentage,i=t.res.scenarioData.threat_details.transmission.transmission_land,n=t.res.scenarioData.threat_details.transmission.transmission_sea,s=t.res.scenarioData.threat_details.transmission.transmission_air,r=t.res.scenarioData.threat_details.advanced_stats.minimum_infectivity_increase,c=e.affected_chance,l=e.pop_est,d=t.gameState.populationWorld,p=Math.log(l)/Math.log(d),g=e.income_grp,u=parseFloat(g.charAt(0))/6,_=a*i*c*p*u,m=(1-a)*n*c*p*(1-u),h=a*s*c*p*(1-u);let f=null;if(Math.random()<_&&o.length>0){const e=Math.floor(Math.random()*o.length),a=t.countries[o[e]];0==a.policy&&(f=a)}else if(Math.random()<m){const e=t.shuffleArray(Object.keys(t.countries)),o=Math.random();for(let a=0;a<e.length;a++){const i=t.countries[e[a]];if(o<1-i.shared_border_percentage&&0==i.policy){f=i;break}}}else if(Math.random()<h){const e=t.shuffleArray(Object.keys(t.countries)),o=Math.random();for(let a=0;a<e.length;a++){const i=t.countries[e[a]],n=i.income_grp;if(o<1-parseFloat(n.charAt(0))/6&&0==i.policy){f=i;break}}}null!=f&&(f.affected_chance=.1,e.affected_chance<1&&(e.affected_chance*=.1),f.policy=1,f.pop_aware=parseInt(f.pop_est)*r)}infectWithin(e){let t=this;if(0==e.affected_chance)return;if(e.pop_aware>=parseInt(e.pop_est))return;const o=t.res.scenarioData.threat_details.advanced_stats.infectivity_increase_speed,a=t.res.scenarioData.threat_details.advanced_stats.minimum_infectivity_increase;let i=o;Object.keys(t.gameState.policies).forEach(o=>{switch(t.gameState.policies[o],parseInt(o)){case 1:i*=Math.log(1+e.income_grp_num);break;case 2:case 3:case 4:i*=Math.log(1.1*(6-e.income_grp_num));break;case 5:case 6:i*=1.1;break;case 7:i*=Math.log(1.1*(6-e.income_grp_num));break;case 8:case 9:i*=Math.log(2+e.income_grp_num);break;case 10:i*=Math.log(.8*(7-e.income_grp_num));break;case 11:case 12:i*=Math.log(1+e.income_grp_num);break;case 13:i*=Math.log(1.1*(6-e.income_grp_num));break;case 14:i*=Math.log(1+e.income_grp_num);break;case 15:i*=Math.log(1.1*(6-e.income_grp_num));break;case 16:i*=Math.log(1+e.income_grp_num)}}),i-1<a&&(i=1+a),e.pop_aware=(1+e.pop_aware)*i,e.pop_aware>e.pop_est&&(e.pop_aware=e.pop_est)}calculatePolicyBalanceOnPreparedness(){let e=this;const t=Object.values(e.gameState.policies).reduce((e,t)=>e+t,0);if(0==t)return 1;const o=t/4;let a=0,i=0,n=0,s=0;Object.keys(e.gameState.policies).forEach(t=>{const o=e.gameState.policyOptions[t],r=e.gameState.policies[t];switch(o.domain){case 1:a+=r;break;case 2:i+=r;break;case 3:n+=r;break;case 4:s+=r}});const r=Math.pow(a-o,2)+Math.pow(i-o,2)+Math.pow(n-o,2)+Math.pow(s-o,2);return 1-Math.pow(r/Math.pow(t,2),4)}calculateSinglePolicyImpactOnPreparedness(e,t,o,a){let i=this,n=1;i.exponentialDecay(e.pop_prepared_percent,i.res.DECAY_PREPAREDNESS);const s=i.gameState.policyOptions[a],r=i.gameState.policies[a],c=Math.log(r+1.718),l=parseInt(e.pop_est);switch(n*=l<1e7?1+s.effect_on_pop_low*c:l<1e8?1+s.effect_on_pop_medium*c:1+s.effect_on_pop_high*c,e.income_grp_num){case 1:case 2:n*=1+s.effect_on_income_high*c;break;case 3:n*=1+s.effect_on_income_medium_high*c;break;case 4:n*=1+s.effect_on_income_low_medium*c;break;case 5:n*=1+s.effect_on_income_low*c}const d=parseFloat(e.equator_dist);n*=d>-23.5&&d<23.5?1+s.effect_on_geo_tropic*c:d>-40&&d<40?1+s.effect_on_geo_subtropic*c:d>-60&&d<60?1+s.effect_on_geo_temperate*c:1+s.effect_on_geo_polar*c;for(let e=0;e<t.length;e++){const s=parseInt(t[e]);if(s==a)continue;const r=i.gameState.policies[s],c=Math.log(Math.E+(r-1))/Math.log(Math.E+3),l=o[s];void 0!==l&&(n*=1+l*c*.3+1e-6)}return n}calculatePolicyImpactOnPreparedness(e){let t=this,o=1,a=Object.keys(t.gameState.policies);for(let i=0;i<a.length;i++){let n=a[i],s=t.gameState.policyRelations[n];o*=t.calculateSinglePolicyImpactOnPreparedness(e,a,s,n)}let i=t.exponentialDecay(e.pop_prepared_percent,t.res.DECAY_PREPAREDNESS);return o=1+.01*(o=Math.pow(o,i))}registerPreparednessWithin(e){if(0==e.affected_chance)return;const t=e.pop_est;let o=e.pop_prepared,a=this.res.scenarioData.threat_details.advanced_stats.severity_increase_speed;const i=this.res.scenarioData.threat_details.advanced_stats.minimum_severity_increase;let n=1+(this.calculatePolicyBalanceOnPreparedness()*this.calculatePolicyImpactOnPreparedness(e)*a-1)/this.res.MONTH_INTERVAL;n<i&&(n=i),0==o?o=1:o*=n,o>t&&(o=t),o>e.pop_est&&(o=e.pop_est),e.pop_prepared=o}adjustEffect(e){return e=(e=1/(e+=1.000001))>1?Math.pow(e,this.gameState.difficultyMultiplier):Math.pow(e,1/this.gameState.difficultyMultiplier)}isItTimeForNewResources(){let e=this,t=e.gameState.resourceInterval;return e.gameState.crises.forEach(o=>{let a=e.res.CRISES[o.crisis].effect_on_resources;e.countries[o.country],t*=e.adjustEffect(a)}),Object.keys(e.gameState.policies).forEach(o=>{let a=e.gameState.policyOptions[o],i=e.gameState.policies[o],n=a.effect_on_resources*Math.log(i+1.718);t*=e.adjustEffect(n)}),t}isItTimeForNewCrisis(){let e=this,t=e.gameState.crisisInterval;return Object.keys(e.gameState.policies).forEach(o=>{const a=e.gameState.policyOptions[o],i=e.gameState.policies[o];t/=1+a.effect_on_crises*Math.log(i+1.718)}),t}updateGameTime(e){let t=this,o=void 0;t.gameState.currentDate=new Date(t.gameState.currentDate.valueOf()),t.gameState.currentDate.setDate(t.gameState.currentDate.getDate()+30.417);const a=t.gameState.currentDate.getFullYear(),i=t.gameState.previousDate.getFullYear();if(a>i){t.gameState.stats[i]={loss:t.gameState.totalLoss,prepared:t.gameState.populationPreparedPercent};const e=Object.values(t.res.NARRATIVES.n2048).sort((e,t)=>t.loss-e.loss);switch(a){case 2048:for(let a=0;a<e.length;a++){const i=e[a];if(t.gameState.totalLoss>=i.loss){let e=Math.floor(Math.random()*i[t.gameState.language].length);o=i[t.gameState.language][e];break}}}}return t.gameState.previousDate=t.gameState.currentDate,void 0!==e&&void 0!==o&&e(o),o}updateGameStats(){let e=this,t=0,o=0,a=0,i=0,n=0,s=e.gameState.timeInterval,r=Object.keys(e.countries);for(let c=0;c<r.length;c++){let l=r[c];const d=e.countries[l];if(c%s==e.gameState.counter%s){const t=e.evaluateLoss(d);t>0&&(d.previousLoss=d.loss,d.loss=t),d.affected_chance&&(e.transmitFrom(d),e.infectWithin(d),e.registerPreparednessWithin(d))}a++,i+=d.pop_aware,n+=d.pop_prepared,d.pop_aware_percent=100*d.pop_aware/d.pop_est;let p=d.pop_prepared_percent;d.pop_prepared_percent=100*d.pop_prepared/d.pop_est,p>.5&&parseInt(p),d.pop_prepared_percent>.5&&parseInt(d.pop_prepared_percent),t+=d.policy,o+=d.loss}t/=Object.keys(e.countries).length,e.gameState.policy=t,o/=Object.keys(e.countries).length,e.gameState.previousLoss=o,e.gameState.totalLoss=o,e.gameState.countriedAffected=a,e.gameState.populationAware=i,e.gameState.populationPrepared=n,e.gameState.populationAwarePercent=100*e.gameState.populationAware/e.gameState.populationWorld,e.gameState.populationPreparedPercent=100*e.gameState.populationPrepared/e.gameState.populationWorld}crisisProbDistribution(){let e=this;const t=[],o=Object.keys(e.res.CRISES),a=Object.keys(e.countries);let i=0;if(o.forEach(o=>{const n=e.res.CRISES[o];a.forEach(o=>{const a=e.countries[o],s=a.loss/e.gameState.totalLoss,r=a.pop_prepared_percent/e.gameState.populationPreparedPercent;let c=1;c+=s*n.influence_of_environmental_loss,c+=r*n.influence_of_preparedness,isNaN(c)&&(c=0),c>0&&(i+=c,t.push(c))})}),i>0)for(let e=0;e<t.length;e++)t[e]/=i;return t}crisisProbLocation(e){let t=this;const o=t.crisisProbDistribution(),a=Object.keys(t.res.CRISES),i=Object.keys(t.countries);new c;let n=0;for(let s=0;s<o.length;s++)if(e<(n+=o[s])){const e=Math.floor(a.length*s/o.length),n=s%i.length;let r=new c;return r.crisis=a[e],r.country=i[n],r.id=s,r.counter=t.gameState.counter,r}}generateResourceDistribution(){let e=this,t=[],o=0;for(let a=0;a<16;a++){let i=1;void 0!==e.gameState.policies[a+1]&&(i+=e.gameState.policies[a+1]),o+=i,t.push(i)}for(let e=0;e<t.length;e++)t[e]/=o;return t}generateWeightedPolicyIndex(e){let t=this.generateResourceDistribution(),o=0,a=0;for(let i=0;i<t.length;i++)if((o+=t[i])>e){a=i;break}return a}costCalculation(e){let t=this.gameState.policies[e.id],o=e.cost_1;if(void 0!==t)switch(t){case 1:o=e.cost_2;break;case 2:o=e.cost_3;break;case 3:o=0}let a=this.generateResourceDistribution(),i=Math.floor((e.id-1)/4),n=[];for(let e=0;e<a.length;e++)e%4==0?n.push(4*a[e]):n[Math.floor(e/4)]+=4*a[e];return n[i]>1&&(o*=n[i]),o=Math.round(o)}},cc._RF.pop()},{"./Resources":"Resources"}]},{},["Consent","ShowBuild","SelectOptions","UpdateSprite","ChangeTweet","Colors","GameController","Resources","RichTextHandler","World"]);