window.__require=function e(a,t,o){function r(s,c){if(!t[s]){if(!a[s]){var i=s.split("/");if(i=i[i.length-1],!a[i]){var l="function"==typeof __require&&__require;if(!c&&l)return l(i,!0);if(n)return n(i,!0);throw new Error("Cannot find module '"+s+"'")}s=i}var g=t[s]={exports:{}};a[s][0].call(g.exports,function(e){return r(a[s][1][e]||e)},g,g.exports,e,a,t,o)}return t[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<o.length;s++)r(o[s]);return r}({ChangeTweet:[function(e,a,t){"use strict";cc._RF.push(a,"13336WWeLpLWpKn6MnNRBYz","ChangeTweet");var o=this&&this.__extends||function(){var e=function(a,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)a.hasOwnProperty(t)&&(e[t]=a[t])})(a,t)};return function(a,t){function o(){this.constructor=a}e(a,t),a.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,a,t,o){var r,n=arguments.length,s=n<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,a,t,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(n<3?r(s):n>3?r(a,t,s):r(a,t))||s);return n>3&&s&&Object.defineProperty(a,t,s),s};Object.defineProperty(t,"__esModule",{value:!0});var n=cc._decorator,s=n.ccclass,c=n.property,i=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.label=null,a.text="hello",a}return o(a,e),a.prototype.start=function(){},a.prototype.tweetRendered=function(){var e=cc.director.getScene().getChildByName("layout").getChildByName("topBar").getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet"),a=gameParams.scenarioName,t=-1;if(null!=gameParams.messageOverride)a=gameParams.messageOverride,e.color=COLOR_DESTRUCTION_POINTS,gameParams.messageOverride=null;else if(gameParams.totalLoss>0||gameParams.populationPreparedPercent>0){var o=gameParams.totalLoss/(gameParams.totalLoss+gameParams.populationPreparedPercent);Math.random()<o?(t=Math.floor(Math.random()*gameParams.messagesNegative.length),a=gameParams.messagesNegative[t]):(t=Math.floor(Math.random()*gameParams.messagesPositive.length),a=gameParams.messagesPositive[t]),e.color=COLOR_ICE}e.getComponent(cc.Label).string=a},r([c(cc.Label)],a.prototype,"label",void 0),r([c],a.prototype,"text",void 0),a=r([s],a)}(cc.Component);t.default=i,cc._RF.pop()},{}],LoadMap:[function(e,a,t){"use strict";function o(e){return c(e)||s(e)||n(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,a){if(e){if("string"==typeof e)return i(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,a):void 0}}function s(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function c(e){if(Array.isArray(e))return i(e)}function i(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,o=new Array(a);t<a;t++)o[t]=e[t];return o}cc._RF.push(a,"8590dH918pKU7D5d6Z+YZQi","LoadMap"),cc.Class({extends:cc.Component,properties:{defaultMaterial:{default:null,type:cc.Material,serializable:!0},messageBox:{default:null,type:cc.Node,serializable:!0},topBar:{default:null,type:cc.Node,serializable:!0},singleColor:{default:null,type:cc.SpriteFrame,serializable:!0},buttonWhite:{default:null,type:cc.SpriteFrame,serializable:!0},buttonGrey:{default:null,type:cc.SpriteFrame,serializable:!0},titleFont:{default:null,type:cc.Font,serializable:!0},bodyFont:{default:null,type:cc.Font,serializable:!0},map:{default:null,type:cc.TiledMap,serializable:!0},backgroundGreyscale:{default:null,type:cc.Node,serializable:!0},backgroundColour:{default:null,type:cc.Node,serializable:!0},material:{default:null,type:cc.Material,serializable:!0},sortedObjs:{default:[],serializable:!0},gameParams:{default:{},serializable:!0}},world:void 0,_time:0,collisionDetection:function(e,a){for(var t=!1,r=Math.max.apply(Math,o(e.map(function(e){return e.x}))),n=0;n<e.length;n++){var s=e[n],c=n==e.length-1?e[0]:e[n+1],i=parseFloat(s.x)+.001,l=parseFloat(s.y)-.001,g=parseFloat(c.x)+.001,d=parseFloat(c.y)-.001;(l<a.y&&d>=a.y||l>a.y&&d<=a.y)&&(i+g)/2<a.x&&a.x<r&&(0,t=!t)}return t},pointArray:function(e,a){return e.countriesJson[a].points},extremes:function(e,a){for(var t=this.pointArray(e,a),o=[],r=0;r<t.length;r++){for(var n=t[r],s=0,c=0,i=0,l=0,g=0;g<n.length;g++){var d=n[g];(0==s||s>parseInt(d.x))&&(s=parseInt(d.x)),(0==c||c>parseInt(d.y))&&(c=parseInt(d.y)),i<parseInt(d.x)&&(i=parseInt(d.x)),l<parseInt(d.y)&&(l=parseInt(d.y))}o.push({minx:s,miny:c,maxx:i,maxy:l})}return o},regionalArea:function(e,a){for(var t=0,o=0;o<a.length-1;o++){var r=a[o],n=a[o+1],s=r.x*n.y,c=r.y*n.x;t+=Math.abs(s-c)}return t/2},areas:function(e,a){for(var t=this.pointArray(e,a),o=0,r=0;r<t.length;r++){var n=t[r];o+=this.regionalArea(e,n)}return o},centroids:function(e,a){for(var t=this.pointArray(e,a),o=0,r=0,n=-1,s=0;s<t.length;s++){var c=t[s];(r=this.regionalArea(e,c))>o&&(n=s,o=r)}if(-1!=n){var i=t[n],l=0,g=0;return i.forEach(function(e){l+=parseFloat(e.x),g+=parseFloat(e.y)}),{x:l/i.length,y:g/i.length}}},initCountries:function(){var e=this,a=this;a.countries=Object.values(a.countriesJson).reduce(function(t,o){return t[o.iso_a3]||(t[o.iso_a3]={name:o.name,points:e.pointArray(a,o.iso_a3),extremes:e.extremes(a,o.iso_a3),centroid:e.centroids(a,o.iso_a3),area:e.areas(a,o.iso_a3),affected_chance:1,pop_est:parseInt(o.pop_est),pop_aware:0,pop_aware_percent:0,pop_prepared:0,pop_prepared_percent:0,gdp_est:parseInt(o.gdp_md_est),gid:1,iso_a2:o.iso_a2,iso_a3:o.iso_a3,subregion:o.subregion,economy:o.economy,income_grp:o.income_grp,income_grp_num:parseInt(o.income_grp.charAt(0)),equator_dist:o.equatorDist,offsetX:o.offsetX,offsetY:o.offsetY,policy:0,previousLoss:gameParams.previousLoss,loss:gameParams.previousLoss,neighbours:[],points_shared:0,points_total:0,shared_border_percentage:0,policyPoints:[],policyDots:[],destructionPoints:[],destructionDots:[],selected:!1}),t},{}),a.sortedObjs=Object.values(a.countries).sort(function(e,a){return e.points[0].y*cc.winSize.height+e.points[0].x>a.points[0].y*cc.winSize.height+a.points[0].x});var t={};Object.keys(a.countries).forEach(function(e){var o=a.countries[e];o.points.forEach(function(e){var a=e.x+"-"+e.y;t[a]?t[a].push(o.iso_a3):t[a]=[o.iso_a3]})}),Object.keys(t).forEach(function(e){var o=t[e];o.forEach(function(e){var t=a.countries[e];o.forEach(function(a){e!=a&&(-1==t.neighbours.indexOf(a)&&t.neighbours.push(a),t.points_shared+=1)}),t.points_total+=1})}),Object.keys(a.countries).forEach(function(e){var t=a.countries[e];t.shared_border_percentage=t.points_shared/t.points_total,t.shared_border_percentage>1&&(t.shared_border_percentage=1)}),Object.keys(a.countries).forEach(function(e){var t=a.countries[e];t.density=t.pop_est/t.area}),a.areaMin=0,a.areaMax=0,a.areaMean=0,a.areaMinCountry="",a.areaMaxCountry="",Object.keys(a.countries).forEach(function(e){var t=a.countries[e];(0==a.areaMin||a.areaMin>t.area)&&(a.areaMin=t.area,a.areaMinCountry=e),a.areaMax<t.area&&(a.areaMax=t.area,a.areaMaxCountry=e),a.areaMean+=t.area}),a.areaMean/=Object.keys(a.countries).length,a.areaRatio=Math.floor(Math.log2(a.areaMax/a.areaMin)),Object.keys(a.countries).forEach(function(e){var t=a.countries[e];t.numPoints=Math.ceil(Math.pow(t.area/a.areaMean,2))}),gameParams.populationWorld=Object.keys(a.countries).map(function(e){return a.countries[e].pop_est}).reduce(function(e,a){return e+parseInt(a)},0)},initGameParams:function(e){void 0===cc.sys.localStorage.language&&(cc.sys.localStorage.language="eng"),void 0===cc.sys.localStorage.level&&(cc.sys.localStorage.level="Easy"),gameParams={},gameParams.level=cc.sys.localStorage.level,gameParams.language=cc.sys.localStorage.language,gameParams.greyscale=cc.sys.localStorage.greyscale,gameParams.difficultyMultiplier=1,"Medium"===gameParams.level?gameParams.difficultyMultiplier=2:"Hard"===gameParams.level&&(gameParams.difficultyMultiplier=3),gameParams.state=GAME_STATES.INITIALISED,gameParams.modal=!1,gameParams.startDate=new Date(Date.now()),gameParams.startDate.setDate(1),gameParams.startDate.setMonth(e.start_month),gameParams.startDate.setYear(e.start_year),gameParams.targetDate=new Date(Date.now()),gameParams.targetDate.setDate(1),gameParams.targetDate.setMonth(e.target_month),gameParams.targetDate.setYear(e.target_year),gameParams.previousDate=gameParams.startDate,gameParams.currentDate=gameParams.startDate,gameParams.counter=0,gameParams.lastResource=0,gameParams.lastCrisis=CRISIS_INTERVAL_MULTIPLIER,gameParams.crises=[],gameParams.crisisCountry=null,gameParams.crisisCount=0,gameParams.policies={},gameParams.policy=0,gameParams.countriedAffected=0,gameParams.populationAware=0,gameParams.populationPrepared=0,gameParams.populationAwarePercent=0,gameParams.populationPreparedPercent=0,gameParams.resources=e.starting_resources,gameParams.alertResources=!1,gameParams.alertCrisis=!1,gameParams.resourcesAdded=!1,gameParams.previousLoss=e.threat_details.starting_conditions.starting_loss,gameParams.rateOfLoss=e.threat_details.advanced_stats.loss_increase_speed,gameParams.minimumLoss=e.threat_details.advanced_stats.minimum_loss_increase,gameParams.totalLoss=0,gameParams.scenarioName=e[cc.sys.localStorage.language].name,gameParams.messagesNegative=e[cc.sys.localStorage.language].messages.negative,gameParams.messagesPositive=e[cc.sys.localStorage.language].messages.positive,gameParams.messageOverride=null,gameParams.tutorialMode=!1,gameParams.tutorialHints=[],gameParams.stats={},gameParams.shader={},cc.sys.isMobile?(gameParams.shader.u_cellSize=1,gameParams.shader.u_randFactor=.5,gameParams.shader.u_randAlpha=.3,gameParams.shader.u_sizePower=4,gameParams.shader.u_sizeMultiplier=1,gameParams.shader.u_stepMin=.9,gameParams.shader.u_stepMax=1,gameParams.shader.u_borderRadius=10):(gameParams.shader.u_cellSize=10,gameParams.shader.u_randFactor=.5,gameParams.shader.u_randAlpha=.3,gameParams.shader.u_sizePower=4,gameParams.shader.u_sizeMultiplier=1,gameParams.shader.u_stepMin=.9,gameParams.shader.u_stepMax=1,gameParams.shader.u_borderRadius=10),world.automateID>-1&&(gameParams.automateMode=!0,gameParams.automateScript=automateScripts[world.automateID-1],console.log("Running "+gameParams.automateScript.name)),this.updateTimeVars(MONTH_INTERVAL),this.calculatePolicyConnections()},updateTimeVars:function(e){gameParams.timeInterval=e,gameParams.tutorialInterval=gameParams.timeInterval*TUTORIAL_INTERVAL_MULTIPLIER,gameParams.resourceInterval=gameParams.timeInterval*RESOURCE_INTERVAL_MULTIPLIER,gameParams.crisisInterval=gameParams.timeInterval*CRISIS_INTERVAL_MULTIPLIER},calculatePolicyConnections:function(){gameParams.policyOptions={};var e=0;Object.keys(RESOURCES).forEach(function(a){RESOURCES[a].policyOptions.forEach(function(a){gameParams.policyOptions[a.id]=a,e<a.id&&(e=a.id)})}),gameParams.policyRelations={};for(var a=0;a<e;a++){var t=gameParams.policyOptions[a+1];gameParams.policyRelations[t.id]={};for(var o=a+1;o<e;o++){var r=gameParams.policyOptions[o+1];void 0===gameParams.policyRelations[r.id]&&(gameParams.policyRelations[r.id]={});var n=RESOURCE_MATRIX[o][a],s=RESOURCE_RELATIONS[o][a];gameParams.policyRelations[t.id][r.id]=n,1==s&&(gameParams.policyRelations[r.id][t.id]=n)}}},startGameParams:function(){gameParams.state=GAME_STATES.STARTED},showMessageBox:function(e,a,t,o,r,n,s){gameParams.modal=!0,gameParams.state=GAME_STATES.PAUSED,world.messageBox.zIndex=104,world.messageBox.opacity=255;var c=world.messageBox.getChildByName("messageBoxTitle").getComponent(cc.Label),i=world.messageBox.getChildByName("messageBoxContents").getComponent(cc.Label),l=world.messageBox.getChildByName("btn1").getComponent(cc.Button),g=world.messageBox.getChildByName("btn2").getComponent(cc.Button);i=world.messageBox.getChildByName("messageBoxContents").getComponent(cc.Label),c.string=a,i.string=t,l.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=o,g.node.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=n;var d=[];d.push(l),null===t||void 0===t||""===t?void 0!==n?(l.node.x=-.25*world.messageBox.width,g.node.x=.25*world.messageBox.width,g.node.opacity=255,g.interactable=!0,g.enabled=!0,d.push(g)):(l.x=0*world.messageBox.width,g.node.opacity=0,g.interactable=!1,g.enabled=!1):void 0!==n?(l.node.x=-.25*world.messageBox.width,g.node.x=.25*world.messageBox.width,g.node.opacity=255,g.interactable=!0,g.enabled=!0,d.push(g)):(l.node.x=0*world.messageBox.width,g.node.opacity=0,g.interactable=!1,g.enabled=!1);var m=function e(a){world.messageBox.opacity=0,l.node.off(cc.Node.EventType.TOUCH_END,e,l),g.node.off(cc.Node.EventType.TOUCH_END,u,g),gameParams.modal=!1,r(),a.stopPropagation()};l.node.on(cc.Node.EventType.TOUCH_END,m,l);var u=function e(a){world.messageBox.opacity=0,l.node.off(cc.Node.EventType.TOUCH_END,m,l),g.node.off(cc.Node.EventType.TOUCH_END,e,g),gameParams.modal=!1,s(),a.stopPropagation()};return g.interactable?g.node.on(cc.Node.EventType.TOUCH_END,u,g):g.node.off(cc.Node.EventType.TOUCH_END,u,g),d.push(l),void 0!==g&&d.push(g),d},showQuizBox:function(e,a,t,o,r){gameParams.modal=!0,gameParams.state=GAME_STATES.PAUSED,world.quizBox.opacity=255,world.quizBox.zIndex=103,world.quizBox.getChildByName("quizTitle").getComponent(cc.Label).string=a,world.quizBox.getChildByName("quizContents").getComponent(cc.Label).string=t;var n=world.quizBox.getChildByName("btn1"),s=world.quizBox.getChildByName("btn2"),c=[];if(Math.random()>.5){var i=s;s=n,n=i}n.getChildByName("Background").getChildByName("optContents").getComponent(cc.Label).string=r,s.getChildByName("Background").getChildByName("optContents").getComponent(cc.Label).string=o;var l=function a(t){world.quizBox.opacity=0,n.off(cc.Node.EventType.TOUCH_END,a,n),s.off(cc.Node.EventType.TOUCH_END,g,s),gameParams.modal=!1,t.stopPropagation(),world.showMessageBox(e,"CRISIS RESPONSE","Great response to this crisis!","OK!",function(){var e=Math.floor(1+3*Math.random());gameParams.resources+=e,gameParams.state=GAME_STATES.STARTED})};n.on(cc.Node.EventType.TOUCH_END,l,n);var g=function a(t){world.quizBox.opacity=0,n.off(cc.Node.EventType.TOUCH_END,l,n),s.off(cc.Node.EventType.TOUCH_END,a,s),gameParams.modal=!1,t.stopPropagation(),world.showMessageBox(e,"CRISIS RESPONSE","Good try, but this won't be enough to preserve the future of Antarctica!","OK!",function(){var e=Math.floor(1+3*Math.random());gameParams.resources-e>0?gameParams.resources-=e:gameParams.resources=0,gameParams.state=GAME_STATES.STARTED})};return s.on(cc.Node.EventType.TOUCH_END,g,s),c.push(n),c.push(s),c},showSettingsBox:function(e){gameParams.modal=!0,gameParams.state=GAME_STATES.PAUSED,world.settingsBox.opacity=255,world.settingsBox.zIndex=106;var a=world.settingsBox.getChildByName("apply"),t=world.settingsBox.getChildByName("cancel"),o="true"==cc.sys.localStorage.greyscale;world.settingsBox.getChildByName("toggleContainer").getChildByName("toggle1").getComponent(cc.Toggle).isChecked=o,world.settingsBox.getChildByName("toggleContainer").getChildByName("toggle2").getComponent(cc.Toggle).isChecked=!o;var r="eng"==cc.sys.localStorage.language;world.settingsBox.getChildByName("toggleLanguage").getChildByName("toggle1").getComponent(cc.Toggle).isChecked=r,world.settingsBox.getChildByName("toggleLanguage").getChildByName("toggle2").getComponent(cc.Toggle).isChecked=!r;var n=function(e){var a=world.settingsBox.getChildByName("toggleContainer").getChildByName("toggle1").getComponent(cc.Toggle).isChecked;cc.sys.localStorage.greyscale=a,gameParams.greyscale=a,a?(world.backgroundGreyscale.opacity=255,world.backgroundColour.opacity=0):(world.backgroundGreyscale.opacity=0,world.backgroundColour.opacity=255);var t=world.settingsBox.getChildByName("toggleContainer").getChildByName("toggle1").getComponent(cc.Toggle).isChecked;cc.sys.localStorage.language=t?"eng":"esp",world.settingsBox.opacity=0,world.settingsBox.zIndex=-1,gameParams.state=GAME_STATES.STARTED};a.on(cc.Node.EventType.TOUCH_END,n,a);t.on(cc.Node.EventType.TOUCH_END,function e(o){a.off(cc.Node.EventType.TOUCH_END,n,a),t.off(cc.Node.EventType.TOUCH_END,e,t),gameParams.modal=!1,o.stopPropagation(),world.settingsBox.opacity=0,world.settingsBox.zIndex=-1,gameParams.state=GAME_STATES.STARTED},t)},postResultsToServer:function(){var e=cc.loader.getXMLHttpRequest();e.open("POST","http://43.240.98.94/game_data"),e.setRequestHeader("Content-Type","application/json;charset=UTF-8");var a=Object.assign({},gameParams,{policyOptions:void 0,policyRelations:void 0,messagesNegative:void 0,messagesPositive:void 0,timeoutID:void 0,tutorialHints:void 0,tutorialInterval:void 0}),t={};Object.values(world.countries).forEach(function(e){t[e.iso_a3]=Object.assign({},e,{points:void 0,points_shared:void 0,points_total:void 0,selected:void 0,shared_border_percentage:void 0,subregion:void 0,destructionPoints:void 0,destructionDots:void 0,policyPoints:void 0,policyDots:void 0,offsetX:void 0,offsetY:void 0,neighbours:void 0,income_grp:void 0,income_grp_num:void 0,iso_a2:void 0,gid:void 0,gdp:void 0,extremes:void 0,equator_dist:void 0,centroid:void 0,area:void 0,density:void 0,economy:void 0})}),a.countries=t,cc.log(JSON.stringify(a)),e.send(JSON.stringify(a))},gameOver:function(e,a,t){world.postResultsToServer(),window.clearTimeout(gameParams.timeoutID),gameParams.state=GAME_STATES.PAUSED,world.showMessageBox(e,"Game Over",a,t,function(){initGameParams(world.scenarioData),gameParams.state=GAME_STATES.GAME_OVER,gameParams.startCountry=null,gameParams.policies={},world.tweetLabel.string=gameParams.scenarioName,cc.director.loadScene("SelectOptions")})},handleMouseTouchEvent:function(e,a){cc.sys.isMobile&&e.on(cc.Node.EventType.TOUCH_BEGAN,function(a){e.TOUCHED=!0,a.stopPropagation()}.bind(e)),e.on(cc.Node.EventType.TOUCH_END,function(t){cc.sys.isMobile&&!e.TOUCHED||(a(e),t.stopPropagation(),e.TOUCHED=!1)}.bind(e))},initControls:function(){world.btnQuit=world.topBar.getChildByName("btnQuit"),world.btnSettings=world.topBar.getChildByName("btnSettings"),world.btnSound=world.topBar.getChildByName("btnSound"),world.btnPause=world.topBar.getChildByName("btnPause"),world.btnPlay=world.topBar.getChildByName("btnPlay"),world.btnFF=world.topBar.getChildByName("btnFF"),world.tweetLabel=world.topBar.getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet"),world.bottomBar=cc.director.getScene().getChildByName("layout").getChildByName("bottomBar"),world.countryLabel=world.bottomBar.getChildByName("lblCountry").getComponent(cc.Label),world.countryLoss=world.bottomBar.getChildByName("lblLossPercent").getComponent(cc.Label),world.countryLossProgress=world.bottomBar.getChildByName("progressBarLoss").getComponent(cc.ProgressBar),world.countryAwarePrepared=world.bottomBar.getChildByName("lblPreparednessPercent").getComponent(cc.Label),world.countryPreparedProgress=world.bottomBar.getChildByName("progressBarPreparedness").getComponent(cc.ProgressBar),world.resourceScoreLabel=cc.director.getScene().getChildByName("resourceScoreBackground").getChildByName("lblResourceScore").getComponent(cc.Label),world.quizBox=cc.director.getScene().getChildByName("layerQuizBox"),world.settingsBox=cc.director.getScene().getChildByName("layerSettings"),world.handleMouseTouchEvent(world.topBar.getChildByName("btnQuit"),function(){gameParams.state=GAME_STATES.PAUSED,world.showMessageBox(world.node.parent,"Quit Game","","Quit Game",function(){world.postResultsToServer(),gameParams.state=GAME_STATES.GAME_OVER,cc.director.loadScene("SelectOptions")},"Return to Game",function(){gameParams.state=GAME_STATES.STARTED})}),world.topBar.getChildByName("btnSettings").on(cc.Node.EventType.TOUCH_END,function(){gameParams.state=GAME_STATES.PAUSED,world.showSettingsBox(world.node.parent\u03c0)},this),world.handleMouseTouchEvent(world.topBar.getChildByName("btnSound"),function(){gameParams.state=GAME_STATES.PAUSED,world.showMessageBox(world.node.parent,"Sound","Not yet implemented","OK",function(){gameParams.state=GAME_STATES.STARTED})}),world.handleMouseTouchEvent(world.topBar.getChildByName("btnPause"),function(){gameParams.state=GAME_STATES.PAUSED,world.btnPause.getComponent(cc.Button).interactable=!1,world.btnPlay.getComponent(cc.Button).interactable=!0,world.btnFF.getComponent(cc.Button).interactable=!0,world.topBar.getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet").getComponent(cc.Animation).pause()}),world.handleMouseTouchEvent(world.topBar.getChildByName("btnPlay"),function(){world.updateTimeVars(MONTH_INTERVAL),gameParams.state=GAME_STATES.STARTED,world.btnPause.getComponent(cc.Button).interactable=!0,world.btnPlay.getComponent(cc.Button).interactable=!1,world.btnFF.getComponent(cc.Button).interactable=!0,world.topBar.getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet").getComponent(cc.Animation).play()}),world.handleMouseTouchEvent(world.topBar.getChildByName("btnFF"),function(){world.updateTimeVars(MONTH_INTERVAL_FF),gameParams.state=GAME_STATES.STARTED,world.btnPause.getComponent(cc.Button).interactable=!0,world.btnPlay.getComponent(cc.Button).interactable=!0,world.btnFF.getComponent(cc.Button).interactable=!1,world.topBar.getChildByName("tweetBackground").getChildByName("nodeMask").getChildByName("lblTweet").getComponent(cc.Animation).play()});var e=world.node.getChildByName("bottomBar").getChildByName("btnDesignPolicy"),a=world.node.getChildByName("bottomBar").getChildByName("btnStats"),t=cc.director.getScene().getChildByName("layerDesignPolicy"),o=cc.director.getScene().getChildByName("resourceScoreBackground"),r=cc.director.getScene().getChildByName("layerStats");cc.director.getScene().getChildByName("layerMessageBox");e.on(cc.Node.EventType.TOUCH_END,function(){gameParams.state=GAME_STATES.PAUSED,t.zIndex=105,o.zIndex=106;var e=cc.director.getScene().getChildByName("layerDesignPolicy"),a=e.getChildByName("policyLabel"),r=e.getChildByName("policyDescription"),n=e.getChildByName("policyCostLabel"),s=e.getChildByName("btnPolicyInvest");a.opacity=0,a.getComponent(cc.Label).string="<< Select",r.opacity=255;var c=gd.lang.policy_platform_hint[cc.sys.localStorage.language];r.getComponent(cc.Label).string=c,n.opacity=0,s.getComponent(cc.Button).interactable=!0,s.opacity=0});var n=t.getChildByName("btnDesignPolicyQuit");n.on(cc.Node.EventType.TOUCH_END,function(){gameParams.state=GAME_STATES.STARTED,t.zIndex=-1,o.zIndex=101},n),a.on(cc.Node.EventType.TOUCH_END,function(){gameParams.state=GAME_STATES.PAUSED,r.zIndex=105;var e=r.getChildByName("pageview").getChildByName("view").getChildByName("content").getChildByName("page_1"),a=r.getChildByName("pageview").getChildByName("view").getChildByName("content").getChildByName("page_2"),t=r.getChildByName("pageview").getChildByName("view").getChildByName("content").getChildByName("page_3"),o=function(e,a,t,o){d.lineWidth=t,d.strokeColor=o,d.fillColor=o,d.moveTo(e.x,e.y),d.lineTo(a.x+1,a.y),d.stroke(),d.fill()},n=function(e){return(Math.round(10*e)/10).toString()+"%"};e.getChildByName("lblYear").getComponent(cc.Label).string=gd.lang.stats_year[cc.sys.localStorage.language]+gameParams.currentDate.getFullYear(),e.getChildByName("lblYearMessage").getComponent(cc.Label).string=gd.lang.stats_year_message_a[cc.sys.localStorage.language]+(gameParams.targetDate.getFullYear()-gameParams.currentDate.getFullYear())+gd.lang.stats_year_message_b[cc.sys.localStorage.language],e.getChildByName("lblLoss").getComponent(cc.Label).string=gd.lang.stats_loss[cc.sys.localStorage.language],e.getChildByName("lblLossMessage").getComponent(cc.Label).string=gd.lang.stats_loss_message_a[cc.sys.localStorage.language]+gameParams.startDate.getFullYear()+gd.lang.stats_loss_message_b[cc.sys.localStorage.language]+n(gameParams.totalLoss)+".",e.getChildByName("lblPreparedness").getComponent(cc.Label).string=gd.lang.stats_preparedness[cc.sys.localStorage.language]+n(gameParams.populationPreparedPercent)+" / "+Math.round(gameParams.populationPrepared/1e6)+"M";var s=gd.lang.stats_preparedness_message_a[cc.sys.localStorage.language]+n(gameParams.populationPreparedPercent)+gd.lang.stats_preparedness_message_b[cc.sys.localStorage.language];e.getChildByName("lblPreparednessMessage").getComponent(cc.Label).string=s;var c=Object.values(world.countries).sort(function(e,a){return e.name<a.name?-1:e.name>a.name?1:0}),i=a.getChildByName("scrollview").getChildByName("view").getChildByName("content");i.destroyAllChildren();var l=0;c.forEach(function(e){l++;var a=e.loss>20?COLOR_DESTRUCTION_POINTS:e.pop_prepared_percent>20?COLOR_POLICY_POINTS:COLOR_ICE,t=new cc.Node,o=t.addComponent(cc.Label);t.color=a,o.string=e.name,o.fontSize=20,o.font=world.titleFont,o.horizontalAlign=cc.Label.HorizontalAlign.LEFT,t.setAnchorPoint(0,0),t.x=0,t.y=-24*l-40,t.parent=i;var r=new cc.Node,s=r.addComponent(cc.Label);r.color=a,s.string=n(e.loss),s.fontSize=20,s.font=world.titleFont,s.horizontalAlign=cc.Label.HorizontalAlign.RIGHT,r.setAnchorPoint(1,0),r.x=580,r.y=-24*l-40,r.parent=i;var c=new cc.Node,g=c.addComponent(cc.Label);c.color=a,g.string=n(e.pop_prepared_percent),g.fontSize=20,g.font=world.titleFont,g.horizontalAlign=cc.Label.HorizontalAlign.RIGHT,c.setAnchorPoint(1,0),c.x=780,c.y=-24*l-40,c.parent=i});var g=t.getChildByName("graph"),d=g.getComponent(cc.Graphics);d.clear(),g.destroyAllChildren();var m=0,u=0,p=0,y=0,f=0,_=0,h=new cc.Color(COLOR_DESTRUCTION_POINTS.r,COLOR_DESTRUCTION_POINTS.g,COLOR_DESTRUCTION_POINTS.b),P=new cc.Color(COLOR_POLICY_POINTS.r,COLOR_POLICY_POINTS.g,COLOR_POLICY_POINTS.b),S=gameParams.targetDate.getFullYear()-gameParams.startDate.getFullYear(),C=.9*t.width/S,w=.9*t.height/100;o(new cc.Vec2(4,-10),new cc.Vec2(4+.9*t.width,-10),1,COLOR_ICE),o(new cc.Vec2(4,-10),new cc.Vec2(4,0+.9*t.height),1,COLOR_ICE);for(var v=gameParams.startDate.getFullYear();v<gameParams.targetDate.getFullYear();v++){var b=v-gameParams.startDate.getFullYear(),E=gameParams.stats[v];if(void 0!==E){var T=E.loss,O=E.prepared;y=4+b*C,_=0+(100-Math.round(T))*w,f=0+Math.round(O)*w,b>0&&(o(new cc.Vec2(m,p),new cc.Vec2(y-1,p),1,h),o(new cc.Vec2(y,p),new cc.Vec2(y,_),1,h),o(new cc.Vec2(m,u),new cc.Vec2(y-1,u),1,P),o(new cc.Vec2(y,u),new cc.Vec2(y,f),1,P)),m=y,p=_,u=f}}var B=new cc.Node,N=B.addComponent(cc.Label);N.string=n(gameParams.totalLoss),N.font=world.titleFont,N.fontSize=28,B.color=h,B.setPosition(8+y,0+_),B.setAnchorPoint(0,.5),B.parent=g,B.zIndex=106;var M=new cc.Node,A=M.addComponent(cc.Label);A.string=n(gameParams.populationPreparedPercent),A.font=world.titleFont,A.fontSize=28,M.color=P,M.setPosition(8+y,0+f),M.setAnchorPoint(0,.5),M.parent=g,M.zIndex=106},a);var s=r.getChildByName("btnStatsQuit");s.on(cc.Node.EventType.TOUCH_END,function(){gameParams.state=GAME_STATES.STARTED,r.zIndex=-1},s),r.zIndex=-1},initPolicyDesign:function(){var e=cc.director.getScene().getChildByName("layerDesignPolicy"),a=e.getChildByName("pageview").getComponent(cc.PageView),t=cc.director.getScene().getChildByName("resourceScoreBackground").getChildByName("lblResourceScore").getComponent(cc.Label),o=e.getChildByName("btnEconomy"),r=e.getChildByName("btnPolitics"),n=e.getChildByName("btnCulture"),s=e.getChildByName("btnEcology"),c=e.getChildByName("policyLabel"),i=e.getChildByName("policyDescription"),l=e.getChildByName("policyCostLabel"),g=e.getChildByName("btnPolicyInvest");a.setCurrentPageIndex(0),o.getComponent(cc.Button).interactable=!1,o.getChildByName("Label").color=COLOR_UMBER;var d=[o,r,n,s],m=o,u=function(e){var a=gameParams.policies[e.id],t=e.cost_1;if(void 0!==a)switch(a){case 1:t=e.cost_2;break;case 2:t=e.cost_3;break;case 3:t=0}for(var o=world.generateResourceDistribution(),r=Math.floor((e.id-1)/4),n=[],s=0;s<o.length;s++){if(s%4==0)n.push(4*o[s]);else n[Math.floor(s/4)]+=4*o[s]}return n[r]>1&&(t*=n[r]),t=Math.round(t)},p=function(e,t){policySelected=null,a.setCurrentPageIndex(t),e.getComponent(cc.Button).interactable=!1,e.getChildByName("Label").color=COLOR_UMBER,null!=m&&m!=e&&(m.getComponent(cc.Button).interactable=!0,m.getChildByName("Label").color=COLOR_ICE),m=e,c.opacity=0;var o=gd.lang.policy_platform_hint[cc.sys.localStorage.language];i.getComponent(cc.Label).string=o,l.opacity=0,g.opacity=0},y=function(a,t,o){var r=d[o];return r.getChildByName("Label").getComponent(cc.Label).string=a,r.on(cc.Node.EventType.TOUCH_END,function(e){p(r,o)},e),0==o&&(r.getComponent(cc.Button).interactable=!1,r.getChildByName("Label").color=COLOR_UMBER,m=r),r};g.on(cc.Node.EventType.TOUCH_END,function(){var e=u(policySelected);gameParams.resources-e>=0&&void 0===gameParams.policies[policySelected.id]?(gameParams.resources-=e,gameParams.policies[policySelected.id]=1,policySelectedButton.enabled=!1,t.string=gameParams.resources.toString(),f[100*policySelected.id+1].getComponent(cc.Sprite).spriteFrame=world.dotOff,f[100*policySelected.id+1].color=COLOR_UMBER):gameParams.resources-e>=0&&1===gameParams.policies[policySelected.id]?(gameParams.resources-=e,gameParams.policies[policySelected.id]=2,policySelectedButton.enabled=!1,t.string=gameParams.resources.toString(),f[100*policySelected.id+2].getComponent(cc.Sprite).spriteFrame=world.dotOff,f[100*policySelected.id+2].color=COLOR_UMBER):gameParams.resources-e>=0&&2==gameParams.policies[policySelected.id]&&(gameParams.resources-=e,gameParams.policies[policySelected.id]=3,policySelectedButton.enabled=!1,t.string=gameParams.resources.toString(),f[100*policySelected.id+3].getComponent(cc.Sprite).spriteFrame=world.dotOff,f[100*policySelected.id+3].color=COLOR_UMBER);var a=u(policySelected);l.getComponent(cc.Label).string=gd.lang.policy_platform_cost[cc.sys.localStorage.language]+a.toString(),3==gameParams.policies[policySelected.id]?(g.getComponent(cc.Button).interactable=!1,g.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=gd.lang.policy_platform_completed[cc.sys.localStorage.language]):a<=gameParams.resources?(g.getComponent(cc.Button).interactable=!0,g.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=gd.lang.policy_platform_invest[cc.sys.localStorage.language]):(g.getComponent(cc.Button).interactable=!1,g.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=gd.lang.policy_platform_more_resources[cc.sys.localStorage.language])},this),Object.values(RESOURCES).forEach(function(e,a){y(e[cc.sys.localStorage.language].name,new cc.Vec2(300+200*a,80),a)});for(var f={},_=0;_<4;++_)for(var h=RESOURCES[Object.keys(RESOURCES)[_]],P=0,S=0,C=0,w=a.node.getChildByName("view").getChildByName("content").children[_],v=function(e){var a=h.policyOptions[e];P=C%2*w.width/2,S=(1-Math.floor(C/2))*w.height/2,C++;var t=new cc.Node;t.setAnchorPoint(cc.Vec2(0,0)),t.parent=w,t.setPosition(P,S),t.setContentSize(cc.size(w.width/3,w.height/3));var o=new cc.Node;o.setAnchorPoint(cc.Vec2(0,0)),o.setContentSize(cc.size(104,104)),o.setPosition(50,50),o.parent=t,o.color=COLOR_ICE,cc.loader.loadRes(a.img_normal,cc.SpriteFrame,function(e,a){var t=o.addComponent(cc.Sprite);t.materials=[world.defaultMaterial],t.spriteFrame=a}),t.cost_1=a.cost_1,t.cost_2=a.cost_2,t.cost_3=a.cost_3,t.option=a,t.enabled=!0,void 0!==gameParams.policies[a.id]&&(t.enabled=!1);var r=new cc.Node;r.name="Label",r.color=COLOR_ICE;var n=r.addComponent(cc.Label);n.string=a[cc.sys.localStorage.language].text,n.font=world.titleFont,n.fontSize=20,n.verticalAlign=cc.Label.VerticalAlign.BOTTOM,r.setPosition(0,0),r.setAnchorPoint(0,0),r.setContentSize(t.width,.1*t.height),r.parent=t;var s=function(e){policySelected=t.option,c.getComponent(cc.Label).string=policySelected[cc.sys.localStorage.language].text_long,i.getComponent(cc.Label).string=policySelected[cc.sys.localStorage.language].description;var o=u(policySelected);l.getComponent(cc.Label).string=gd.lang.policy_platform_cost[cc.sys.localStorage.language]+o.toString(),3==gameParams.policies[a.id]?(g.getComponent(cc.Button).interactable=!1,g.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=gd.lang.policy_platform_completed[cc.sys.localStorage.language]):o<=gameParams.resources?(g.getComponent(cc.Button).interactable=!0,g.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=gd.lang.policy_platform_invest[cc.sys.localStorage.language]):(g.getComponent(cc.Button).interactable=!1,g.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=gd.lang.policy_platform_more_resources[cc.sys.localStorage.language]),policySelectedButton=t,c.opacity=255,i.opacity=255,l.opacity=255,g.opacity=255},d=function(e){o.color=COLOR_UMBER,r.color=COLOR_UMBER},m=function(e){o.color=COLOR_ICE,r.color=COLOR_ICE};[t,o,r].forEach(function(e){e.on(cc.Node.EventType.TOUCH_END,s,t)}),[t,o,r].forEach(function(e){e.on(cc.Node.EventType.MOUSE_ENTER,d,t)}),[t,o,r].forEach(function(e){e.on(cc.Node.EventType.MOUSE_LEAVE,m,t)});var p=new cc.Node,y=p.addComponent(cc.Sprite);y.spriteFrame=world.dotOff,y.materials=[world.defaultMaterial];var _=new cc.Node,v=_.addComponent(cc.Sprite);v.spriteFrame=world.dotOff,v.materials=[world.defaultMaterial];var b=new cc.Node,E=b.addComponent(cc.Sprite);E.spriteFrame=world.dotOff,E.materials=[world.defaultMaterial],void 0===gameParams.policies[a.id]?(y.spriteFrame=world.dotOff,v.spriteFrame=world.dotOff,E.spriteFrame=world.dotOff):1===gameParams.policies[a.id]?(y.spriteFrame=world.dotOn,v.spriteFrame=world.dotOff,E.spriteFrame=world.dotOff):2===gameParams.policies[a.id]?(y.spriteFrame=world.dotOn,v.spriteFrame=world.dotOn,E.spriteFrame=world.dotOff):3===gameParams.policies[a.id]&&(y.spriteFrame=world.dotOn,v.spriteFrame=world.dotOn,E.spriteFrame=world.dotOn),p.setPosition(0,50),p.setContentSize(25,25),p.setAnchorPoint(cc.Vec2(0,0)),_.setPosition(0,p.y+35),_.setContentSize(25,25),_.setAnchorPoint(cc.Vec2(0,0)),b.setPosition(0,_.y+35),b.setAnchorPoint(cc.Vec2(0,0)),b.setContentSize(25,25),p.parent=t,_.parent=t,b.parent=t,f[100*a.id+1]=p,f[100*a.id+2]=_,f[100*a.id+3]=b},b=0;b<h.policyOptions.length;b++)v(b);o.on(cc.Node.EventType.TOUCH_END,function(e){p(o,0)}),r.on(cc.Node.EventType.TOUCH_END,function(e){p(r,1)}),n.on(cc.Node.EventType.TOUCH_END,function(e){p(n,2)}),s.on(cc.Node.EventType.TOUCH_END,function(e){p(s,3)}),a.node.on("page-turning",function(e){var a=e.getCurrentPageIndex();p(d[a],a)},world)},initStats:function(){var e=cc.director.getScene().getChildByName("layerStats"),a=e.getChildByName("pageview").getComponent(cc.PageView),t=e.getChildByName("btnWorld"),o=e.getChildByName("btnCountries"),r=e.getChildByName("btnTrends");a.setCurrentPageIndex(0),t.getComponent(cc.Button).interactable=!1,t.getChildByName("Label").color=COLOR_UMBER;var n=[t,o,r],s=t,c=function(e,t){a.setCurrentPageIndex(t),e.getComponent(cc.Button).interactable=!1,e.getChildByName("Label").color=COLOR_UMBER,null!=s&&s!=e&&(s.getComponent(cc.Button).interactable=!0,s.getChildByName("Label").color=COLOR_ICE),s=e};t.on(cc.Node.EventType.TOUCH_END,function(e){c(t,0)}),o.on(cc.Node.EventType.TOUCH_END,function(e){c(o,1)}),r.on(cc.Node.EventType.TOUCH_END,function(e){c(r,2)}),a.node.on("page-turning",function(e){var a=e.getCurrentPageIndex();c(n[a],a)},world)},processResourceSelection:function(e){if(gameParams.state!==GAME_STATES.PAUSED){var a=Math.floor(1+3*Math.random());gameParams.resources+=a,e.target.destroy(),gameParams.resourcesAdded||(gameParams.state=GAME_STATES.PAUSED,gameParams.resourcesAdded=!0,gameParams.tutorialMode?world.showMessageBox(world,"HINT:",TUTORIAL_MESSAGES.FIRST_RESOURCE_CLICKED[cc.sys.localStorage.language],"OK!",function(){gameParams.tutorialHints.push(TUTORIAL_MESSAGES.FIRST_RESOURCE_CLICKED[cc.sys.localStorage.language]),gameParams.state=GAME_STATES.STARTED}):gameParams.state=GAME_STATES.STARTED)}},processCrisisSelection:function(e){if(gameParams.state!==GAME_STATES.PAUSED){gameParams.crisisCountry=null;for(var a=null,t=0;t<gameParams.crises.length;t++)if(gameParams.crises[t].id==e.target.crisisId){var o=gameParams.crises[t];a=CRISES[o.crisis],gameParams.crises.splice(t,1);break}if(e.target.destroy(),!gameParams.alertCrisis&&gameParams.tutorialMode)gameParams.state=GAME_STATES.PAUSED,gameParams.alertCrisis=!0,world.showMessageBox(world,gd.lang.crisis_title[cc.sys.localStorage.language],gd.lang.crisis_message[cc.sys.localStorage.language]+a[cc.sys.localStorage.language]+"!","OK!",function(){gameParams.state=GAME_STATES.STARTED});else if(Math.random()<.5){var r=gd.quizzes[Math.floor(Math.random()*gd.quizzes.length)],n=r.quiz[cc.sys.localStorage.language],s=r.wrong_answer[cc.sys.localStorage.language],c=r.right_answer[cc.sys.localStorage.language];world.showQuizBox(world,"CRISIS ALERT!",n,s,c)}}},refreshDate:function(){world.topBar.getChildByName("lblMonth").getComponent(cc.Label).string=(gameParams.currentDate.getMonth()+1).toString(),world.topBar.getChildByName("lblYear").getComponent(cc.Label).string=gameParams.currentDate.getFullYear().toString()},printCountryStats:function(){var e=world.countries[gameParams.currentCountry];world.countryLabel.string=e.name;var a=Math.floor(e.loss),t=Math.floor(e.pop_prepared_percent);world.countryLoss.string=a+"%",world.countryLossProgress.progress=a/100,a>=LOSS_TOTAL?world.countryLossProgress.opacity=255:a>=LOSS_PARTIAL&&(world.countryLossProgress.opacity=191),world.countryAwarePrepared.string=t+"%",world.countryPreparedProgress.progress=t/100},printWorldStats:function(){world.countryLabel.string=gd.lang.world_label[cc.sys.localStorage.language];var e=Math.round(gameParams.totalLoss),a=Math.round(gameParams.populationPreparedPercent);world.countryLoss.string=e+"%",world.countryAwarePrepared.string=a+"%",world.countryLossProgress.progress=e/100,world.countryPreparedProgress.progress=a/100},generateResourceDistribution:function(){for(var e=[],a=0,t=0;t<16;t++){var o=1;void 0!==gameParams.policies[t+1]&&(o+=gameParams.policies[t+1]),a+=o,e.push(o)}for(var r=0;r<e.length;r++)e[r]/=a;return e},selectCountry:function(e,a){if(gameParams.state===GAME_STATES.PREPARED||gameParams.state===GAME_STATES.STARTED||gameParams.state===GAME_STATES.PAUSED){var t=e.getCurrentTarget().convertToNodeSpaceAR(a);world.lastLayerID=-1;var o=0,r=world.sortedObjs.length;world.lastLayerID>-1&&(o=o<0?0:o,r=r>world.sortedObjs.length?world.sortedObjs.length:r);for(var n=function(e,a){return Math.sqrt(Math.pow(e.x-a.x,2)+Math.pow(e.y-a.y,2))},s=-1,c=null,i=o;i<r;i++){var l=world.sortedObjs[i],g={x:t.x,y:cc.winSize.height-t.y-2*Y_OFFSET};if(world.collisionDetection(l.points[0],g)){world.lastLayerID=i;var d=n(world.countries[l.iso_a3].centroid,g);if(-1===s||d<s){s=d,c=l.iso_a3;break}}}return null!=c?(null!=gameParams.currentCountry&&(world.countries[gameParams.currentCountry].selected=!1),gameParams.currentCountry=c,null!=gameParams.currentCountry&&(world.countries[gameParams.currentCountry].selected=!0),currentCountry=c,world.printCountryStats()):(null!=gameParams.currentCountry&&(world.countries[gameParams.currentCountry].selected=!1),gameParams.currentCountry=null,world.printWorldStats()),!0}},generateWeightedPolicyIndex:function(e){for(var a=world.generateResourceDistribution(),t=0,o=0,r=0;r<a.length;r++){if((t+=a[r])>e){o=r;break}}return o},generatePolicyIcon:function(){var e=world.generateWeightedPolicyIndex(Math.random());switch(e){case 0:res.resource_economy_1;break;case 1:res.resource_economy_2;break;case 2:res.resource_economy_3;break;case 3:res.resource_economy_4;break;case 4:res.resource_politics_1;break;case 5:res.resource_politics_2;break;case 6:res.resource_politics_3;break;case 7:res.resource_politics_4;break;case 8:res.resource_culture_1;break;case 9:res.resource_culture_2;break;case 10:res.resource_culture_3;break;case 11:res.resource_culture_4;break;case 12:res.resource_ecology_1;break;case 13:res.resource_ecology_2;break;case 14:res.resource_ecology_3;break;case 15:res.resource_ecology_4}return e},addResource:function(){var e=new cc.Node("Resource"),a=e.addComponent(cc.Sprite),t=world.generatePolicyIcon();a.spriteFrame=world.policyIcons[t];var o=Math.floor(Math.random()*Object.keys(world.countries).length),r=world.countries[Object.keys(world.countries)[o]].centroid;e.setPosition(r.x,world.node.height-2*Y_OFFSET-r.y+RESOURCE_SIZE_H/2),e.setContentSize(cc.size(RESOURCE_SIZE_W,RESOURCE_SIZE_H)),e.placedAt=gameParams.counter,e.setAnchorPoint(.5,0),e.parent=cc.director.getScene(),e.zIndex=102,world.buttons.push(e),e.on(cc.Node.EventType.TOUCH_END,world.processResourceSelection,e),gameParams.alertResources||gameParams.tutorialMode&&(gameParams.state=GAME_STATES.PAUSED,gameParams.alertResources=!0,world.showMessageBox(world,"HINT:",TUTORIAL_MESSAGES.FIRST_RESOURCE_SHOWN[cc.sys.localStorage.language],"OK!",function(e){gameParams.tutorialHints.push(TUTORIAL_MESSAGES.FIRST_RESOURCE_SHOWN[cc.sys.localStorage.language]),gameParams.state=GAME_STATES.PAUSED_TUTORIAL})),gameParams.lastResource=gameParams.counter},crisisProbDistribution:function(){var e=[],a=Object.keys(CRISES),t=Object.keys(world.countries),o=0;a.forEach(function(a){var r=CRISES[a];t.forEach(function(a){var t=world.countries[a],n=t.loss/gameParams.totalLoss,s=t.pop_prepared_percent/gameParams.populationPreparedPercent,c=1;c+=n*r.influence_of_environmental_loss,c+=s*r.influence_of_preparedness,isNaN(c)&&(c=0),c>0&&(o+=c,e.push(c))})});for(var r=0;r<e.length;r++)e[r]/=o;return e},crisisProbLocation:function(e){for(var a=world.crisisProbDistribution(),t=Object.keys(CRISES),o=Object.keys(world.countries),r={},n=0,s=0;s<a.length;s++)if(e<(n+=a[s])){var c=Math.floor(t.length*s/a.length),i=s%o.length;r.crisis=t[c],r.country=o[i],r.id=s,r.counter=gameParams.counter;break}return r},addCrisis:function(){var e=Math.random(),a=world.crisisProbLocation(e);gameParams.crisisCountry=a,gameParams.crises.push(a),gameParams.crisisCount++;var t=CRISES[a.crisis],o=world.countries[a.country],r=new cc.Node("Crisis");r.addComponent(cc.Sprite).spriteFrame=world.crisisIcons[a.crisis];var n=o.centroid;console.log(o.name),r.setPosition(n.x,world.node.height-2*Y_OFFSET-n.y+RESOURCE_SIZE_H/2),r.setContentSize(cc.size(RESOURCE_SIZE_W,RESOURCE_SIZE_H)),r.placedAt=gameParams.counter,r.setAnchorPoint(.5,0),r.crisisId=a.id,r.name="crisis"+a.id,r.parent=cc.director.getScene(),r.zIndex=102,world.buttons.push(r),r.on(cc.Node.EventType.TOUCH_END,world.processCrisisSelection,r);var s=gd.lang.crisis_prefix[cc.sys.localStorage.language]+t[cc.sys.localStorage.language]+gd.lang.crisis_suffix[cc.sys.localStorage.language]+o.name+".";if(gameParams.crisisCount<4){gameParams.state=GAME_STATES.PAUSED,s+=gd.lang.crisis_explanation[cc.sys.localStorage.language];var c=world.showMessageBox(world,gd.lang.crisis_alert[cc.sys.localStorage.language],s,"OK!",function(e){gameParams.tutorialMode?gameParams.state=GAME_STATES.PAUSED_TUTORIAL:gameParams.state=GAME_STATES.STARTED});gameParams.automateMode&&fireClickOnTarget(c[0])}gameParams.lastCrisis=gameParams.counter},addTutorial:function(){if(!(gameParams.tutorialHints.length<2||gameParams.tutorialHints.length>=6)){gameParams.state=GAME_STATES.PAUSED;var e=null;switch(gameParams.tutorialHints.length){case 2:default:e=TUTORIAL_MESSAGES.RANDOM_1[cc.sys.localStorage.language];break;case 3:e=TUTORIAL_MESSAGES.RANDOM_2[cc.sys.localStorage.language];break;case 4:e=TUTORIAL_MESSAGES.RANDOM_3[cc.sys.localStorage.language];break;case 5:e=TUTORIAL_MESSAGES.RANDOM_4[cc.sys.localStorage.language]}world.showMessageBox(world,"HINT:",e,"OK",function(){gameParams.tutorialHints.push(e),gameParams.state=GAME_STATES.STARTED})}},sigmoidalPercent:function(e,a){void 0===a&&(a=50);var t=1*((e-a)/a),o=1/Math.pow(Math.E,t);return o},evaluateLoss:function(e){var a=e.loss,t=1+gameParams.rateOfLoss*(.5+Math.random()),o=1+.1*e.pop_prepared_percent/100;t/=o,gameParams.crises.forEach(function(e){var o=CRISES[e.crisis];t*=1+o.effect_on_environmental_loss*Math.pow(a/gameParams.totalLoss,.5)});var r=1+(t-1)*world.sigmoidalPercent(a),n=a+(r-1);return n>100&&(n=100),n<0&&(n=0),n},transmitFrom:function(e){var a=e.neighbours,t=e.shared_border_percentage,o=world.scenarioData.threat_details.transmission.transmission_land,r=world.scenarioData.threat_details.transmission.transmission_sea,n=world.scenarioData.threat_details.transmission.transmission_air,s=world.scenarioData.threat_details.advanced_stats.minimum_infectivity_increase,c=e.affected_chance,i=e.pop_est,l=gameParams.populationWorld,g=Math.log(i)/Math.log(l),d=e.income_grp,m=parseFloat(d.charAt(0))/6,u=t*o*c*g*m,p=(1-t)*r*c*g*(1-m),y=t*n*c*g*(1-m),f=null;if(Math.random()<u&&a.length>0){var _=Math.floor(Math.random()*a.length),h=world.countries[a[_]];0==h.policy&&(f=h)}else if(Math.random()<p)for(var P=world.shuffleArray(Object.keys(world.countries)),S=Math.random(),C=0;C<P.length;C++){var w=world.countries[P[C]];if(S<1-w.shared_border_percentage&&0==w.policy){f=w;break}}else if(Math.random()<y)for(var v=world.shuffleArray(Object.keys(world.countries)),b=Math.random(),E=0;E<v.length;E++){var T=world.countries[v[E]],O=T.income_grp;if(b<1-parseFloat(O.charAt(0))/6&&0==T.policy){f=T;break}}null!=f&&(f.affected_chance=.1,e.affected_chance<1&&(e.affected_chance*=.1),f.policy=1,f.pop_aware=parseInt(f.pop_est)*s)},infectWithin:function(e){if(0!=e.affected_chance&&!(e.pop_aware>=parseInt(e.pop_est))){var a=world.scenarioData.threat_details.advanced_stats.infectivity_increase_speed,t=world.scenarioData.threat_details.advanced_stats.minimum_infectivity_increase,o=a;Object.keys(gameParams.policies).forEach(function(a){gameParams.policies[a];switch(a.id){case 1:o*=Math.log(1+e.income_grp_num);break;case 2:case 3:case 4:o*=Math.log(1.1*(6-e.income_grp_num));break;case 5:case 6:o*=1.1;break;case 7:o*=Math.log(1.1*(6-e.income_grp_num));break;case 8:case 9:o*=Math.log(2+e.income_grp_num);break;case 10:o*=Math.log(.8*(7-e.income_grp_num));break;case 11:case 12:o*=Math.log(1+e.income_grp_num);break;case 13:o*=Math.log(1.1*(6-e.income_grp_num));break;case 14:o*=Math.log(1+e.income_grp_num);break;case 15:o*=Math.log(1.1*(6-e.income_grp_num));break;case 16:o*=Math.log(1+e.income_grp_num)}}),o-1<t&&(o=1+t),e.pop_aware=(1+e.pop_aware)*o,e.pop_aware>e.pop_est&&(e.pop_aware=e.pop_est)}},calculatePolicyBalanceOnPreparedness:function(){var e=Object.values(gameParams.policies).reduce(function(e,a){return e+a},0);if(0==e)return 1;var a=e/4,t=0,o=0,r=0,n=0;Object.keys(gameParams.policies).forEach(function(e){var a=gameParams.policyOptions[e],s=gameParams.policies[e];switch(a.domain){case 1:t+=s;break;case 2:o+=s;break;case 3:r+=s;break;case 4:n+=s}});var s=Math.pow(t-a,2)+Math.pow(o-a,2)+Math.pow(r-a,2)+Math.pow(n-a,2);return 1-Math.pow(s/Math.pow(e,2),4)},calculateSinglePolicyImpactOnPreparedness:function(e,a){var t=1,o=parseInt(Object.keys(gameParams.policies)[a]),r=gameParams.policyOptions[o],n=gameParams.policies[o],s=Math.log(n+1.718),c=parseInt(e.pop_est);switch(t*=c<1e7?1+r.effect_on_pop_low*s:c<1e8?1+r.effect_on_pop_medium*s:1+r.effect_on_pop_high*s,e.income_grp_num){case 1:case 2:t*=1+r.effect_on_income_high*s;break;case 3:t*=1+r.effect_on_income_medium_high*s;break;case 4:t*=1+r.effect_on_income_low_medium*s;break;case 5:t*=1+r.effect_on_income_low*s}var i=parseFloat(e.equator_dist);t*=i>-23.5&&i<23.5?1+r.effect_on_geo_tropic*s:i>-40&&i<40?1+r.effect_on_geo_subtropic*s:i>-60&&i<60?1+r.effect_on_geo_temperate*s:1+r.effect_on_geo_polar*s;for(var l=a+1;l<Object.keys(gameParams.policies).length;l++){var g=parseInt(Object.keys(gameParams.policies)[l]),d=gameParams.policies[g],m=Math.log(d+1.718),u=gameParams.policyRelations[o][g];void 0!==u&&(t*=1+u*m)}return t},calculatePolicyImpactOnPreparedness:function(e){for(var a=1,t=0;t<Object.keys(gameParams.policies).length;t++)a*=world.calculateSinglePolicyImpactOnPreparedness(e,t);return a*(world.sigmoidalPercent(e.pop_prepared_percent,5)+.5)},registerPreparednessWithin:function(e){if(0!=e.affected_chance){var a=e.pop_est,t=e.pop_prepared,o=world.scenarioData.threat_details.advanced_stats.severity_increase_speed,r=world.scenarioData.threat_details.advanced_stats.minimum_severity_increase,n=1+(world.calculatePolicyBalanceOnPreparedness()*world.calculatePolicyImpactOnPreparedness(e)*o-1)/MONTH_INTERVAL;o<r&&(o=r),0==t?t=1:t*=n,t>a&&(t=a),t>e.pop_est&&(t=e.pop_est),e.pop_prepared=t}},doSim:function(){if(null!==gameParams.startCountry&&gameParams.state===GAME_STATES.PREPARED){var e=world.countries[gameParams.startCountry];e.policy=1,e.affected_chance=1,world.shuffleArray=function(e){return e.sort(function(){return Math.random()-.5})},world.startGameParams(),world.refreshDate(),world.buttons=[];(function e(){if(gameParams.state===GAME_STATES.STARTED){if(gameParams.counter++,gameParams.automateMode){for(var a=function(e){var a=gameParams.automateScript.policyEvents[e];if(gameParams.counter==a.counter/MONTH_INTERVAL)return fireClickOnTarget(world.btnDevelopPolicy,function(){var e=Object.values(RESOURCES).map(function(e){return e.name}),t=Math.floor((a.policyID-1)/e.length),o=world.designPolicyLayer.getChildByName(e[t]);fireClickOnTarget(o,function(){var e=world.designPolicyLayer.policyButtons[a.policyID-1];fireClickOnTarget(e,function(){fireClickOnTarget(world.designPolicyLayer.investButton,function(){fireClickOnTarget(world.designPolicyLayer.btnExit)})})})}),"break"},t=0;t<gameParams.automateScript.policyEvents.length&&"break"!==a(t);t++);for(var o=0;o<gameParams.crises.length;o++){var r=gameParams.crises[o];if(gameParams.counter==r.counter+gameParams.automateScript.crisisDuration){var n=world.worldBackground.getChildByName("crisis"+r.id);fireClickOnTarget(n)}}}if(gameParams.counter%gameParams.timeInterval==0){gameParams.currentDate=new Date(gameParams.currentDate.valueOf()),gameParams.currentDate.setDate(gameParams.currentDate.getDate()+30.417);var s=gameParams.currentDate.getFullYear(),c=gameParams.previousDate.getFullYear();if(s>c){gameParams.stats[c]={loss:gameParams.totalLoss,prepared:gameParams.populationPreparedPercent};var i="",l=!1,g=Object.values(NARRATIVES.n2048).sort(function(e,a){return a.loss-e.loss});switch(s){case 2048:l=!0;for(var d=0;d<g.length;d++){var m=g[d];if(gameParams.totalLoss>m.loss){var u=Math.floor(Math.random()*m[cc.sys.localStorage.language].length);i=m[cc.sys.localStorage.language][u];break}}}if(l){gameParams.state=GAME_STATES.PAUSED;var p=world.showMessageBox(world,gd.lang.bulletin[cc.sys.localStorage.language]+s,i,"OK",function(){gameParams.state=GAME_STATES.STARTED});gameParams.automateMode&&world.fireClickOnTarget(p[0])}}gameParams.previousDate=gameParams.currentDate;var y=0,f=0,_=0,h=0,P=0;Object.keys(world.countries).forEach(function(e){var a=world.countries[e],t=world.evaluateLoss(a);if(t>=.1&&(a.previousLoss=a.loss,a.loss=t),a.affected_chance){world.transmitFrom(a),world.infectWithin(a),world.registerPreparednessWithin(a),_++,h+=a.pop_aware,P+=a.pop_prepared,a.pop_aware_percent=100*a.pop_aware/a.pop_est;var o=a.pop_prepared_percent;a.pop_prepared_percent=100*a.pop_prepared/a.pop_est,o>.5&&parseInt(o),a.pop_prepared_percent>.5&&parseInt(a.pop_prepared_percent)}y+=a.policy,f+=a.loss}),y/=Object.keys(world.countries).length,gameParams.policy=y,f/=Object.keys(world.countries).length,gameParams.previousLoss=f,gameParams.totalLoss=f,gameParams.countriedAffected=_,gameParams.populationAware=h,gameParams.populationPrepared=P,gameParams.populationAwarePercent=100*gameParams.populationAware/gameParams.populationWorld,gameParams.populationPreparedPercent=100*gameParams.populationPrepared/gameParams.populationWorld,null!=gameParams.currentCountry?world.printCountryStats():world.printWorldStats()}var S=gameParams.crisisInterval;Object.keys(gameParams.policies).forEach(function(e){var a=gameParams.policyOptions[e],t=gameParams.policies[e];S/=1+a.effect_on_crises*Math.log(t+1.718)}),gameParams.counter-gameParams.lastCrisis>=S&&Math.random()<CRISIS_CHANCE&&world.addCrisis();var C=function(e){return e=(e=1/(e+=1.000001))>1?Math.pow(e,gameParams.difficultyMultiplier):Math.pow(e,1/gameParams.difficultyMultiplier)},w=gameParams.resourceInterval;gameParams.crises.forEach(function(e){var a=CRISES[e.crisis].effect_on_resources;world.countries[e.country],w*=C(a)}),Object.keys(gameParams.policies).forEach(function(e){var a=gameParams.policyOptions[e],t=gameParams.policies[e];w*=C(a.effect_on_resources*Math.log(t+1.718))}),gameParams.counter-gameParams.lastResource>=w&&(world.addResource(),gameParams.resourceInterval*=1.1),gameParams.tutorialMode&&gameParams.counter%gameParams.tutorialInterval==0&&world.addTutorial();for(var v=[],b=0;b<world.buttons.length;b++){var E=world.buttons[b];gameParams.counter>E.placedAt+RESOURCE_DURATION?E.removeFromParent():v.push(E)}if(world.buttons=v,world.resourceScoreLabel.string=gameParams.resources,world.refreshDate(),gameParams.totalLoss>=100){var T=Object.values(NARRATIVES.n2070).sort(function(e,a){return a.loss-e.loss})[0],O=Math.floor(Math.random()*T[cc.sys.localStorage.language].length),B=T[cc.sys.localStorage.language][O];world.gameOver(world,B,"OK")}else if(gameParams.currentDate>=gameParams.targetDate){for(var N="",M=Object.values(NARRATIVES.n2070).sort(function(e,a){return a.loss-e.loss}),A=0;A<M.length;A++){var R=M[A];if(gameParams.totalLoss>R.loss){var L=Math.floor(Math.random()*R[cc.sys.localStorage.language].length);N=R[cc.sys.localStorage.language][L];break}}gameOver(world,N,"OK")}gameParams.timeoutID=setTimeout(e,20)}else gameParams.timeoutID=setTimeout(e,20)})()}},onLoad:function(){this._time=0,world=this,world.messageBox.opacity=0,scenarioData=gd.scenarioData,automateScripts=gd.automateScripts,world.scenarioData=scenarioData,world.automateID=-1,"undefined"!=typeof automateID&&(world.automateID=automateID),world.mouse={x:0,y:0},this.initGameParams(scenarioData),cc.loader.loadRes("singleColor",cc.SpriteFrame,function(e,a){world.singleColor=a}),cc.loader.loadRes("icons/DOT_ON",cc.SpriteFrame,function(e,a){world.dotOn=a,cc.loader.loadRes("icons/DOT_OFF",cc.SpriteFrame,function(e,a){world.dotOff=a,world.initPolicyDesign(),world.initStats()})}),world.policyIcons=[],Object.keys(res).forEach(function(e){var a=res[e];cc.loader.loadRes(a,cc.SpriteFrame,function(e,a){world.policyIcons.push(a)})}),world.crisisIcons={},Object.keys(CRISES).forEach(function(e){var a=CRISES[e].image;cc.loader.loadRes(a,cc.SpriteFrame,function(a,t){world.crisisIcons[e]=t})});var e=cc.url.raw("resources/scripts/json-equal-greyscale.json");cc.loader.load(e,function(e,a){null==e&&(world.countriesJson=a.json,world.initCountries(),world.spriteCountries={},world.countryNodes={},cc.loader.loadResDir("countries",cc.SpriteFrame,function(e,a,t){for(var o=0;o<a.length;o++){var r=new cc.Node("Sprite "),n=r.addComponent(cc.Sprite);n.spriteFrame=a[o];var s=cc.MaterialVariant.create(world.material);s.setProperty("u_selected",0),s.setProperty("u_percentageLoss",0),s.setProperty("u_percentagePrep",0),n.materials=[s],n.setMaterial(0,s);var c=t[o].match("/([A-Z]*)_")[1];world.countryNodes[c]=r}for(var i=cc.director.getScene(),l=Object.keys(world.countryNodes),g=0;g<l.length;g++){var d=l[g],m=world.countries[d];if(void 0!==m){var u=world.countryNodes[d];u.setAnchorPoint(0,0),u.setPosition(m.offsetX,cc.winSize.height-55-m.offsetY),u.parent=i,u.zIndex=2}}}))}),world.initControls(),cc.director.getScene().getChildByName("foreground").on(cc.Node.EventType.MOUSE_MOVE,function(e){world.selectCountry(e,e.getLocation())})},start:function(){var e=function(){gameParams.state=GAME_STATES.PREPARED,world.btnPause.getComponent(cc.Button).interactable=!0,world.btnPlay.getComponent(cc.Button).interactable=!1,world.btnFF.getComponent(cc.Button).interactable=!0,world.doSim()},a=["NZL","AUS","ZAF","ARG","CHL"],t=a[Math.floor(Math.random()*a.length)];world.showMessageBox(world,world.scenarioData[cc.sys.localStorage.language].popup_1_title,world.scenarioData[cc.sys.localStorage.language].popup_1_description,gd.lang.start_tutorial[cc.sys.localStorage.language],function(a){gameParams.tutorialMode=!0,gameParams.startCountry=t,gameParams.statsCountry=t,gameParams.currentCountry=t;var o=world.countries[gameParams.startCountry].name;nestedButtons=world.showMessageBox(world,gd.lang.start_prepare[cc.sys.localStorage.language],gd.lang.start_mission_a[cc.sys.localStorage.language]+o+gd.lang.start_mission_b[cc.sys.localStorage.language],world.scenarioData[cc.sys.localStorage.language].popup_2_title,function(a){e()})},gd.lang.start_tutorial_skip[cc.sys.localStorage.language],function(a){gameParams.tutorialMode=!1,gameParams.startCountry=t,gameParams.statsCountry=t,gameParams.currentCountry=t;var o=world.countries[gameParams.startCountry].name;nestedButtons=world.showMessageBox(world,gd.lang.start_prepare[cc.sys.localStorage.language],gd.lang.start_mission_a[cc.sys.localStorage.language]+o+gd.lang.start_mission_b[cc.sys.localStorage.language],world.scenarioData[cc.sys.localStorage.language].popup_2_title,function(a){e()})})},update:function(e){this._time+=e,void 0!==world.countryNodes&&Object.keys(world.countryNodes).forEach(function(e){var a=world.countryNodes[e],t=world.countries[e];if(void 0!==t){var o=a.getComponent(cc.Sprite).materials[0];o.setProperty("u_selected",t.selected?1:0),o.setProperty("u_percentageLoss",t.loss),o.setProperty("u_percentagePrep",t.pop_prepared_percent/100)}})}}),cc._RF.pop()},{}],PlayGame:[function(e,a,t){"use strict";cc._RF.push(a,"b0bd514jFpPtqlkebr5Q6hp","PlayGame");var o=this&&this.__extends||function(){var e=function(a,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)a.hasOwnProperty(t)&&(e[t]=a[t])})(a,t)};return function(a,t){function o(){this.constructor=a}e(a,t),a.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,a,t,o){var r,n=arguments.length,s=n<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,a,t,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(n<3?r(s):n>3?r(a,t,s):r(a,t))||s);return n>3&&s&&Object.defineProperty(a,t,s),s};Object.defineProperty(t,"__esModule",{value:!0});var n=cc._decorator,s=n.ccclass,c=(n.property,function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return o(a,e),a.prototype.onLoad=function(){this.node.on("mouseup",function(e){this.interactable&&cc.director.loadScene("WorldScene")},this)},a.prototype.start=function(){},a=r([s],a)}(cc.Component));t.default=c,cc._RF.pop()},{}],SelectConsent:[function(e,a,t){"use strict";cc._RF.push(a,"ee485aC70hKQoQzbDeMsmD2","SelectConsent");var o=this&&this.__extends||function(){var e=function(a,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)a.hasOwnProperty(t)&&(e[t]=a[t])})(a,t)};return function(a,t){function o(){this.constructor=a}e(a,t),a.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,a,t,o){var r,n=arguments.length,s=n<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,a,t,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(n<3?r(s):n>3?r(a,t,s):r(a,t))||s);return n>3&&s&&Object.defineProperty(a,t,s),s};Object.defineProperty(t,"__esModule",{value:!0});var n=cc._decorator,s=n.ccclass,c=n.property,i=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.play=null,a.consent=null,a}return o(a,e),a.prototype.onLoad=function(){console.log(this.play.enabled),console.log(cc.sys.localStorage.consent)},a.prototype.togglePlay=function(e){cc.log("got here "+e.isChecked),cc.sys.localStorage.consent=e.isChecked,this.play.interactable=e.isChecked,cc.log("got here "+this.play.interactable)},a.prototype.playGame=function(e){this.play.interactable&&cc.director.loadScene("WorldScene")},a.prototype.start=function(){},r([c(cc.Button)],a.prototype,"play",void 0),r([c(cc.Toggle)],a.prototype,"consent",void 0),a=r([s],a)}(cc.Component);t.default=i,cc._RF.pop()},{}],SelectDifficulty:[function(e,a,t){"use strict";cc._RF.push(a,"cedefktLpdJpZ5X0rs4xwzP","SelectDifficulty");var o=this&&this.__extends||function(){var e=function(a,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)a.hasOwnProperty(t)&&(e[t]=a[t])})(a,t)};return function(a,t){function o(){this.constructor=a}e(a,t),a.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,a,t,o){var r,n=arguments.length,s=n<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,a,t,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(n<3?r(s):n>3?r(a,t,s):r(a,t))||s);return n>3&&s&&Object.defineProperty(a,t,s),s};Object.defineProperty(t,"__esModule",{value:!0});var n=cc._decorator,s=n.ccclass,c=n.property,i=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.label=null,a.text="hello",a}return o(a,e),a.prototype.start=function(){this.node.on("mouseup",function(e){"chbEasy"===this.name?cc.sys.localStorage.level="Easy":"chbMedium"===this.name?cc.sys.localStorage.level="Medium":cc.sys.localStorage.level="Hard"},this)},r([c(cc.Label)],a.prototype,"label",void 0),r([c],a.prototype,"text",void 0),a=r([s],a)}(cc.Component);t.default=i,cc._RF.pop()},{}],SelectLanguage:[function(e,a,t){"use strict";cc._RF.push(a,"c7fb7xn9bJHg63X4zTEA/cA","SelectLanguage");var o=this&&this.__extends||function(){var e=function(a,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var t in a)a.hasOwnProperty(t)&&(e[t]=a[t])})(a,t)};return function(a,t){function o(){this.constructor=a}e(a,t),a.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,a,t,o){var r,n=arguments.length,s=n<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,a,t,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(n<3?r(s):n>3?r(a,t,s):r(a,t))||s);return n>3&&s&&Object.defineProperty(a,t,s),s};Object.defineProperty(t,"__esModule",{value:!0});var n=cc._decorator,s=n.ccclass,c=n.property,i=function(e){function a(){var a=null!==e&&e.apply(this,arguments)||this;return a.label=null,a.text="hello",a}return o(a,e),a.prototype.onLoad=function(){this.node.on("mouseup",function(e){"chbEnglish"===this.name?cc.sys.localStorage.language="eng":cc.sys.localStorage.language="esp"},this)},a.prototype.start=function(){},r([c(cc.Label)],a.prototype,"label",void 0),r([c],a.prototype,"text",void 0),a=r([s],a)}(cc.Component);t.default=i,cc._RF.pop()},{}],StartGame:[function(e,a,t){"use strict";cc._RF.push(a,"ed7884Okn1M7qmcjCUuwTbH","StartGame"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){void 0===cc.sys.localStorage.language&&(cc.sys.localStorage.language="eng"),void 0===cc.sys.localStorage.level&&(cc.sys.localStorage.level="Easy"),void 0===cc.sys.localStorage.greyscale&&(cc.sys.localStorage.greyscale=!0),this.node.on("mouseup",function(e){cc.director.loadScene("LoadingScene")})},start:function(){}}),cc._RF.pop()},{}]},{},["PlayGame","SelectConsent","SelectDifficulty","SelectLanguage","StartGame","ChangeTweet","LoadMap"]);